{
  "version": 3,
  "sources": ["../../../lib/ui/Dataview.mjs", "../../../lib/ui/elements/alert.mjs", "../../../lib/ui/elements/btnPanel.mjs", "../../../lib/ui/elements/card.mjs", "../../../lib/ui/elements/chkbox.mjs", "../../../lib/ui/elements/confirm.mjs", "../../../lib/ui/elements/contextMenu.mjs", "../../../lib/ui/elements/control.mjs", "../../../lib/ui/elements/dialog.mjs", "../../../lib/ui/elements/drawer.mjs", "../../../lib/ui/elements/drawing.mjs", "../../../lib/ui/elements/dropdown.mjs", "../../../lib/ui/elements/helpDialog.mjs", "../../../lib/ui/elements/jsoneditor.mjs", "../../../lib/ui/elements/layerStyle.mjs", "../../../lib/ui/elements/legendIcon.mjs", "../../../lib/ui/elements/loginForm.mjs", "../../../lib/ui/elements/numericInput.mjs", "../../../lib/ui/elements/pills.mjs", "../../../lib/ui/elements/radio.mjs", "../../../lib/ui/elements/registerForm.mjs", "../../../lib/ui/elements/searchbox.mjs", "../../../lib/ui/elements/slider.mjs", "../../../lib/ui/elements/slider_ab.mjs", "../../../lib/ui/elements/themeLegendSwitch.mjs", "../../../lib/ui/elements/toast.mjs", "../../../lib/ui/elements/tooltip.mjs", "../../../lib/ui/elements/userLocale.mjs", "../../../lib/ui/elements/_elements.mjs", "../../../lib/ui/Gazetteer.mjs", "../../../lib/ui/layers/filters.mjs", "../../../lib/ui/layers/legends/basic.mjs", "../../../lib/ui/layers/legends/utils.mjs", "../../../lib/ui/layers/legends/categorized.mjs", "../../../lib/ui/layers/legends/distributed.mjs", "../../../lib/ui/layers/legends/graduated.mjs", "../../../lib/ui/layers/legends/_legends.mjs", "../../../lib/ui/layers/listview.mjs", "../../../lib/ui/layers/panels/dataviews.mjs", "../../../lib/ui/layers/panels/draw.mjs", "../../../lib/ui/layers/panels/filter.mjs", "../../../lib/ui/layers/panels/gazetteer.mjs", "../../../lib/ui/layers/panels/jsonEditor.mjs", "../../../lib/ui/layers/panels/meta.mjs", "../../../lib/ui/layers/panels/reports.mjs", "../../../lib/ui/layers/panels/style.mjs", "../../../lib/ui/layers/panels/_panels.mjs", "../../../lib/ui/layers/view.mjs", "../../../lib/ui/layers/viewHeader.mjs", "../../../lib/ui/layers/_layers.mjs", "../../../lib/ui/locations/entries/boolean.mjs", "../../../lib/ui/locations/entries/cloudinary.mjs", "../../../lib/ui/locations/entries/dataview.mjs", "../../../lib/ui/locations/entries/date.mjs", "../../../lib/ui/locations/entries/geometry.mjs", "../../../lib/ui/locations/entries/json.mjs", "../../../lib/ui/locations/entries/key.mjs", "../../../lib/ui/locations/entries/layer.mjs", "../../../lib/ui/locations/entries/link.mjs", "../../../lib/ui/locations/entries/numeric.mjs", "../../../lib/ui/locations/entries/pills.mjs", "../../../lib/ui/locations/entries/pin.mjs", "../../../lib/ui/locations/entries/ping.mjs", "../../../lib/ui/locations/entries/query_button.mjs", "../../../lib/ui/locations/entries/tab.mjs", "../../../lib/ui/locations/entries/text.mjs", "../../../lib/ui/locations/entries/textarea.mjs", "../../../lib/ui/locations/entries/time.mjs", "../../../lib/ui/locations/entries/title.mjs", "../../../lib/ui/locations/entries/_entries.mjs", "../../../lib/ui/locations/infoj.mjs", "../../../lib/ui/locations/listview.mjs", "../../../lib/ui/locations/view.mjs", "../../../lib/ui/locations/_locations.mjs", "../../../lib/ui/Tabview.mjs", "../../../lib/ui/utils/cssColourTheme.mjs", "../../../lib/ui/utils/dataview.mjs", "../../../lib/ui/utils/dataviewDialog.mjs", "../../../lib/ui/utils/histogram.mjs", "../../../lib/ui/utils/idleLogout.mjs", "../../../lib/ui/utils/imagePreview.mjs", "../../../lib/ui/utils/jsonDataview.mjs", "../../../lib/ui/utils/layerJSE.mjs", "../../../lib/ui/utils/locationCount.mjs", "../../../lib/ui/utils/resizeHandler.mjs", "../../../lib/ui/utils/_utils.mjs", "../../../lib/ui.mjs"],
  "sourcesContent": ["/**\n## ui/Dataview\n\nThe ui Dataview module exports the Dataview() decorator method to decorate a JSON object and return a `typedef:dataview` object.\n\nDifferent dataview types [eg. ChartJS, Tabulator-tables] require 3rd party libraries loaded via Mapp plugins.\n\nThe checkDataview() method is used to check whether required plugin libraries are loaded.\n\n@requires /utils/xhr\n@requires /utils/queryParams\n@requires /ui/elements/chkbox\n@requires /ui/utils/dataview\n\n@module /ui/Dataview\n*/\n\n/**\n@global\n@typedef {Object} dataview\n@property {string} key A unique for the dataview.\n@property {string} dataview The type of dataview\n@property {HTMLElement} target Target element in which the dataview is rendered.\n@property {Function} create Create method for library supporting the dataview type.\n@property {Function} show Method to show a dataview in the document.\n@property {Function} hide Method to hide a dataview in the document.\n@property {boolean} [dynamic] Dataview should be recreated when shown.\n@property {boolean} [display] Whether the dataview should be displayed.\n@property {Function} [update] Method to update the dataview data from a query.\n@property {boolean} [reload] Dataview should run update query when shown.\n@property {string} [query] Query template for the dataview update method.\n@property {string} [host] Host for the update query.\n@property {Object} [queryparams] Parameter for update query.\n@property {Object} data Data to be displayed in the dataview.\n@property {Function} [setData] Method to set the data in the dataview.\n@property {string} [label] Label for a checkbox input.\n@property {HTMLElement} [chkbox] Input element to toggle the dataview display.\n*/\n\n/**\n@function Dataview\n@async\n\n@description\nThe Dataview method is async for legacy reasons.\n\nThe method will check whether the dataview has already been decorated with a create method and short circuit if the dataview is not dynamic. Dataviews flagged as dynamic will be re-created.\n\nThe create() method will be executed on a decorated dataview.\n\nAn ID lookup will be attempted if the dataview target is provided as a string value.\n\nThe checkDataview() method is run to provide warnings for legacy configurations and check whether the dataview can be created.\n\nA chkbox element will be created and assigned to the dataview object if the label property is defined as a string. The dataview chkbox element can be used to toggle the display flag and call the dataview show() or hide() method.\n\nA default dataview update method will be assigned if not provided with the dataview configuration. The queryparams from the dataview layer and locale will be spread into the dataview queryparams object.\n\nThe show() and hide() methods will be assigned if not explicit in the dataview configuration. A dataview will have show and hide methods if declared as a [tabview]{@link module:/ui/Tabview~Tabview}.\n\nThe mapp.ui.utils.dataview.Toolbar() method will be called prior to creating the dataview.\n\nThe mapp.ui.utils.dataview.mapChange() method will be called after the dataview has been created.\n\n@param {Object} _this Dataview object.\n@property {HTMLElement} _this.target A document.getElementById() is used to assign a target HTMLElement if target is a string property.\n@property {boolean} _this.dynamic The dataview should be created again.\n@property {string} _this.label Label for the dataview chkbox.\n\n@return {dataview} Decorated dataview object.\n*/\nexport default async function Dataview(_this) {\n  // Only dynamic dataviews should be recreated.\n  if (!_this.dynamic && _this.create instanceof Function) {\n    return;\n  }\n\n  // A dataview create method has already been assigned by the checkDataview method.\n  if (_this.create instanceof Function) {\n    _this.create();\n    return;\n  }\n\n  // The dataview target is defined as string.\n  if (typeof _this.target === 'string') {\n    // assign target element by ID.\n    _this.target = document.getElementById(_this.target);\n  }\n\n  // Dataviews must be rendered into a target element.\n  if (!(_this.target instanceof HTMLElement)) {\n    console.warn('Dataviews require a HTMLHtmlElement target');\n    console.log(_this);\n    return;\n  }\n\n  // Return from method if unable to assign dataview type.\n  if (checkDataview(_this) instanceof Error) {\n    return _this.err;\n  }\n\n  if (typeof _this.label === 'string') {\n    // Create checkbox control for dataview.\n    _this.chkbox = mapp.ui.elements.chkbox({\n      checked: !!_this.display,\n      data_id: _this.key,\n      disabled: _this.disabled,\n      label: _this.label,\n      onchange: (checked) => {\n        _this.display = checked;\n        _this.display ? _this.show() : _this.hide();\n      },\n    });\n  }\n\n  // Assign default update method.\n  _this.update ??= updateDataview;\n\n  _this.show ??= show;\n\n  _this.hide ??= hide;\n\n  // Create dataview toolbar\n  mapp.ui.utils.dataview.Toolbar(_this);\n\n  mapp.ui.utils.dataview.mapChange(_this);\n\n  return _this;\n}\n\n/**\n@function show\n\n@description\nThe show() method will be bound to the dataview object `this` as `dataview.show()` method in the decorator.\n\nThe `dataview.display` flag will be set to true.\n\nA create() method will be assigned from the dataview{} utils if undefined. The create method will be executed.\n\nThe create method will also be executed if the `dataview.dynamic` flag is set.\n\nThe update() method will be executed if the `dataview.reload` flag is set.\n\nThe `dataview.target` element style display property will be set to 'block'.\n*/\nfunction show() {\n  this.display = true;\n\n  if (this.create === undefined) {\n    this.create = function () {\n      mapp.ui.utils[this.dataview].create(this);\n    };\n    this.create();\n\n    this.update instanceof Function && this.update();\n  } else if (this.dynamic) {\n    this.create();\n\n    this.update instanceof Function && this.update();\n  } else if (this.reload) {\n    this.update instanceof Function && this.update();\n  }\n\n  //Show toolbar buttons if there are any\n  this.btnRow?.style.setProperty('display', 'flex');\n\n  this.target.style.display = 'block';\n}\n\n/**\n@function hide\n\n@description\nThe hide() method will be bound to the dataview object `this` as `dataview.hide()` method in the decorator.\n\n`dataview.display` flag will be set to false.\n\nThe `dataview.target` element style display property will be set to 'none'.\n*/\nfunction hide() {\n  this.display = false;\n  this.target.style.display = 'none';\n\n  //Hide toolbar buttons if there are any\n  this.btnRow?.style.setProperty('display', 'none');\n}\n\n/**\n@function checkDataview\n\n@description\nThe checkDataview() is executed by the dataview decorator to check whether a dataview can be created with a required dataview utility method.\n\nThe `_this.dataview` property will be set to 'chartjs' or 'tabulator' if a `dataview.chart` or `dataview.table` object property are configured.\n\nThe dataview.table object will be created if a `dataview.columns` array is present.\n\nA Dataview object matching the dataview type must be available in mapp.ui.utils{} to support the creation of a new dataview object.\n\n@param {dataview} _this Dataview object.\n@property {string} [dataview] The type of dataview.\n@property {Object} [table] dataview = \"tabulator\"\n@property {Object} [chart] dataview = \"chartjs\"\n\n@return {Error} Return Error if the dataview cannot be created.\n*/\nfunction checkDataview(_this) {\n  // Assign key if not implicit.\n  _this.key ??= _this.query || _this.title || _this.label;\n\n  if (!_this.dataview) {\n    // Create a ChartJS dataview is chart is defined.\n    if (_this.chart) _this.dataview = 'chartjs';\n\n    // Columns in entry indicate missing table config.\n    if (typeof _this.columns !== 'undefined') {\n      console.warn(\n        'Table dataviews should be configured inside a tables object',\n      );\n\n      // Assign columns to table config.\n      _this.table = { columns: _this.columns };\n\n      _this.dataview = 'tabulator';\n    }\n\n    // Create a Tabulator dataview if columns are defined.\n    if (_this.table) {\n      _this.dataview = 'tabulator';\n    }\n  }\n\n  if (!Object.hasOwn(mapp.ui.utils, _this.dataview)) {\n    _this.err = new Error(`mapp.ui.utils.${_this.dataview} doesnt exist`);\n    console.error(_this.err);\n\n    _this.update = () =>\n      console.warn(`Unable to update ${_this.key} dataview.`);\n    return _this.err;\n  }\n\n  if (typeof mapp.ui.utils[_this.dataview].create !== 'function') {\n    _this.err = new Error(\n      `mapp.ui.utils.${_this.dataview}.create() method doesn't exist`,\n    );\n    console.error(_this.err);\n    return _this.err;\n  }\n}\n\n/**\n@function updateDataview\n\n@description\nThe updateDataview() method will be bound to the dataview object `this` as `dataview.update()` method in the decorator.\n\nThe dataview must have been created already. A `dataview.create()` method will be assigned from a plugin if nullish and immediately executed.\n\nThe dataview update method requires a query template to be executed with optional query parameter.\n\nA parameterized query will passed as argument to the mapp.utils.xhr() utility method.\n\nA custom `dataview.responseFunction()` will be executed instead of the `dataview.setData()` method if available.\n*/\nasync function updateDataview() {\n  if (this.create === undefined) {\n    this.create = function () {\n      mapp.ui.utils[this.dataview].create(this);\n    };\n    this.create();\n  }\n\n  // Dataviews cannot update without a query.\n  if (!this.query) return;\n\n  // Compile params object from dataview this.\n  const params = mapp.utils.queryParams(this);\n\n  // Stringify paramString from object.\n  const paramString = mapp.utils.paramString(params);\n\n  this.host ??= this.layer?.mapview?.host;\n\n  // Query data as response from query.\n  const response = await mapp.utils.xhr(\n    `${this.host || mapp.host}/api/query?${paramString}`,\n  );\n\n  if (response instanceof Error) return;\n\n  // The responseFunction must set the data to the dataview object.\n  if (typeof this.responseFunction === 'function') {\n    this.responseFunction(response);\n    return;\n  }\n\n  // The setData method is assigned in the create() method.\n  typeof this.setData === 'function' && this.setData(response);\n}\n", "/**\n### /ui/elements/alert\n\nDictionary entries:\n- information\n\n@requires /dictionary\n\nExports the alert dialog method as mapp.ui.elements.alert()\n\n@requires /ui/elements/dialog\n\n@module /ui/elements/alert\n*/\n\n/**\n@function alert\n\n@description\nThis is an alert element to display information to the user.\n\nIt is a framework alternative way to using window.alert() browser function.\n\n```js\nmapp.ui.elements.alert({\n  text: \"Drivetimes have been created.\"\n})\n```\n@param {Object} params Params for the alert dialog.\n@property {string} [params.data_id='alert'] The data-id attribute value for the dialog.\n@property {string} [params.title] Text to display in the alert header. Defaults to 'Information'.\n@property {string} [params.text] Text to display in the alert content. \n@returns {HTMLElement} alert The alert element.\n*/\nexport default function alert(params) {\n  params.title ??= `${mapp.dictionary.information}`;\n\n  params.data_id ??= 'alert';\n\n  params.class ??= 'alert-confirm';\n\n  params.header = mapp.utils.html`\n    <h4>${params.title}`;\n\n  params.content = mapp.utils.html`\n    <p>${params.text}</p>\n    <div class=\"buttons\">\n      <button \n        class=\"raised bold\"\n        style=\"grid-column: 1/3; margin: 0 5em;\"\n        onclick=${(e) => {\n          e.target.closest('dialog').close();\n        }}>${mapp.dictionary.ok}`;\n\n  return mapp.ui.elements.dialog(params);\n}\n", "export default (params) => mapp.utils.html.node`\n    <button \n        data-id=${params.data_id || 'btnPanel'}\n        class=${`btn-panel ${params.class || ''}`}\n        style=${params.style || ''}\n        onclick=${(e) => {\n          e.target.classList.toggle('active');\n          params.callback(e);\n        }}>\n        <div class=\"header\">\n            <h3>${params.label}</h3>\n            <div class=\"notranslate material-symbols-outlined\">${params.icon_name}</div>\n        </div>\n        ${\n          params.panel &&\n          mapp.utils.html`\n            <div class=\"panel\">${params.panel}`\n        }`;\n", "/**\n### /ui/elements/card\n\n@module /ui/elements/card\n*/\n\n/**\n@function card\n\n@description\nThe card element method creates a drawer class card which can be closed but not collapsed to the header.\n\nThe element is assigned as card property to the params.\n\n@param {Object} params Params for the card element.\n@property {Function} [params.close] Callback method to execute when a card element is closed.\n\n@returns {HTMLElement} card element.\n*/\nexport default function card(params) {\n  params.data_id ??= 'card';\n\n  const card = mapp.utils.html.node`\n  <div \n    data-id=${params.data_id}\n    class=\"drawer\">\n    <header class=\"header bold\">\n      <span>${params.header}</span>\n      <button\n        class=\"notranslate material-symbols-outlined color-font-mid\"\n        onclick=${(e) => {\n          e.target.closest('.drawer').remove();\n          if (typeof params.close === 'function') {\n            params.close(e);\n          }\n        }}>close</button>\n    </header>\n    ${params.content}`;\n\n  return card;\n}\n", "/**\n## /ui/elements/chkbox\n\nExports the default chkbox element method as mapp.ui.elements.chkbox()\n\n@module /ui/elements/chkbox\n*/\n\n/**\n@function chkbox\n\n@description\nThe chkbox element method will create a label HTMLElement with a nested checkbox type input element.\n\nThe onchange method provided as params property will be executed if the checkbox input element is toggled.\n\n@param {Object} params Parameter for the chkbox input element and label.\n@property {string} params.label The string for the chkbox label span.\n@property {string} [params.data_id] The string value assigned as data-id label element property.\n@property {string} [params.name] Optional custom string value assigned as name attribute to inner input.\n@property {function} [params.onchange] The method called by the input element onchange event.\n@property {boolean} [params.disabled] The input element is disabled.\n@property {boolean} [params.checked] The checkbox input element is checked.\n@returns {HTMLElement} Chkbox label with input element.\n*/\nexport default function chkbox(params) {\n  params.data_id ??= 'chkbox';\n  params.name ??= 'mapp-ui-chkbox-element';\n\n  const chkbox = mapp.utils.html.node`<label \n    data-id=${params.data_id}\n    class=\"checkbox\">\n    <input\n      name=${params.name}\n      type=\"checkbox\"\n      .disabled=${!!params.disabled}\n      .checked=${!!params.checked}\n      onchange=${(e) => {\n        params.onchange?.(e.target.checked, params.val);\n      }}/>\n    <span class=\"notranslate material-symbols-outlined\"/>\n    <span>${params.label}`;\n\n  return chkbox;\n}\n", "/**\n## /ui/elements/confirm\n\nDictionary entries:\n- confirm\n\n@requires /dictionary\n\nExports the confirm dialog method as mapp.ui.elements.confirm()\n\n@requires /ui/elements/dialog\n\n@module /ui/elements/confirm\n*/\n\n/**\n@function confirm\n\n@description\nThis is a confirm element to display information to the user and resolving to yes/no response.\n\nIt is a framework alternative way to using window.confirm() browser function.\n\n```js\nconst confirm = await mapp.ui.elements.confirm({\n   text: \"Please confim changes.\"\n})\nif(confirm) {\n// proceed\n} else {\n// prevent\n}\n```\n\n@param {Object} params Params for the configuration dialog.\n@property {string} [params.data_id='confirm'] The data-id attribute value for the dialog.\n@property {string} [params.title] Text to display in the confirm header. Defaults to 'Confirm'.\n@property {string} [params.text] Text to display in the confirm content.\n@returns {Promise<boolean>} Returns promise which resolves to true or false whether the question was confirmed.\n*/\nexport default function confirm(params) {\n  return new Promise((resolve, reject) => {\n    params.title ??= `${mapp.dictionary.confirm}`;\n\n    params.data_id ??= 'confirm';\n\n    params.header = mapp.utils.html`<h4>${params.title}`;\n\n    delete params.minimizeBtn;\n\n    delete params.closeBtn;\n\n    const btn_true = mapp.utils.html`<button \n      onclick=${(e) => {\n        e.target.closest('dialog').close();\n        resolve(true);\n      }}\n      class=\"raised bold\">\n      ${mapp.dictionary.ok}`;\n\n    const btn_false = mapp.utils.html`<button\n      onclick=${(e) => {\n        e.target.closest('dialog').close();\n        resolve(false);\n      }}\n      class=\"raised bold\">\n      ${mapp.dictionary.cancel}`;\n\n    params.content ??= mapp.utils.html`\n      <p>${params.text}</p>\n      <div class=\"buttons\">\n        ${btn_true}  \n        ${btn_false}`;\n\n    params.class ??= 'alert-confirm box-shadow';\n\n    mapp.ui.elements.dialog(params);\n  });\n}\n", "export default {\n  draw,\n  modify,\n};\n\n/**\n## /ui/elements/contextMenu\nDictionary entries:\n- save\n- cancel\n\n@requires /dictionary\n\n@module /ui/elements/contextMenu\nExports the modify and draw context menu methods as mapp.ui.elements.contextMenu()\n\n\n/** \n * @function modify\n * @description \n * This is a context menu for the modify interaction.\n * It pushes the save and cancel options to the context menu.\n * @params {Object} e The event object.\n * @returns {void}\n */\n\nfunction modify(e) {\n  e?.preventDefault?.();\n\n  const menu = [];\n\n  // Show save option in contextmenu\n  menu.push(mapp.utils.html`\n    <li\n      onclick=${() => this.interaction.finish(this.interaction.getFeature())}>\n      ${mapp.dictionary.save}`);\n\n  // Add cancel option to contextmenu.\n  menu.push(mapp.utils.html`\n    <li\n      onclick=${() => this.interaction.finish()}>\n      ${mapp.dictionary.cancel}`);\n\n  // Set context menu popup on last vertex.\n  this.popup({\n    content: mapp.utils.html.node`<ul>${menu}`,\n    coords: this.interaction.vertices[this.interaction.vertices.length - 1],\n  });\n}\n\n/**\n * @function draw\n * @description\n * This is a context menu for the draw interaction.\n * It pushes the save and cancel options to the context menu.\n * @params {Object} e The event object.\n * @returns {void}\n */\n\nfunction draw(e) {\n  if (this.interaction.vertices.length === 0) return;\n\n  const menu = [];\n\n  menu.push(mapp.utils.html`\n  <li\n    onclick=${() => this.interaction.finish(this.interaction.getFeature())}>\n      ${mapp.dictionary.save}`);\n\n  menu.push(mapp.utils.html`\n    <li\n      onclick=${() => this.interaction.finish()}>\n      ${mapp.dictionary.cancel}`);\n\n  // Set timeout to for the drawend popup to appear after async onchange event popup.\n  setTimeout(\n    () =>\n      this.popup({\n        autoPan: true,\n        content: mapp.utils.html.node`<ul>${menu}`,\n        coords: this.interaction.vertices[this.interaction.vertices.length - 1],\n      }),\n    100,\n  );\n}\n", "/**\n## /ui/elements/control\n\nModule to export a method to decorate a control element with tabs and a panel.\n\n@module /ui/elements/control\n*/\n\n/**\n@function control\n\n@param {Object} params\n@property {HTMLElement} params.target The target for the control element.\n@returns {Object} The ctrlTarget with the tab and panel appended.\n*/\nexport default function control(params) {\n  if (!params.target) return;\n\n  params.target.classList.add('mapp-control');\n\n  params.tabs = mapp.utils.html.node`<nav class=\"tabs hover\">`;\n  params.target.append(params.tabs);\n\n  params.panels = mapp.utils.html.node`<div class=\"panels\">`;\n  params.target.append(params.panels);\n\n  params.add = addControl;\n\n  return params;\n}\n\n/**\n @function addControl\n\n This function allows for adding more controls to the control element.\n This is done by calling add on the conttol element.\n\n ```javascript\n    contolElement.add({\n      key: 'layers',\n      panel: layersPanel\n    })\n ```\n\n @param {Object} params configuration options for the new control.\n @property {String} params.key Identifier used as the data-id of the element.\n @property {Integer} [params.minWidth] Optional minimum width of the element.\n @property {String} [params.icon] The name of a Material symbols icon.\n @property {String} [params.classList] Class definitions for the element.\n @property {Function} [params.onClick] A function to call when the tab is clicked.\n @property {String} [params.title] The title of the element i.e hover text.\n @property {HTMLElement} [params.panel] The panel associated to the tab.\n*/\nfunction addControl(params) {\n  params.parent = this;\n  params.minWidth ??= 0;\n  params.icon ??= params.key;\n  params.classList ??= 'notranslate material-symbols-outlined';\n  params.onClick ??= onClick;\n  params.title ??= mapp.dictionary[params.key] || params.key;\n  params.panel ??= mapp.utils.html.node`<div>`;\n\n  if (!this.tabs.children.length) {\n    params.classList += ' active';\n  }\n\n  params.tab = mapp.utils.html.node`<div\n    data-id=${params.key}\n    title=${params.title}\n    onclick=${(e) => params.onClick(e, params)}\n    class=${params.classList}>\n    ${params.icon}`;\n\n  this.tabs.append(params.tab);\n  this.panels.append(params.panel);\n}\n\n/**\n @function onClick\n The defualt onClick behaviour for the tabs.\n\n @param {Event} e The event from the click.\n @param {Object} params Configurtation options for the tab.\n @property {HTMLElement} params.parent The parent element of the tab.\n @property {HTMLElement} params.tab The tab itself.\n @property {HTMLElement} params.panel The panel associated ot the tab.\n @property {String|HTMLElement} [params.focus] The name attribute of the element to focus when the tab is clicked.\n*/\nfunction onClick(e, params) {\n  // Change active class for the tab.\n  for (const el of Array.from(params.parent.tabs.children)) {\n    el.classList.remove('active');\n  }\n\n  params.tab.classList.add('active');\n\n  // Change active class for the panel.\n  for (const el of Array.from(params.parent.panels.children)) {\n    el.classList.remove('active');\n  }\n\n  params.panel.classList.add('active');\n\n  // Adjust focus if the tab has a focus element.\n  if (params.focus) {\n    params.focus =\n      params.focus instanceof HTMLElement\n        ? params.focus\n        : document.querySelector(`[name=${params.focus}]`);\n\n    params.focus.focus();\n  }\n}\n", "/**\n### mapp.ui.elements.dialog()\n\nExports the dialog method as mapp.ui.elements.dialog()\n\n@module /ui/elements/dialog\n*/\n\n/**\n@function dialog\n\n@description\nThe dialog method decorates a dialog object with methods to close or shift the element within the confines of the containing [target] window element.\n\n```js\nconst dialog = mapp.ui.elements.dialog({\n  target: document.body,\n  css_style: 'width: 300px; height: 200px; background: #fff; border: 1px solid #000',\n  header: 'Dialog Header',\n  content: 'Dialog Content',\n  close: true,\n  headerDrag: true\n});\n```\n\nThe show method will be called on an existing dialog unless the creation is implicit with the new property flag.\n\n@param {Object} dialog The dialog configuration object.\n@property {HTMLElement} dialog.target The target element where the dialog will be appended.\n@property {string} [dialog.css_style] The CSS styles to apply to the dialog dialog.\n@property {string} [dialog.data_id='dialog'] The data-id attribute value for the dialog.\n@property {string} [dialog.header] The HTML content for the dialog header.\n@property {string} [dialog.content] The HTML content for the dialog body.\n@property {boolean} [dialog.modal] A flag to determine if its a Modal or Dialog.\n@property {boolean} [dialog.closeBtn] The flag property will become the closeBtn element.\n@property {boolean} [dialog.minimizeBtn] The flag property will become the minimizeBtn element.\n@property {Function} [dialog.close] A function called by default when the dialog is closed. The dialog element is closed and removed from DOM.\n@property {Function} [dialog.onClose] Optional function to run after dialog element is closed - uses onclose dialog event and overrides dialog.close().\n@property {boolean} [dialog.new] Optional parameter which specifies whether a new dialog should be created on re-opening the dialog.\n@property {number} [dialog.top] The top position of the dialog.\n@property {number} [dialog.left] The left position of the dialog.\n@property {number} [dialog.right] The right position of the dialog (used to calculate left position).\n@property {boolean} [dialog.contained] A flag indicating whether to keep the dialog within the target element's boundaries.\n@property {boolean} [dialog.containedCentre] A flag indicating whether to keep the dialog centered within the target element's boundaries.\n@property {boolean} [dialog.headerDrag] A flag indicating whether the dialog can be dragged only by the header.By default, the dialog can be dragged from anywhere.\n@returns {Object} Decorated dialog configuration object\n*/\n\nexport default function dialog(dialog) {\n  // Shortcircuit method and show existing dialog.\n  // The new flag can be used to always create a new dialog.\n  if (!dialog.new && typeof dialog.show === 'function') {\n    dialog.show();\n    return;\n  }\n\n  dialog.show = show;\n\n  if (!dialog.target) {\n    // The dialog must be modal if no target is provided.\n    dialog.modal = true;\n\n    // Ensure the target is an HTMLElement before proceeding\n  } else if (!(dialog.target instanceof HTMLElement)) return;\n  else dialog.show = show;\n\n  // Close existing modal.\n  document.querySelector('dialog.modal')?.close();\n\n  dialog.minimizeBtn &&= mapp.utils.html`<button\n    data-id=\"minimize\"\n    class=\"minimize-btn notranslate material-symbols-outlined\"\n    onclick=${(e) => {\n      e.target.closest('dialog').classList.toggle('minimized');\n    }}>`;\n\n  function closeDialog(e) {\n    if (dialog.onClose instanceof Function) {\n      dialog.onClose(e);\n    }\n    dialog.node.remove();\n  }\n\n  dialog.close = closeDialog;\n\n  dialog.closeBtn &&= mapp.utils.html`<button\n    data-id=close\n    class=\"notranslate material-symbols-outlined close\"\n    onclick=${closeDialog}>`;\n\n  dialog.header =\n    dialog.header instanceof HTMLElement\n      ? dialog.header\n      : mapp.utils.html`<h2>${dialog.header}`;\n\n  dialog.headerHtml = mapp.utils.html`<header\n    class=${dialog.headerDrag ? 'headerDrag' : ''}>\n    ${dialog.header}${dialog.minimizeBtn}${dialog.closeBtn}`;\n\n  dialog.data_id ??= 'dialog';\n\n  dialog.class ??= 'box-shadow';\n  dialog.class += dialog.modal ? ' modal' : ' dialog';\n\n  dialog.node = mapp.utils.html.node`<dialog \n    onclose=${closeDialog}\n    style=${dialog.css_style}\n    data-id=${dialog.data_id}\n    class=${dialog.class}>\n    ${dialog.headerHtml}\n    <div class=\"content\">${dialog.content}`;\n\n  if (dialog.modal) {\n    document.body.append(dialog.node);\n    dialog.node.showModal();\n  } else {\n    dialog.target.appendChild(dialog.node);\n    dialog.node.show();\n\n    if (dialog.right) {\n      // Calc left from right and offSetWidth\n      dialog.left =\n        dialog.target.offsetWidth -\n        dialog.node.offsetWidth -\n        parseInt(dialog.right);\n    }\n\n    dialog.node.style.top = `${dialog.top || 0}`;\n    dialog.node.style.left = `${dialog.left || 0}`;\n\n    dialog.node.addEventListener('mousedown', handleStartEvent);\n    dialog.node.addEventListener('touchstart', handleStartEvent);\n\n    // Create a ResizeObserver to observe changes in the map's dimensions\n    const resizeObserver = new ResizeObserver(adjustDialogPosition);\n    resizeObserver.observe(dialog.target);\n  }\n\n  // Function to handle the start of a drag event, setting up the necessary event listeners for moving and ending the drag\n  function handleStartEvent(e) {\n    // If headerDrag is true, the dialog can only be dragged by the header\n    if (dialog.headerDrag && !e.target.closest('header')) return;\n\n    // Don't trigger shift on right click\n    if (e.which === 3) return;\n\n    dialog.node.style.cursor = 'grabbing';\n\n    const eventsMap = {\n      mousedown: {\n        end: 'mouseup',\n        move: 'mousemove',\n      },\n      touchstart: {\n        end: 'touchend',\n        move: 'touchmove',\n      },\n    };\n\n    const { move: moveEvent, end: endEvent } = eventsMap[e.type];\n\n    dialog.target.addEventListener(moveEvent, shiftEvent);\n    window.addEventListener(endEvent, stopShift);\n  }\n\n  function adjustDialogPosition() {\n    const { offsetWidth: mapWidth, offsetHeight: mapHeight } = dialog.target;\n    const { offsetWidth: dialogWidth, offsetHeight: dialogHeight } =\n      dialog.node;\n\n    // Calculate the maximum allowed positions for the dialog\n    // Prevent negative left and top values\n    const maxLeft = mapWidth - dialogWidth < 0 ? 0 : mapWidth - dialogWidth;\n    const maxTop = mapHeight - dialogHeight < 0 ? 0 : mapHeight - dialogHeight;\n\n    // Adjust the dialog's position if it exceeds the map boundaries\n    dialog.node.style.left = `${Math.min(Math.max(dialog.node.offsetLeft, 0), maxLeft)}px`;\n    dialog.node.style.top = `${Math.min(Math.max(dialog.node.offsetTop, 0), maxTop)}px`;\n  }\n\n  // Function to end the drag event, resetting cursor style and removing the move and end event listeners\n  function stopShift() {\n    delete dialog.x;\n    delete dialog.y;\n\n    // If headerDrag is true - the cursor should be set to auto on mouseup\n    dialog.node.style.cursor = dialog.headerDrag ? 'auto' : 'grab';\n\n    dialog.target.removeEventListener('mousemove', shiftEvent);\n    dialog.target.removeEventListener('touchmove', shiftEvent);\n    dialog.target.removeEventListener('mouseup', stopShift);\n    dialog.target.removeEventListener('touchend', stopShift);\n  }\n\n  // Function to handle the move event during a drag, updating the position of the dialog while keeping it within the window bounds\n  function shiftEvent(e) {\n    // Set initial x\n    dialog.x ??= e.x;\n\n    const leftShift = e.x - dialog.x;\n\n    dialog.x = e.x;\n\n    // Set initial y\n    dialog.y ??= e.y;\n\n    const topShift = e.y - dialog.y;\n\n    dialog.y = e.y;\n\n    if (dialog.contained && !dialog.modal) {\n      shiftContained(dialog, leftShift, topShift);\n      return;\n    }\n\n    if (dialog.containedCentre && !dialog.modal) {\n      shiftContainedCentre(dialog, leftShift, topShift);\n      return;\n    }\n\n    // left shift\n    dialog.node.style.left = `${dialog.node.offsetLeft + leftShift}px`;\n\n    // top shift\n    dialog.node.style.top = `${dialog.node.offsetTop + topShift}px`;\n  }\n\n  // Maintain a reference to the dialog\n  dialog.dialog = dialog;\n\n  return dialog;\n}\n\n/**\n@function shiftContained\n\n@description\nThe shiftContained method prevents the dialog element to be shifted beyond the extent of the containing window element.\n\n@param {Object} dialog\nThe dialog configuration object.\n@param {integer} leftShift\nShift from left offset.\n@param {integer} topShift\nShift from top offset\n*/\n\nfunction shiftContained(dialog, leftShift, topShift) {\n  // Exceeds left offset\n  if (dialog.node.offsetLeft + leftShift < 0) {\n    dialog.node.style.left = 0;\n\n    // Shifts left\n  } else if (leftShift < 0) {\n    dialog.node.style.left = `${dialog.node.offsetLeft + leftShift}px`;\n\n    // Does NOT exceed right offset\n  } else if (\n    dialog.target.offsetWidth -\n      dialog.node.offsetWidth -\n      dialog.node.offsetLeft >\n    0\n  ) {\n    // Shifts right\n    dialog.node.style.left = `${dialog.node.offsetLeft + leftShift}px`;\n  }\n\n  // Exceeds top offset\n  if (dialog.node.offsetTop + topShift < 0) {\n    dialog.node.style.top = 0;\n\n    // Shift top\n  } else if (topShift < 0) {\n    dialog.node.style.top = `${dialog.node.offsetTop + topShift}px`;\n\n    // Does NOT exceed bottom offset\n  } else if (\n    dialog.target.offsetHeight -\n      dialog.node.offsetHeight -\n      dialog.node.offsetTop >\n    0\n  ) {\n    // Shift bottom\n    dialog.node.style.top = `${dialog.node.offsetTop + topShift}px`;\n  }\n}\n\n/**\n@function shiftContainedCentre\n\n@description\nThe shiftContainedCentre method prevents the dialog elements calculated centre to be shifted beyond the extent of the containing window element.\n\n@param {Object} dialog\nThe dialog configuration object.\n@param {integer} leftShift\nShift from left offset.\n@param {integer} topShift\nShift from top offset\n*/\n\nfunction shiftContainedCentre(dialog, leftShift, topShift) {\n  // Exceeds left offset\n  if (\n    dialog.node.offsetLeft + parseInt(dialog.node.offsetWidth / 2) + leftShift <\n    0\n  ) {\n    return;\n\n    // Shifts left\n  } else if (leftShift < 0) {\n    dialog.node.style.left = `${dialog.node.offsetLeft + leftShift}px`;\n\n    // Does NOT exceed right offset\n  } else if (\n    dialog.target.offsetWidth -\n      parseInt(dialog.node.offsetWidth / 2) -\n      dialog.node.offsetLeft >\n    0\n  ) {\n    // Shifts right\n    dialog.node.style.left = `${dialog.node.offsetLeft + leftShift}px`;\n  }\n\n  // Exceeds top offset\n  if (\n    dialog.node.offsetTop + parseInt(dialog.node.offsetHeight / 2) + topShift <\n    0\n  ) {\n    return;\n\n    // Shift top\n  } else if (topShift < 0) {\n    dialog.node.style.top = `${dialog.node.offsetTop + topShift}px`;\n\n    // Does NOT exceed bottom offset\n  } else if (\n    dialog.target.offsetHeight -\n      parseInt(dialog.node.offsetHeight / 2) -\n      dialog.node.offsetTop >\n    0\n  ) {\n    // Shift bottom\n    dialog.node.style.top = `${dialog.node.offsetTop + topShift}px`;\n  }\n}\n\n/**\n@function show\n\n@description\nAppends the dialog node to its target. \nCalled upon re-opening a dialog. \n*/\nfunction show() {\n  //check for a node\n  if (!this.node) return;\n\n  //append the node to the target if there is one\n  this.target instanceof HTMLElement && this.target.append(this.node);\n}\n", "/**\n### /ui/elements/drawer\n\nThe drawer element module exports the drawer method for the `mapp.ui.elements{}` library object.\n\n@module /ui/elements/drawer\n*/\n\n/**\n@function drawer\n\n@description\nThe drawer method will create and return drawer element with a header and content.\n\n@param {Object} params The configuration params for the drawer element.\n@property {string} params.data_id The data-id for drawer element.\n@property {HTML} params.header The header element[s].\n@property {HTML} params.content The content element[s] for the drawer.\n@property {boolean} [params.popout] Whether the drawer can be popped out into a dialog.\n@property {HTMLElement} [params.view] The layer view the drawer is in.\n@returns {HTMLElement} The drawer element.\n*/\n\nexport default function drawer(params) {\n  params.data_id ??= 'drawer';\n\n  params.class = `drawer expandable ${params.class || ''}`;\n\n  params.drawer = mapp.utils.html.node`\n  <div\n    data-id=${params.data_id}\n    class=${params.class}>\n    <div\n      class=\"header\"\n      onclick=${onClick}>\n      ${params.header}\n    </div>\n    <div class=\"content\">\n      ${params.content}\n    </div>`;\n\n  if (params.popout) {\n    params.popout = {};\n\n    //used for keeping track of where the content came from.\n    params.originalTarget = params.drawer.querySelector('.content');\n\n    params.popoutBtn = params.drawer\n      .querySelector('.header')\n      .querySelector('[data-id=popout-btn]');\n\n    //Append the button if it is not present in the header already.\n    if (!params.popoutBtn) {\n      params.popoutBtn = mapp.utils.html.node`<button\n      data-id=\"popout-btn\"\n      class=\"notranslate material-symbols-outlined\">\n      open_in_new`;\n\n      //Identify the caret element.\n      const beforeElement = params.drawer\n        .querySelector('.header')\n        .querySelector('.caret');\n\n      //Add the popoutBtn to the drawer header.\n      params.drawer\n        .querySelector('.header')\n        .insertBefore(params.popoutBtn, beforeElement);\n    }\n\n    params.popoutBtn.onclick = () => {\n      //Hide the original drawer the popout came from.\n      params.drawer.style.display = 'none';\n\n      params.view = params.drawer.parentElement;\n      popoutDialog(params);\n\n      //If view is provided, check whether there is anything else in the view.\n      if (params.view) {\n        params.viewChildren = Array.from(params.view.children || []).filter(\n          (el) => el.checkVisibility(),\n        );\n      }\n\n      //Hide the caret and close the drawer if theres nothing else in the layer-view\n      if (params.viewChildren && !params.viewChildren.length) {\n        params.view.previousElementSibling.dispatchEvent(new Event('click'));\n        params.view.parentElement.classList.add('empty');\n\n        params.view.previousElementSibling\n          .querySelector('.caret')\n          .style.setProperty('display', 'none');\n      }\n    };\n  }\n\n  return params.drawer;\n\n  /**\n  @function onClick\n\n  @description\n  The [drawer] onClick event method will shortcircuit if the parentElement has the `empty` class.\n\n  @param {Object} e The click event.\n  */\n  function onClick(e) {\n    if (e.target.parentElement.classList.contains('empty')) return;\n\n    e.target.parentElement.classList.toggle('expanded');\n  }\n}\n\n/**\n@function popoutDialog\n\n@description\nthe popoutDialog creates the popout element for a drawer and appends the popout button to the header of the drawer.\n\n@param {Object} params The configuration params for the popout element.\n@property {string} params.data_id The data-id for popout element.\n@property {HTML} params.header The header element[s].\n@property {HTML} params.content The content element[s] for the popout.\n@property {HTML} params.drawer The drawer element being popped out.\n@property {HTML} params.originalTarget The element that holds the content within the drawer being popped out.\n*/\nfunction popoutDialog(params) {\n  if (params.popout?.dialog) {\n    //Reappend the content and header\n    params.popout.node\n      .querySelector('.content')\n      .appendChild(\n        mapp.utils.html\n          .node`${Array.from(params.drawer.querySelector('.content').children)}`,\n      );\n\n    //The dialog closebtn is not part of params.header\n    //Add it to the header when the dialog is shown\n    params.popout.node\n      .querySelector('header')\n      .replaceChildren(\n        mapp.utils.html\n          .node`${Array.from(params.drawer.querySelector('.header').children)}${params.popout.minimizeBtn}${params.popout.closeBtn}`,\n      );\n    return params.popout.show();\n  }\n\n  Object.assign(params.popout, {\n    data_id: `${params.data_id}-popout`,\n    target: document.getElementById('Map'),\n    height: 'auto',\n    left: '5%',\n    top: '0.5em',\n    class: 'box-shadow popout',\n    css_style: 'width: 300px; height 300px',\n    containedCentre: true,\n    contained: true,\n    headerDrag: true,\n    closeBtn: true,\n    minimizeBtn: true,\n    onClose: () => {\n      //Hide the drawer being poppped out\n\n      //Show the caret and open the drawer\n      if (params.viewChildren && !params.viewChildren.length) {\n        params.view.parentElement.classList.remove('empty');\n        params.view.previousElementSibling.dispatchEvent(new Event('click'));\n\n        params.view.previousElementSibling\n          .querySelector('.caret')\n          .style.removeProperty('display');\n      }\n      params.drawer.style.removeProperty('display');\n\n      //Reappend the header and the content, without the minimizeBtn and closeBtn\n      params.drawer\n        .querySelector('.header')\n        .replaceChildren(\n          mapp.utils.html\n            .node`${Array.from(params.popout.node.querySelector('header').children).filter((el) => !['close', 'minimize'].includes(el.dataset.id))}`,\n        );\n\n      params.originalTarget.appendChild(\n        mapp.utils.html\n          .node`${Array.from(params.popout.node.querySelector('.content').children)}`,\n      );\n    },\n  });\n\n  mapp.ui.elements.dialog(params.popout);\n\n  //Replace the children of the header and content elements\n  params.popout.node\n    .querySelector('header')\n    .replaceChildren(\n      mapp.utils.html\n        .node`${Array.from(params.drawer.querySelector('.header').children)}${params.popout.minimizeBtn}${params.popout.closeBtn}`,\n    );\n\n  params.popout.node\n    .querySelector('.content')\n    .appendChild(\n      mapp.utils.html\n        .node`${Array.from(params.drawer.querySelector('.content').children)}`,\n    );\n\n  params.popout.view = params.popout.node.querySelector('.content');\n}\n", "/**\n### /ui/elements/drawing\n\nExports function which create various drawing elements\n\nDictionary entries:\n- draw_dialog_title\n- draw_dialog_begin_drawing\n- draw_dialog_cancel_drawing\n- draw_dialog_remove_vertex\n- draw_dialog_save\n- draw_dialog_save_single\n- draw_point\n- draw_position\n- draw_polygon\n- draw_rectangle\n- circle_config\n- draw_circle\n- draw_circle_2pt\n- radius\n- units\n- draw_line\n- create\n\n@requires /dictionary\n\n@module /ui/elements/drawing\n*/\n\nexport default {\n  circle,\n  circle_2pt,\n  drawOnclick,\n  line,\n  locator,\n  point,\n  polygon,\n  rectangle,\n};\n\n/**\n@function drawOnclick\n\n@description\nThe drawOnClick method is triggered by clicking on a drawing element button.\n\nThe 'active' class is toggled on the button element. The drawing interaction is finished if the 'active' class is toggled off.\n\nA callback method is assigned to the interaction before the interaction object is passed as argument to call the mapview's draw interaction.\n\n@param {Object} e The click event.\n@param {layer} layer Decorated Mapp Layer.\n@param {Object} interaction Mapview drawing interaction.\n\n@property {Object} e.target The click event target [button].\n*/\n\nasync function drawOnclick(e, layer, interaction) {\n  if (layer.location) {\n    const confirmUpdate = await layer.location.confirmUpdate(updateCallback);\n\n    if (confirmUpdate === null) {\n      return;\n    }\n\n    if (confirmUpdate === true) {\n      drawOnclick(e, layer, interaction);\n      return;\n    }\n\n    function updateCallback() {\n      layer.location.renderLocationView();\n    }\n  }\n\n  const btn = interaction.btn || e.target;\n\n  interaction.callback ??= (feature) => {\n    mapp.location.create(feature, interaction, layer);\n\n    btn.classList.remove('active');\n\n    delete layer.mapview.interaction;\n\n    // Removes current helpDialog.\n    mapp.ui.elements.helpDialog();\n\n    // Set highlight interaction if no other interaction is current after 400ms.\n    setTimeout(() => {\n      !layer.mapview.interaction && layer.mapview.interactions.highlight();\n    }, 400);\n  };\n\n  if (!btn.classList.toggle('active')) {\n    layer.mapview.interactions.highlight();\n    return;\n  }\n\n  !layer.display && layer.show();\n\n  layer.mapview.interactions.draw(interaction);\n\n  if (layer.draw.hideHelp || interaction.hideHelp) {\n    // Do not show help dialog element.\n    return;\n  }\n\n  interaction.helpDialog.header = mapp.utils\n    .html`<h3 style=\"line-height: 2em; margin-right: 1em\">${mapp.dictionary.draw_dialog_title}</h3>`;\n\n  interaction.helpDialog.data_id = 'dialog_drawing';\n\n  mapp.ui.elements.helpDialog(interaction.helpDialog);\n}\n\n/**\n@function point\n@description Creates a button for drawing a point on the map.\n@param {layer} layer Decorated MAPP Layer.\n@return {HTMLElement} The button element.\n*/\nfunction point(layer) {\n  const helpDialog = {\n    content: mapp.utils.html.node`<li>\n    <ul>${mapp.dictionary.draw_dialog_begin_drawing}</ul>\n    <ul>${mapp.dictionary.draw_dialog_save_single}</ul>`,\n  };\n\n  // Set the default values\n  layer.draw.point = {\n    helpDialog,\n    label: mapp.dictionary.draw_point,\n    layer,\n    type: 'Point',\n    ...layer.draw.point,\n  };\n\n  // Create the button\n  layer.draw.point.btn = mapp.utils.html.node`\n    <button\n      class=\"action wide\"\n      onclick=${(e) => drawOnclick(e, layer, layer.draw.point)}>\n      <span class=\"notranslate material-symbols-outlined\">add_location_alt</span>\n      ${layer.draw.point.label}`;\n\n  return layer.draw.point.btn;\n}\n\n/**\n@function line\n@description Creates a button for drawing a line on the map.\n@param {layer} layer Decorated MAPP Layer.\n@return {HTMLElement} The button element.\n*/\nfunction line(layer) {\n  const helpDialog = {\n    content: mapp.utils.html.node`<li>\n    <ul>${mapp.dictionary.draw_dialog_begin_drawing}</ul>\n    <ul>${mapp.dictionary.draw_dialog_remove_vertex}</ul>\n    <ul>${mapp.dictionary.draw_dialog_save_single}</ul>`,\n  };\n\n  // Set the default values\n  layer.draw.line = {\n    helpDialog,\n    label: mapp.dictionary.draw_line,\n    layer,\n    type: 'LineString',\n    ...layer.draw.line,\n  };\n\n  // Create the button\n  layer.draw.line.btn = mapp.utils.html.node`\n    <button\n      class=\"action wide\"\n      onclick=${(e) => drawOnclick(e, layer, layer.draw.line)}>\n      <span class=\"notranslate material-symbols-outlined\">polyline</span>\n      ${layer.draw.line.label}`;\n\n  return layer.draw.line.btn;\n}\n\n/**\n@function polygon\n@description Creates a button for drawing a polygon on the map.\n@param {layer} layer Decorated MAPP Layer.\n@return {HTMLElement} The button element.\n*/\nfunction polygon(layer) {\n  const helpDialog = {\n    content: mapp.utils.html.node`<li>\n    <ul>${mapp.dictionary.draw_dialog_begin_drawing}</ul>\n    <ul>${mapp.dictionary.draw_dialog_cancel_drawing}\n    <ul>${mapp.dictionary.draw_dialog_remove_vertex}</ul>\n    <ul>${mapp.dictionary.draw_dialog_save}</ul>`,\n  };\n\n  // Set the default values\n  layer.draw.polygon = {\n    helpDialog,\n    label: mapp.dictionary.draw_polygon,\n    layer,\n    type: 'Polygon',\n    ...layer.draw.polygon,\n  };\n\n  // Create the button\n  layer.draw.polygon.btn = mapp.utils.html.node`\n    <button\n      class=\"action wide\"\n      onclick=${(e) => drawOnclick(e, layer, layer.draw.polygon)}>\n      <span class=\"notranslate material-symbols-outlined\">activity_zone</span>\n      ${layer.draw.polygon.label}`;\n\n  return layer.draw.polygon.btn;\n}\n\n/**\n@function rectangle\n@description Creates a button for rectangle a line on the map.\n@param {layer} layer Decorated MAPP Layer.\n@return {HTMLElement} The button element.\n*/\nfunction rectangle(layer) {\n  const helpDialog = {\n    content: mapp.utils.html.node`<li>\n    <ul>${mapp.dictionary.draw_dialog_begin_drawing}</ul>\n    <ul>${mapp.dictionary.draw_dialog_save_single}</ul>`,\n  };\n\n  // Set the default values\n  layer.draw.rectangle = {\n    geometryFunction: ol.interaction.Draw.createBox(),\n    helpDialog,\n    label: mapp.dictionary.draw_rectangle,\n    layer,\n    type: 'Circle',\n    ...layer.draw.rectangle,\n  };\n\n  // Create the button\n  layer.draw.rectangle.btn = mapp.utils.html.node`\n  <button\n    class=\"action wide\"\n    onclick=${(e) => drawOnclick(e, layer, layer.draw.rectangle)}>\n    <span class=\"notranslate material-symbols-outlined\">rectangle</span>\n    ${layer.draw.rectangle.label}`;\n\n  return layer.draw.rectangle.btn;\n}\n\n/**\n@function circle_2pt\n@description Creates a button for circle_2pt a line on the map.\n@param {layer} layer Decorated MAPP Layer.\n@return {HTMLElement} The button element.\n*/\nfunction circle_2pt(layer) {\n  const helpDialog = {\n    content: mapp.utils.html.node`<li>\n    <ul>${mapp.dictionary.draw_dialog_begin_drawing}</ul>\n    <ul>${mapp.dictionary.draw_dialog_save_single}</ul>`,\n  };\n\n  // Set the default values\n  layer.draw.circle_2pt = {\n    geometryFunction: ol.interaction.Draw.createRegularPolygon(33),\n    helpDialog,\n    label: mapp.dictionary.draw_circle_2pt,\n    layer,\n    type: 'Circle',\n    ...layer.draw.circle_2pt,\n  };\n\n  // Create the button\n  layer.draw.circle_2pt.btn = mapp.utils.html.node`\n  <button\n    class=\"action wide\"\n    onclick=${(e) => drawOnclick(e, layer, layer.draw.circle_2pt)}>\n    <span class=\"notranslate material-symbols-outlined\">outbound</span>\n    ${layer.draw.circle_2pt.label}`;\n\n  return layer.draw.circle_2pt.btn;\n}\n\n/**\n@function circle\n@description\nCreate a drawer with config interface elements for circle construction.\n@param {layer} layer Decorated MAPP Layer.\n@return {HTMLElement} A drawer element with controls for circle configuration.\n*/\nfunction circle(layer) {\n  const helpDialog = {\n    content: mapp.utils.html.node`<li>\n    <ul>${mapp.dictionary.draw_dialog_begin_drawing}</ul>\n    <ul>${mapp.dictionary.draw_dialog_save_single}</ul>`,\n  };\n\n  // Set the default values\n  const circle = {\n    helpDialog,\n    label: mapp.dictionary.draw_circle,\n    layer,\n    type: 'Point',\n    units: 'meter',\n    unitsConfig: {\n      meter: {\n        max: 1000,\n        min: 1,\n        title: 'Meter',\n      },\n      km: {\n        max: 10,\n        min: 1,\n        title: 'KM',\n      },\n      miles: {\n        max: 10,\n        min: 1,\n        title: 'Miles',\n      },\n      meter2: {\n        max: 1000,\n        min: 1,\n        title: 'Meter\u00B2',\n      },\n      km2: {\n        max: 10,\n        min: 1,\n        title: 'KM\u00B2',\n      },\n    },\n    unitConversion: {\n      km: (v) => v * 1000,\n      km2: (v) => Math.sqrt((v * 1000000) / Math.PI),\n      meter: (v) => v,\n      meter2: (v) => Math.sqrt(v / Math.PI),\n      miles: (v) => v * 1609.34,\n    },\n    ...layer.draw.circle,\n  };\n\n  layer.draw.circle = circle;\n\n  circle.unitsOptions ??= Object.keys(circle.unitsConfig);\n\n  circle.unitsOptions = circle.unitsOptions.filter((option) => {\n    if (Object.hasOwn(circle.unitsConfig, option)) {\n      circle.unitsConfig[option].option = option;\n      circle.unitsConfig[option].title ??= option;\n\n      return true;\n    } else {\n      console.warn(`Unknown circle drawing unit ${option}`);\n      return false;\n    }\n  });\n\n  //Check for whether any valid config options were supplied\n  //If not fallback to the full list\n  circle.unitsOptions.length &&\n    Object.keys(circle.unitsConfig).forEach((config) => {\n      if (!circle.unitsOptions.includes(config)) {\n        delete circle.unitsConfig[config];\n      }\n    });\n\n  if (!Object.hasOwn(circle.unitsConfig, circle.units)) {\n    circle.units = Object.keys(circle.unitsConfig)[0];\n  }\n\n  circle.geometryFunction ??= (coordinates) => {\n    const polygonCircular = new ol.geom.Polygon.circular(\n      ol.proj.toLonLat(coordinates),\n      layer.draw.circle.unitConversion[layer.draw.circle.units](\n        layer.draw.circle.radius,\n      ),\n      64,\n    );\n\n    return polygonCircular.transform('EPSG:4326', 'EPSG:3857');\n  };\n\n  circle.unitsDropDown = mapp.utils.html.node`<div\n    style=\"display: grid; grid-template-columns: 100px 1fr; align-items: center;\">\n      <div style=\"grid-column: 1;\">${mapp.dictionary.units}</div>\n      <div style=\"grid-column: 2;\">\n        ${mapp.ui.elements.dropdown({\n          callback: (e, entry) => setUnits(circle, entry.option),\n          entries: Object.values(circle.unitsConfig),\n          placeholder: circle.unitsConfig[circle.units].title,\n        })}`;\n\n  circle.rangeSlider = mapp.utils.html.node`<div>`;\n\n  setUnits(circle, circle.units);\n\n  circle.btn = mapp.utils.html.node`<button\n    class=\"action wide\"\n    onclick=${(e) => drawOnclick(e, layer, circle)}>\n      <span class=\"notranslate material-symbols-outlined\">add_circle</span>\n      ${circle.label}`;\n\n  const content = mapp.utils.html.node`\n    <div class=\"panel flex-col\">\n      ${circle.unitsDropDown}\n      ${circle.rangeSlider}\n      ${circle.btn}`;\n\n  // The config elements are not shown.\n  if (circle.hidePanel) return circle.btn;\n\n  if (circle.drawer === false) {\n    return mapp.utils.html`<h3>${mapp.dictionary.circle_config}</h3>${content}`;\n  }\n\n  circle.drawer = mapp.ui.elements.drawer({\n    header: mapp.utils.html`\n    <h3>${mapp.dictionary.circle_config}</h3>\n    <div class=\"notranslate material-symbols-outlined caret\"/>`,\n    content,\n    popout: circle.popout,\n  });\n\n  return circle.drawer;\n}\n\n/**\n@function setUnits\n@description\nThe setUnits method updates the circle draw config from an units option.\n*/\nfunction setUnits(circle, option) {\n  const entry = circle.unitsConfig[option];\n\n  circle.units = entry.option;\n\n  circle.radius ??= entry.min;\n\n  // Update the value of the slider to ensure it is within the new min and max values.\n  circle.radius = circle.radius > entry.max ? entry.max : circle.radius;\n\n  // Render the slider after changes\n  mapp.utils.render(\n    circle.rangeSlider,\n    mapp.ui.elements.slider({\n      callback: (e) => {\n        circle.radius = parseFloat(e);\n      },\n      max: entry.max,\n      min: entry.min,\n      val: circle.radius,\n    }),\n  );\n}\n\n/**\n@function locator\n@description Creates a button for drawing a point at your current location.\n@param {layer} layer Decorated MAPP Layer.\n@return {HTMLElement} The button element.\n*/\nfunction locator(layer) {\n  layer.draw.locator = {\n    label: mapp.dictionary.draw_position,\n    layer,\n    type: 'Point',\n    ...layer.draw.locator,\n  };\n\n  layer.draw.locator.btn = mapp.utils.html.node`\n    <button\n      class=\"action wide\"\n      onclick=${(e) => {\n        mapp.utils.getCurrentPosition(async (pos) => {\n          const location = {\n            layer: layer,\n            new: true,\n            table: layer.tableCurrent(),\n          };\n\n          const coords = ol.proj.transform(\n            [parseFloat(pos.coords.longitude), parseFloat(pos.coords.latitude)],\n            'EPSG:4326',\n            `EPSG:${layer.srid}`,\n          );\n\n          location.id = await mapp.utils.xhr({\n            body: JSON.stringify({\n              [layer.geom]: {\n                coordinates: coords,\n                type: 'Point',\n              },\n            }),\n            method: 'POST',\n            url:\n              `${layer.mapview.host}/api/query?` +\n              mapp.utils.paramString({\n                layer: layer.key,\n                locale: layer.mapview.locale.key,\n                table: location.table,\n                template: 'location_new',\n              }),\n          });\n\n          mapp.location.get(location);\n        });\n      }}>\n      <span class=\"notranslate material-symbols-outlined\">my_location</span>\n      ${layer.draw.locator.label}`;\n\n  return layer.draw.locator.btn;\n}\n", "/**\n## /ui/elements/dropdown\n\nThe dropdown elements module exports the dropdown method to create a dropdown element group from a params argument.\n\n@requires /ui/elements/pills\n\n@module /ui/elements/dropdown\n*/\n\n/**\n@function dropdown\n\n@description\nThe dropdown method returns a dropdown element created from the params argument.\n\n@param {Object} params Parameter for the creation of the dropdown element.\n@property {string} [params.placeholder=''] The placeholder for the list of options.\n@property {boolean} [params.multi] Allow multiple choice if true.\n@property {boolean} [params.multple] Allow multiple choice if true using classic select with native multiple flag. This changes dropdown select into a scrollable list.\n@property {boolean} [params.dropdown_search] Specify wether a searchbox is supplied in a dropdown filter.\n@property {boolean} [params.keepPlaceholder] set this flag to `true` in order to keep the original placeholder after an option is selected.\n@property {Object} [params.entries] Array of option elements. Expected format: [{title: 'Title for Option 1', option: 'option1'}, ...]. Add property `selected: true` for entry selected by default. `title` will appear as the description, `option` is a value passed as selected.\n@property {function} [params.headerOnClick] Callback to execute when a header is clicked. Overrides default function.\n@property {Number} [params.maxHeight] Optional max height property on results unordered list <ul> in pixels. Defaults to 500px in dropdown stylesheet.\n\n@returns {HTMLElement} HTML dropdown element\n*/\nexport default function dropdown(params) {\n  params.selectedTitles = new Set();\n  params.selectedOptions = new Set();\n\n  params.placeholder ??= params.span || '';\n\n  params.entries = params.entries?.filter?.((entry) => entry.option !== '');\n\n  pillsElement(params);\n\n  //Assign the search element if specified\n  searchInput(params);\n\n  params.onChange ??= selectOnChange;\n\n  params.options = optionElements(params);\n\n  // Create a string of title in set.\n  const selectedTitles = params.selectedTitles.size\n    ? Array.from(params.selectedTitles).join(', ')\n    : params.placeholder;\n\n  const placeholderText = params.keepPlaceholder\n    ? params.placeholder\n    : selectedTitles;\n\n  params.placeHolderOption = mapp.utils.html.node`\n    <option style=\"display: none;\" value=\"\" disabled selected>${placeholderText}`;\n\n  params.options.unshift(params.placeHolderOption);\n\n  params.data_id ??= 'dropdown';\n\n  params.select = mapp.utils.html.node`<select\n    class=\"select-dropdown\"\n    data-id=${params.data_id}\n    onfocus=${selectReset}\n    onblur=${selectReset}\n    onchange=${(e) => selectOnChange(e, params)}>\n    ${params.options}`;\n\n  if (params.multiple) params.select.multiple = true;\n\n  params.node = mapp.utils.html.node`\n    ${params.pills?.container}\n    ${params.search || params.select}`;\n\n  return params.node;\n}\n\nfunction selectReset(e) {\n  e.target.selectedIndex = 0;\n}\n\nfunction selectOnChange(e, params) {\n  const selectedIndex = e.target.selectedIndex;\n\n  // reset selectedIndex on target to the placeholder option.\n  e.target.selectedIndex = 0;\n\n  const entry = params.entries[selectedIndex - 1];\n\n  entry.selected = !entry.selected;\n\n  if (params.multi) {\n    const toggle = params.options[selectedIndex].classList.toggle('selected');\n\n    if (toggle) {\n      params.selectedTitles.add(entry.title);\n      params.selectedOptions.add(entry.option);\n      params.pills?.add(entry.title);\n    } else {\n      params.selectedTitles.delete(entry.title);\n      params.selectedOptions.delete(entry.option);\n      params.pills?.remove(entry.title);\n    }\n\n    if (!params.pills && !params.keepPlaceholder) {\n      // join selectedTitles set\n      const placeholderTitles =\n        params.selectedTitles?.size &&\n        Array.from(params.selectedTitles).join(', ');\n\n      params.placeHolderOption.textContent =\n        placeholderTitles || params.placeholder;\n    }\n\n    params.callback?.(e, [...params.selectedOptions], entry);\n\n    // return if params.multi\n    return;\n  }\n\n  // Single select options can not be unselected.\n  params.options.forEach((option) => {\n    option.classList.remove('selected');\n    option.style.backgroundColor = 'var(--color-base-secondary)';\n  });\n\n  params.options[selectedIndex].classList.add('selected');\n  params.options[selectedIndex].style.removeProperty('background-color');\n\n  if (!params.keepPlaceholder) {\n    params.placeHolderOption.textContent = entry.title;\n  }\n\n  params.callback?.(e, entry);\n}\n\nfunction optionElements(params) {\n  const options = params.entries.map((entry) => {\n    entry.li = mapp.utils.html.node`<option\n        value=${entry.option}>\n        ${entry.title || entry.label || entry.field}`;\n\n    // The entry is already selected during creation of dropdown.\n    if (entry.selected) {\n      entry.li.classList.add('selected');\n      params.selectedTitles.add(entry.title);\n      params.selectedOptions.add(entry.option);\n\n      // create pill\n      params.pills?.add(entry.title);\n    }\n\n    return entry.li;\n  });\n\n  return options;\n}\n\n/**\n@function pillsElement\n\n@description\nAssign the params.pills property to the be a pills element.\n\n@param {Object} params The dropdown element object.\n@property {boolean} [params.pills] The pills element will be assigned to the flag property.\n@property {set} params.selectedTitles A set of titles from currently selected dropdown items.\n@property {set} params.selectedOptions A set of options from currently selected dropdown items.\n*/\nfunction pillsElement(params) {\n  if (!params.pills) return;\n\n  params.pills = mapp.ui.elements.pills({\n    addCallback: (val, pills) => {\n      params.callback?.(null, [...pills]);\n    },\n    pills: [...params.selectedTitles],\n    removeCallback: (val, pills) => {\n      const entry = params.entries.findIndex((entry) => entry.option === val);\n\n      // Add one to the index to account for the placeholder option.\n      const index =\n        params.entries.findIndex((entry) => entry.option === val) + 1;\n\n      // Remove the selected class from the option element and entry\n      params.entries.find((entry) => entry.option === val).selected = false;\n      params.options[index].classList.remove('selected');\n\n      params.selectedTitles.delete(entry.title);\n      params.selectedOptions.delete(entry.option);\n\n      params.callback?.(null, [...pills]);\n    },\n  });\n}\n\n/**\n@function search\n\n@description\nAssign the params.search property to the be a search element.\n\n@param {Object} params The dropdown element object.\n@property {set} params.selectedTitles A set of titles from currently selected dropdown items.\n@property {set} params.selectedOptions A set of options from currently selected dropdown items.\n@property {Array} params.entries The options avialble to the dropdown.\n@property {String} params.placeholder THe options avialble to the dropdown.\n@property {boolean} [params.search] The search element will be assigned to the flag property.\n@property {boolean} [params.pills] Pill element for adding the options to when selected.\n\n@returns {HTMElement} The search element and its datalist.\n*/\nfunction searchInput(params) {\n  if (!params.search) return;\n\n  const listId = `${params.field}-search-options`;\n\n  const placeholder = params.placeholder || 'Enter search term...';\n\n  const searchInput = mapp.utils.html.node`<input\n    placeholder=${placeholder}\n    type=\"search\" list=${listId}\n    onInput=${(e) => onSearchInput(e, params)}\n    onfocus=\"this.placeholder=''\"\n    onblur=${(e) => (e.target.placeholder = placeholder)}>`;\n\n  params.searchOptions = [];\n  for (const entry of params.entries) {\n    const option = mapp.utils.html.node`\n      <option value=${entry.option} data-title=${entry.title}>${entry.title}`;\n    params.searchOptions.push(option);\n  }\n  const datalist = mapp.utils.html\n    .node`<datalist id=${listId}>${params.searchOptions}`;\n\n  params.search = mapp.utils.html.node`${searchInput}${datalist}`;\n\n  return params.search;\n}\n\nfunction onSearchInput(e, params) {\n  params.entries.forEach((entry) => {\n    if (entry.title === e.target.value) {\n      entry.selected = !entry.selected;\n\n      if (entry.selected) {\n        params.selectedTitles.add(entry.title);\n        params.selectedOptions.add(entry.option);\n        params.pills?.add(entry.title);\n      } else {\n        params.selectedTitles.delete(entry.title);\n        params.selectedOptions.delete(entry.option);\n        params.pills?.remove(entry.title);\n      }\n\n      e.target.value = '';\n      e.target.dispatchEvent(new Event('blur'));\n\n      params.callback?.(e, [...params.selectedOptions]);\n    }\n  });\n}\n", "/**\n### /ui/elements/helpDialog\n \nThe helpDialog module creates the help dialogs displayed during certain map interactions.\n\n@module /ui/elements/helpDialog\n*/\n\n//Null instantiation of the help_dialog.\nlet help_dialog;\n\n/**\n@function helpDialog\nA dialog that describes how certain map controls work.\n\nAny existing helpDialog will be removed first.\n\nThe method will shortcircuit with the params argument being undefined.\n\nThe method will also shortciurcuit if the mapp.user object has the hideHelp flag.\n\n@param {Object} params Config paramaters for the dialog.\n@property {String|HTMLElement} params.header The header displayed on the dialog.\n@property {String|HTMLElement} params.content The content of the dialog.\n*/\nexport default function helpDialog(params) {\n  // Only one helpDialog.node can be shown at any one time.\n  help_dialog?.node.remove();\n\n  if (!params) return;\n\n  if (mapp.user?.hideHelp) return;\n\n  help_dialog = {\n    closeBtn: true,\n    contained: true,\n    css_style: 'padding: 0.5em;',\n    headerDrag: true,\n    height: 'auto',\n    left: '6em',\n    minimizeBtn: true,\n    target: document.getElementById('Map'),\n    top: '3em',\n    ...params,\n  };\n\n  // Create the helpDialog.node\n  mapp.ui.elements.dialog(help_dialog);\n}\n", "/**\n### /ui/elements/jsoneditor\n\nThe module dynamically imports the [vanilla-jsoneditor]{@link https://www.npmjs.com/package/vanilla-jsoneditor} from esm.sh and exports a utility method to create a jsoneditor control.\n\n@requires /utils/esmImport\n\n@module /ui/elements/jsoneditor\n*/\n\n/**\n@function createJSONEditor\n@async\n\n@description\nThe method dynamically imports the jsoneditor module from esm.sh and asssigns the module to the esm variable.\n\n@param {Object} params Parameter for the creation of a jsoneditor element.\n@property {Object} params.props Custom property for the createJSONEditor method.\n@property {Object} params.data JSON data for the jsoneditor content.\n\n@returns {object} Exports a jsoneditor instance.\n*/\nexport default async function createJSONEditor(params) {\n  const mod = await mapp.utils.esmImport('vanilla-jsoneditor@3.3.1');\n\n  params.content ??= { json: {} };\n\n  if (typeof params.data === 'object') {\n    params.content.json = params.data;\n  }\n\n  const editor = mod.createJSONEditor({\n    props: {\n      content: params.content,\n      ...params.props,\n    },\n    target: params.target,\n  });\n\n  return editor;\n}\n", "/**\n### /ui/elements/layerStyle\n\nThe module exports an object of methods to for the creation of layer style elements.\n\nDictionary entries:\n- layer_style_display_hover\n- layer_style_display_labels\n- layer_style_opacity\n- layer_style_select_theme\n- icon_scaling_field\n- icon_scaling_label\n- icon_scaling_cluster\n- icon_scaling_zoom_in\n- icon_scaling_zoom_out\n\n\n@requires /dictionary \n\n@requires /ui/layers\n\n@module /ui/elements/layerStyle\n*/\n\nconst methods = {\n  hover,\n  hovers,\n  icon_scaling,\n  label,\n  labels,\n  opacitySlider,\n  panel,\n  theme,\n  themes,\n};\n\nexport default methods;\n\n/**\n@function panel\n\n@description\nThe panel() style element method creates an array of style.elements from all available style property keys if not implicit.\n\nThe elements array will be mapped to return a flat array of HTMLElements as content for the layer.style.view node.\n\nThe layer.style.view is returned for the style drawer shown in the default mapp view layer.view.\n\n@param {layer} layer A decorated mapp layer with a style object.\n\n@property {layer-style} layer.style The layer style configuration.\n@property {Array} [style.elements] Array of method keys to order elements in the layer.style.view.\n\n@returns {HTMLElement} The layer.style.view element.\n*/\nfunction panel(layer) {\n  if (!layer.style) return;\n\n  layer.style.elements ??= Object.keys(layer.style);\n\n  // The layer.style.elements define which elements should be added in which order to the layer.style.view element.\n  const content = layer.style.elements\n    .filter((key) => Object.hasOwn(layer.style, key))\n    .filter((key) => Object.hasOwn(methods, key))\n    .map((key) => methods[key](layer))\n    .flat()\n    .filter((element) => !!element);\n\n  if (!content.length) return;\n\n  layer.style.view = mapp.utils.html.node`<div>${content}`;\n\n  return layer.style.view;\n}\n\n/**\n@function hover\n\n@description\nThe hover() style element method will return a checkbox to toggle the display of the current hover.\n\n@param {layer} layer A decorated mapp layer with a style object.\n\n@property {layer-style} layer.style The layer style configuration.\n@property {Object} style.hover The current hover.\n@property {Boolean} hover.hidden Whether a checkbox should be returned.\n@property {Boolean} hover.display The state of the hover.\n\n@returns {HTMLElement} A checkbox element to toggle the current hover.\n*/\nfunction hover(layer) {\n  if (!layer.style.hover) return;\n\n  if (layer.style.hover.hidden) return;\n\n  return mapp.ui.elements.chkbox({\n    checked: !!layer.style.hover.display,\n    data_id: `hoverCheckbox-${layer.key}`,\n    label:\n      (layer.style.hovers && mapp.dictionary.layer_style_display_hover) ||\n      layer.style.hover.title ||\n      mapp.dictionary.layer_style_display_hover,\n    onchange: (checked) => {\n      layer.style.hover.display = checked;\n    },\n  });\n}\n\n/**\n@function hovers\n\n@description\nThe hovers() style element method will return a dropdown to change the current hover assigned to a layer.\n\n@param {layer} layer A decorated mapp layer with a style object.\n\n@property {layer-style} layer.style The layer style configuration.\n@property {Object} style.hover The current hover.\n@property {Object} style.hovers Object where each property represents a hover configuration.\n\n@returns {HTMLElement} A dropdown element to switch the current hover.\n*/\nfunction hovers(layer) {\n  if (!layer.style.hover) return;\n\n  if (layer.style.hover.hidden) return;\n\n  if (!layer.style.hovers) return;\n\n  // It takes two 2 tango!\n  if (Object.keys(layer.style.hovers).length < 2) return;\n\n  const entries = Object.keys(layer.style.hovers)\n\n    // Check if that label is set to be hidden.\n    .filter((key) => !layer.style.hovers[key].hidden)\n    .map((key) => ({\n      option: key,\n      title: layer.style.hovers[key].title || key,\n    }));\n\n  return mapp.ui.elements.dropdown({\n    callback: (e, entry) => {\n      const display = layer.style.hover.display;\n\n      // Set hover from dropdown option.\n      layer.style.hover = layer.style.hovers[entry.option];\n\n      // Assign default featureHover method if non is provided.\n      layer.style.hover.method ??= mapp.layer.featureHover;\n\n      layer.style.hover.display = display;\n    },\n    data_id: `hoversDropdown-${layer.key}`,\n    entries,\n    placeholder: layer.style.hover.title,\n  });\n}\n\n/**\n@function label\n\n@description\nThe label() style element method will return a checkbox to toggle the display of the current label.\n\n@param {layer} layer A decorated mapp layer with a style object.\n\n@property {layer-style} layer.style The layer style configuration.\n@property {Object} style.label The current label.\n@property {Boolean} label.hidden Whether a checkbox should be returned.\n@property {Boolean} label.display The state of the label.\n\n@returns {HTMLElement} A checkbox element to toggle the current label.\n*/\nfunction label(layer) {\n  if (!layer.style.label) return;\n\n  if (layer.style.label.hidden) return;\n\n  layer.style.labelCheckbox = mapp.ui.elements.chkbox({\n    checked: !!layer.style.label.display,\n    data_id: `labelCheckbox-${layer.key}`,\n    label:\n      (layer.style.labels && mapp.dictionary.layer_style_display_labels) ||\n      layer.style.label.title ||\n      mapp.dictionary.layer_style_display_labels,\n    onchange: (checked) => {\n      layer.style.label.display = checked;\n      layer.reload();\n    },\n  });\n\n  layer.changeEndCallbacks.push(zoomLabel);\n\n  return layer.style.labelCheckbox;\n}\n\n/**\n@function zoomLabel\n\n@description\nThe method checks whether the label object has a min or maxZoom restriction and will toggle the status of the associated checkbox.\n\n@param {layer} layer A decorated mapp layer with a style object.\n*/\nfunction zoomLabel(layer) {\n  if (layer.style.label.minZoom || layer.style.label.maxZoom) {\n    const z = layer.mapview.Map.getView().getZoom();\n\n    if (z <= layer.style.label.minZoom) {\n      layer.style.labelCheckbox?.classList.add('disabled');\n    } else if (z >= layer.style.label.maxZoom) {\n      layer.style.labelCheckbox?.classList.add('disabled');\n    } else {\n      layer.style.labelCheckbox?.classList.remove('disabled');\n    }\n  }\n}\n\n/**\n@function labels\n\n@description\nThe labels() style element method will return a dropdown to change the current label assigned to a layer.\n\n@param {layer} layer A decorated mapp layer with a style object.\n\n@property {layer-style} layer.style The layer style configuration.\n@property {Object} style.label The current label.\n@property {Object} style.labels Object where each property represents a label configuration.\n\n@returns {HTMLElement} A dropdown element to switch the current label.\n*/\nfunction labels(layer) {\n  if (!layer.style.label) return;\n\n  if (layer.style.label.hidden) return;\n\n  if (!layer.style.labels) return;\n\n  // It takes two 2 tango!\n  if (Object.keys(layer.style.labels).length < 2) return;\n\n  const entries = Object.keys(layer.style.labels)\n    .filter((key) => !layer.style.labels[key].hidden)\n    .map((key) => ({\n      option: key,\n      title: layer.style.labels[key].title || key,\n    }));\n\n  function callback(e, entry) {\n    const display = layer.style.label.display;\n\n    // Set label from dropdown option.\n    layer.style.label = layer.style.labels[entry.option];\n\n    layer.style.label.display = display;\n\n    layer.reload();\n  }\n\n  return mapp.utils\n    .html`<div>${mapp.dictionary.layer_style_select_label}</div>${mapp.ui.elements.dropdown(\n    {\n      callback,\n      data_id: 'labelsDropdown',\n      entries,\n      placeholder: layer.style.label.title,\n    },\n  )}`;\n}\n\nfunction opacitySlider(layer) {\n  return mapp.ui.elements.slider({\n    callback: (e) => {\n      layer.L.setOpacity(parseFloat(e / 100));\n    },\n    data_id: 'opacitySlider',\n    label: `${mapp.dictionary.layer_style_opacity}`,\n    max: 100,\n    min: 0,\n    val: parseInt(layer.L.getOpacity() * 100),\n  });\n}\n\n/**\n@function theme\n\n@description\nThe theme() style element method will returns a content array with elements for the theme meta text and legend.\n\n@param {layer} layer A decorated mapp layer with a style object.\n\n@property {layer-style} layer.style The layer style configuration.\n@property {Object} [style.labels] Available label configurations.\n@property {Object} [style.hovers] Availabel hover configurations.\n@property {Object} style.theme The current theme.\n@property {string} [theme.title] Theme title for legend.\n@property {string} [theme.meta] Meta text to display.\n@property {string} [theme.setLabel] Key for label from style.labels{} to assign.\n@property {string} [theme.setHover] Key for hover from style.hovers{} to assign.\n\n@returns {HTMLElement} <div> with contents array for the theme meta and legend.\n*/\nfunction theme(layer) {\n  if (!layer.style.theme) return;\n\n  // Handle setLabel and labels in layer style.\n  if (layer.style.theme?.setLabel && layer.style.labels) {\n    layer.style.label = layer.style.labels[layer.style.theme.setLabel];\n  }\n\n  // Handle setHover and hovers in layer style.\n  if (layer.style.theme?.setHover && layer.style.hovers) {\n    layer.style.hover = layer.style.hovers[layer.style.theme.setHover];\n  }\n\n  const content = [];\n\n  if (layer.style.theme?.meta) {\n    layer.style.theme.meta_node = mapp.utils.html\n      .node`<p>${layer.style.theme.meta}`;\n\n    content.push(layer.style.theme.meta_node);\n  }\n\n  if (Object.hasOwn(mapp.ui.layers.legends, layer.style.theme?.type)) {\n    mapp.ui.layers.legends[layer.style.theme.type](layer);\n\n    layer.style.legend && content.push(layer.style.legend);\n  }\n\n  return mapp.utils.html.node`<div data-id=\"layerTheme\">${content}`;\n}\n\n/**\n@function themes\n\n@description\nThe themes() style element method will return a dropdown to change the current theme assigned to a layer.\n\n@param {layer} layer A decorated mapp layer with a style object.\n\n@property {layer-style} layer.style The layer style configuration.\n@property {Object} style.theme The current theme.\n@property {Object} style.themes Object where each property represents a theme.\n@property {Object} [style.label] The current label.\n@property {Object} [style.hover] The current hover.\n\n@returns {HTMLElement} A dropdown element to switch the current theme.\n*/\nfunction themes(layer) {\n  if (!layer.style.themes) return;\n\n  // It takes two 2 tango!\n  if (Object.keys(layer.style.themes).length < 2) return;\n\n  const entries = Object.keys(layer.style.themes).map((key) => ({\n    option: key,\n    title: layer.style.themes[key].title || key,\n  }));\n\n  function callback(e, entry) {\n    // Set theme from dropdown option.\n    layer.style.theme = layer.style.themes[entry.option];\n\n    if (layer.style.theme.setLabel && layer.style.labels) {\n      layer.style.label = layer.style.labels[layer.style.theme.setLabel];\n    }\n\n    if (layer.style.theme.setHover && layer.style.hovers) {\n      layer.style.hover = layer.style.hovers[layer.style.theme.setHover];\n\n      // Assign default featureHover method if non is provided.\n      layer.style.hover.method ??= mapp.layer.featureHover;\n    }\n\n    const stylePanel = mapp.ui.layers.panels.style(layer);\n\n    if (layer.style.panel) {\n      // Replace children in location layer entry style.panel\n      layer.style.panel.replaceChildren(...stylePanel.children);\n    }\n\n    // Replace the children of the style panel.\n    layer.view\n      ?.querySelector('[data-id=style-drawer]')\n      .replaceChildren(...stylePanel.children);\n\n    layer.reload();\n  }\n\n  const dropdown = mapp.utils.html`<div>\n    ${mapp.dictionary.layer_style_select_theme}\n    ${mapp.ui.elements.dropdown({\n      callback,\n      data_id: 'themesDropdown',\n      entries,\n      placeholder: layer.style.theme.title,\n    })}`;\n\n  return dropdown;\n}\n\n/**\n@function icon_scaling\n\n@description\nThe icon_scaling() style element method will returns a contents array with controls for icon.scaling properties (field, icon, clusterScale, zoomInScale, and zoomOutScale).\n\n@param {layer} layer A decorated mapp layer with a style object.\n\n@property {layer-style} layer.style The layer style configuration.\n@property {Object} style.icon_scaling The icon_scaling config.\n@property {Boolean} icon_scaling.hidden Do not show icon_scaling controls in panel.\n@property {String} [icon_scaling.field] Assign field value as feature property for scaling point feature icons.\n@property {Object} [icon_scaling.fields] An Object of objects with fields that can be assigned the feature property for scaling.\n@property {Boolean} [icon_scaling.icon] Add control to alter the base icon scale.\n@property {Boolean} [icon_scaling.clusterScale] Add control to alter the cluster.clusterScale value.\n@property {Boolean} [icon_scaling.zoomInScale] Add control to alter the zoomInScale value.\n@property {Boolean} [icon_scaling.zoomOutScale] Add control to alter the zoomOutScale value.\n\n@returns {HTMLElement} <div> with contents array of HTMLElements to control icon scaling.\n*/\nfunction icon_scaling(layer) {\n  if (!layer.style.icon_scaling) return;\n\n  if (layer.style.icon_scaling.hidden) return;\n\n  const content = [];\n\n  if (layer.style.icon_scaling.fields) {\n    const entries = Object.keys(layer.style.icon_scaling.fields).map((key) => ({\n      option: layer.style.icon_scaling.fields[key].field,\n      title: layer.style.icon_scaling.fields[key].title || key,\n      key: key,\n    }));\n\n    //Push an entry with no option so scaling can be disabled\n    entries.push({ title: mapp.dictionary.icon_scaling_no_scaling });\n\n    layer.style.icon_scaling.placeholder ??=\n      mapp.dictionary.icon_scaling_select_one;\n\n    layer.style.icon_scaling.title ??= mapp.dictionary.icon_scaling_title;\n\n    const placeholder =\n      Object.keys(layer.style.icon_scaling.fields).find(\n        (key) =>\n          layer.style.icon_scaling.fields[key].field ===\n          layer.style.icon_scaling.field,\n      ) || Object.keys(layer.style.icon_scaling.fields)[0];\n\n    content.push(\n      mapp.utils.html`\n        <h3>${layer.style.icon_scaling.title}`,\n      mapp.ui.elements.dropdown({\n        data_id: 'iconScalingFieldsDropdown',\n        entries: entries,\n        callback: (e, options) => {\n          if (options.option) {\n            Object.assign(layer.style.icon_scaling, {\n              ...layer.style.icon_scaling.fields[options.key],\n            });\n          } else {\n            delete layer.style.icon_scaling.field;\n          }\n\n          //Reload layer to re-run featureStyle\n          layer.reload();\n\n          layer.L.changed();\n        },\n        placeholder:\n          layer.style.icon_scaling.fields[placeholder].title ||\n          placeholder ||\n          layer.style.icon_scaling.placeholder,\n      }),\n    );\n  } else if (layer.style.icon_scaling.field) {\n    content.push(\n      mapp.ui.elements.chkbox({\n        checked: !!layer.style.icon_scaling.field,\n        data_id: `iconScalingFieldCheckbox-${layer.key}`,\n        label: mapp.dictionary.icon_scaling_field,\n        onchange: (checked) => {\n          if (checked) {\n            layer.style.icon_scaling.field = layer.style.icon_scaling._field;\n            delete layer.style.icon_scaling._field;\n          } else {\n            layer.style.icon_scaling._field = layer.style.icon_scaling.field;\n            delete layer.style.icon_scaling.field;\n          }\n\n          layer.L.changed();\n        },\n      }),\n    );\n  }\n\n  if (layer.style.icon_scaling.icon) {\n    layer.style.default.scale ??= 1;\n\n    layer.style.icon_scaling.maxScale ??= layer.style.default.scale * 3;\n\n    layer.style.icon_scaling.minScale ??= 0.1;\n\n    layer.style.icon_scaling.icon_scaling_label ??=\n      mapp.dictionary.icon_scaling_label;\n\n    content.push(\n      mapp.ui.elements.slider({\n        callback: (val) => {\n          layer.style.default.scale = parseFloat(val);\n          clearTimeout(layer.style.timeout);\n          layer.style.timeout = setTimeout(() => layer.L.changed(), 400);\n        },\n        data_id: 'iconScalingSlider',\n        label: layer.style.icon_scaling.icon_scaling_label,\n        max: layer.style.icon_scaling.maxScale,\n        min: layer.style.icon_scaling.minScale,\n        step: layer.style.default.scale / 10,\n        val: layer.style.default.scale,\n      }),\n    );\n  }\n\n  if (\n    layer.style.icon_scaling.clusterScale &&\n    layer.style.cluster?.clusterScale\n  ) {\n    layer.style.cluster.clusterScale ??= 1;\n\n    content.push(\n      mapp.ui.elements.slider({\n        callback: (val) => {\n          layer.style.cluster.clusterScale = parseFloat(val);\n          clearTimeout(layer.style.timeout);\n          layer.style.timeout = setTimeout(() => layer.L.changed(), 400);\n        },\n        data_id: 'iconScalingClusterSlider',\n        label: mapp.dictionary.icon_scaling_cluster,\n        max: layer.style.cluster.clusterScale * 3,\n        min: 0,\n        step: layer.style.cluster.clusterScale / 10,\n        val: layer.style.cluster.clusterScale,\n      }),\n    );\n  }\n\n  // Only add this elements if icon_scaling.zoomInScale is defined.\n  if (layer.style.icon_scaling.zoomInScale) {\n    // Assign zoomInScale as 1 if not implicit.\n    layer.style.zoomInScale ??= 1;\n\n    content.push(\n      mapp.ui.elements.slider({\n        callback: (val) => {\n          layer.style.zoomInScale = parseFloat(val);\n          clearTimeout(layer.style.timeout);\n          layer.style.timeout = setTimeout(() => layer.L.changed(), 400);\n        },\n        data_id: 'iconScalingZoomInSlider',\n        label: mapp.dictionary.icon_scaling_zoom_in,\n        max: layer.style.zoomInScale * 3,\n        min: 0,\n        step: layer.style.zoomInScale / 10,\n        val: layer.style.zoomInScale,\n      }),\n    );\n  }\n\n  // Only add this elements if icon_scaling.zoomOutScale is defined.\n  if (layer.style.icon_scaling.zoomOutScale) {\n    // Assign zoomOutScale as 1 if not implicit.\n    layer.style.zoomOutScale ??= 1;\n\n    content.push(\n      mapp.ui.elements.slider({\n        callback: (val) => {\n          layer.style.zoomOutScale = parseFloat(val);\n          clearTimeout(layer.style.timeout);\n          layer.style.timeout = setTimeout(() => layer.L.changed(), 400);\n        },\n        data_id: 'iconScalingZoomOutSlider',\n        label: mapp.dictionary.icon_scaling_zoom_out,\n        max: layer.style.zoomOutScale * 3,\n        min: 0,\n        step: layer.style.zoomOutScale / 10,\n        val: layer.style.zoomOutScale,\n      }),\n    );\n  }\n\n  return mapp.utils.html.node`<div>${content}`;\n}\n", "/**\n### /ui/elements/legendIcon\n\nThe legendIcon module exports the default legendIcon(style) method.\n\n@module /ui/elements/legendIcon\n*/\n\nconst xmlSerializer = new XMLSerializer();\n\n/**\n@function legendIcon\n\n@description\nThe legendIcon method returns an icon for displaying a mapp-style object outside the mapview.Map canvas.\n\n@param {feature-style} style A JSON style object.\n\n@returns {HTMLElement} A HTML element for the style.\n*/\nexport default function legendIcon(style) {\n  // Create an array to hold the legend icons.\n  // This is required to support multiple icons in a single style.\n  const legendIcons = [];\n\n  // If the style.icon is an array, we will create a layered icon.\n  if (Array.isArray(style.icon)) {\n    legendIcons.push(createIconFromArray(style));\n  } else if (style.icon || style.svg || style.type) {\n    // If the style.icon is an inline style, we will create an icon from it.\n    legendIcons.push(createIconFromInlineStyle(style));\n  }\n\n  // If the style is a polygon, we will create a polygon symbol.\n  if (style.fillColor) {\n    legendIcons.push(createPolygonSymbol(style));\n  }\n\n  // If the style is a line, we will create a line symbol.\n  if (style.strokeColor && !style.fillColor) {\n    legendIcons.push(createLineSymbol(style));\n  }\n\n  const icon = mapp.utils.html.node`<div class=\"legend-icon\">${legendIcons}`;\n\n  // return the legend icons.\n  return icon;\n}\n\n/**\n@function createIconFromArray\n\n@description\nThe createIconFromArray method iterates through an `style.icon[]` array to create a layered and scaled icon element for displaying an icon style.\n\n@param {feature-style} style A JSON style object.\n\n@returns {HTMLElement} A HTML element for the style.\n*/\n\nfunction createIconFromArray(style) {\n  const canvas = document.createElement('canvas');\n  canvas.width = style.width;\n  canvas.height = style.height;\n\n  let toLoad = style.icon.length;\n\n  // Images must be loaded in imageStyle image object before they can be applied to canvas.\n  function onImgLoad() {\n    if (--toLoad) return;\n\n    const vectorContext = ol.render.toContext(canvas.getContext('2d'), {\n      pixelRatio: 1,\n      size: [style.width, style.height],\n    });\n\n    // Styles can not be assigned as array to convas context.\n    style.icon.forEach((icon) => {\n      vectorContext.setStyle(icon.legendStyle);\n      vectorContext.drawGeometry(\n        new ol.geom.Point([canvas.width * 0.5, canvas.height * 0.5]),\n      );\n    });\n  }\n\n  const legendScale = style.icon[0].legendScale || 1;\n\n  style.icon.forEach((icon) => {\n    if (icon.type && Object.hasOwn(mapp.utils.svgSymbols, icon.type)) {\n      icon.url = mapp.utils.svgSymbols[icon.type](icon);\n    }\n\n    const imageStyle = new ol.style.Icon({\n      anchor: icon.legendAnchor || [0.5, 0.5],\n      crossOrigin: 'anonymous',\n      scale: legendScale * (icon.scale || 1),\n      src: icon.url,\n    });\n\n    icon.legendStyle = new ol.style.Style({\n      image: imageStyle,\n    });\n\n    const img = imageStyle.getImage();\n\n    // Check whether the image is loaded in style.\n    if (imageStyle.getImageState() === 2) {\n      onImgLoad();\n    } else {\n      img.addEventListener('load', onImgLoad);\n      imageStyle.load();\n    }\n  });\n\n  return canvas;\n}\n\n/**\n@function createIconFromInlineStyle\n\n@description\nThe createIconFromInlineStyle creates an icon from an inline style object.\n\n@param {feature-style} style A JSON style object.\n\n@returns {HTMLElement} A HTML element for the style.\n*/\n\nfunction createIconFromInlineStyle(style) {\n  const iconUrl =\n    style.icon?.svg ||\n    style.svg ||\n    style.icon?.url ||\n    style.url ||\n    mapp.utils.svgSymbols[style.icon?.type || style.type](style.icon || style);\n\n  const inlineStyle = `\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: contain;\n    width: ${style.width + 'px' || '100%'};\n    height: ${style.height + 'px' || '100%'};\n    background-image: url(${iconUrl})`;\n\n  return mapp.utils.html.node`<div style=${inlineStyle}>`;\n}\n\n/**\n@function createLineSymbol\n\n@description\nThe createLineSymbol creates an icon for a stroke [line] style object.\n\n@param {feature-style} style A JSON style object.\n\n@returns {HTMLElement} A HTML element for the style.\n*/\n\nfunction createLineSymbol(style) {\n  const path = `M 0,${style.height / 2} L ${style.width / 2},${style.height / 2} ${style.width / 2},${style.height / 2} ${style.width},${style.height / 2}`;\n\n  style.strokeWidth ??= 1;\n  style.lineDash ??= '';\n\n  const icon = mapp.utils.svg.node`\n  <svg \n    height=${style.height} \n    width=${style.width}>\n    <path\n      d=${path}\n      fill=\"none\"\n      stroke=${style.strokeColor}\n      stroke-width=${style.strokeWidth}\n      stroke-dasharray=${style.lineDash} />`;\n\n  const backgroundImage = `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`;\n\n  const inlineStyle = `\n    background-position: center; \n    background-repeat: no-repeat; \n    background-size: contain; \n    width: ${style.width}px; \n    height: ${style.height}px; \n    background-image: url(${backgroundImage});`;\n\n  return mapp.utils.html`<div style=${inlineStyle}>`;\n}\n\n/**\n@function createPolygonSymbol\n\n@description\nThe createPolygonSymbol creates an icon for a fill [polygon] style object.\n\n@param {feature-style} style A JSON style object.\n\n@returns {HTMLElement} A HTML element for the style.\n*/\n\nfunction createPolygonSymbol(style) {\n  style.fillOpacity ??= 1;\n  style.strokeWidth ??= 1;\n  style.lineDash ??= '';\n\n  const icon = mapp.utils.svg.node`\n  <svg \n    height=${style.height}\n    width=${style.width}>\n    <rect\n      x=${style.strokeWidth || 1}\n      y=${style.strokeWidth || 1}\n      rx=\"4px\"\n      ry=\"4px\"\n      stroke-linejoin=\"round\"\n      width=${style.width - 2 * (style.strokeWidth || 1)}\n      height=${style.height - 2 * (style.strokeWidth || 1)}\n      fill=${style.fillColor}\n      fill-opacity=${style.fillOpacity}\n      stroke=${style.strokeColor}\n      stroke-width=${style.strokeWidth}\n      stroke-dasharray=${style.lineDash} >`;\n\n  const backgroundImage = `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`;\n\n  const inlineStyle = `\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: contain;\n    width: ${style.width}px;\n    height: ${style.height}px;\n    background-image: url(${backgroundImage});`;\n\n  return mapp.utils.html`<div style=${inlineStyle}>`;\n}\n", "/**\n@module ui/elements/loginForm\n*/\n\n/**\n@function loginForm\n\n@description\nCreates a login form used in user login view. \n@param {Object} params \n@property {String} classList optional list of css classes to apply on form element\n@property {String} formAction optional custom form action parameter. See native html form tag documentation for more information.\n@property {String} msg optional custom text message to display.\n@property {String} register optional custom register route to navigate to, defaults to native framework register route.\n@returns {HTMLElement} form\n*/\n\nexport default function loginForm(params = {}) {\n  params.msg ??= '';\n  params.formAction = `${mapp.host}/api/user/login?language=${mapp.language}`;\n  params.register ??= `${mapp.host}/api/user/register?language=${mapp.language}&register=true`;\n  params.classList ??= '';\n  params.login_email ??= mapp.dictionary.login_email;\n  params.login_password ??= mapp.dictionary.login_password;\n  params.login_button ??= mapp.dictionary.login_button;\n  params.login_verification_note ??= mapp.dictionary.login_verification_note;\n  params.login_registration_link ??= mapp.dictionary.login_registration_link;\n  params.login_invalid ??= mapp.dictionary.login_invalid;\n\n  const classList = `login-form no-select ${params.classList}`;\n\n  const userInput = mapp.utils.html.node`<input\n    id=\"auth_user_email\"\n    name=\"email\"\n    type=\"email\"\n    required\n    autocomplete=\"username\"\n    maxlength=\"50\"\n    onkeyup=${check}\n    onchange=${check}>`;\n\n  const disabledSpan = mapp.utils.html\n    .node`<span class=\"bold\" style=\"color: var(--color-danger)\">`;\n\n  const passwordInput = mapp.utils.html.node`<input\n    id=\"auth_user_password\"\n    name=\"password\"\n    type=\"password\"\n    required\n    autocomplete=\"current-password\"\n    minlength=\"12\"\n    onkeyup=${check}\n    onchange=${check}>`;\n\n  const loginBtn = mapp.utils.html.node`\n    <button id=\"btnLogin\" class=\"primary bold\" type=\"submit\" disabled>${params.login_button}`;\n\n  const form = mapp.utils.html.node`<form\n    class=${classList}\n    method=\"post\"\n    autocomplete=\"off\"\n    action=${params.formAction}>\n    <input style=\"display: none\" name=\"language\" required value=\"en\">\n    <div class=\"input-group\">\n      ${userInput}\n      <span class=\"bar\"></span>\n      <label for=\"auth_user_email\">${params.login_email}</label>\n    </div>\n    <div class=\"input-group\">\n      ${passwordInput}\n      <span class=\"bar\"></span>\n      <label for=\"auth_user_password\">${params.login_password}</label>\n      <br>\n      ${disabledSpan}\n    </div>\n    <p class=\"msg\">${params.msg}</p>\n\n    ${loginBtn}\n\n    <p>${params.login_verification_note}</p>\n\n    <a \n      class=\"switch\"\n      href=${params.register}>${params.login_registration_link}</a>`;\n\n  return form;\n\n  function check() {\n    // Disable the login button if the email or password is invalid.\n    loginBtn.disabled = !(\n      userInput.validity.valid && passwordInput.validity.valid\n    );\n\n    // Set the context of the disabled_info element to an error message if the email or password is invalid.\n    disabledSpan.textContent = loginBtn.disabled ? params.login_invalid : '';\n  }\n}\n", "/**\n### mapp.ui.elements.numericInput()\n\nExports the numericInput elements method.\n\n@module /ui/elements/numericInput\n*/\n\n/**\n@function numericInput\n\n@description\nCreates a type=text input element with validation checks oninput.\n\n@param {Object} params Parameter for the creation of the input element.\n@property {string} [params.placeholder=''] The placeholder for the text input.\n@property {string} [params.data_id='numeric-input'] The data id attribute for the input element.\n\n@returns {Object} HTML input element\n*/\nexport default function numericInput(params) {\n  params.placeholder ??= '';\n  params.data_id ??= 'numeric-input';\n  params.numericChecks ??= numericChecks;\n\n  const value = mapp.utils.formatNumericValue(params);\n  const width = params.dynamicWidth ? value.length + 1.3 + 'ch' : '100%';\n  const style = `text-align: center; width: ${width}`;\n\n  const numericInput = mapp.utils.html.node`<input\n    data-id=${params.data_id}\n    type=\"text\"\n    style=${style}\n    placeholder=${params.placeholder}\n    value=${value}\n    onchange=${(e) => oninput(e, params)}\n    onfocus=${(e) => (e.target.value = mapp.utils.unformatStringValue({ ...params, stringValue: e.target.value }))}\n    oninput=${(e) => oninput(e, params)}>`;\n\n  return numericInput;\n}\n\n/**\n@function oninput\n\n@description\nCreates a type=text input element with validation checks for numeric values.\n\nThe value of an associated sliderElement will be updated if validated.\n\n@param {Object} e The event object from input element.\n@param {Object} params The config object argument.\n@property {Object} e.target The input element.\n@property {Object} params.callback A callback method is required.\n*/\nfunction oninput(e, params) {\n  // Assign stringValue from input target.\n  params.stringValue = e.target.value;\n\n  if (params.numericChecks(e.target.value, params)) {\n    // Assign numeric newValue.\n    params.newValue = params.onRangeInput\n      ? params.stringValue\n      : mapp.utils.unformatStringValue(params);\n    // The numericCheck passes.\n    delete params.invalid;\n    e.target.classList.remove('invalid');\n\n    // Updated sliderElement value only if validated.\n    if (params.sliderElement) {\n      // Set styling param for the track.\n      params.sliderElement.style.setProperty(\n        `--${e.target.dataset.id}`,\n        params.newValue,\n      );\n\n      // Set value for the range input.\n      params.sliderElement.querySelector(`[name=${params.rangeInput}]`).value =\n        params.newValue;\n    }\n  } else {\n    // The numericCheck fails.\n    params.invalid = true;\n    e.target.classList.add('invalid');\n  }\n\n  // The invalid input should not be formatted.\n  if (params.invalid) return params.callback();\n\n  // Pass valid newValue to callback method.\n  params.callback(params.newValue);\n\n  if (params.dynamicWidth) {\n    e.target.style.width = e.target.value.length + 1.3 + 'ch';\n  }\n  //Mark the onRangeInput to false is the origin of the input call could come from either a slider or input\n  params.onRangeInput = false;\n}\n\n/**\n@function numericChecks\n\n@description\nThe numericChecks method checks whether a provided numeric value is a number, larger than params.min, and smaller than params.max.\n\n@param {Object} value The numeric value to check.\n@param {Object} params The config object argument.\n@property {numeric} params.min Value must be larger than min.\n@property {numeric} params.max Value must be smaller than max.\n\n@returns {Boolean} true if checks are passed.\n*/\nfunction numericChecks(value, params) {\n  // Check whether value is a null.\n  if (params.onRangeInput && value === null) return false;\n  // Check whether value is a number.\n  if (isNaN(value)) return false;\n\n  if (params.min && value < params.min) {\n    // The value is smaller than min.\n    return false;\n  }\n\n  if (params.max) {\n    return value <= params.max;\n  }\n\n  return true;\n}\n", "/**\n## /ui/elements/pills\n\nExports the pills(component) method as mapp.ui.elements.pills() to create a pills ui component.\n\nDictionary entries:\n- pill_component_remove\n\n@requires /dictionary \n\n@module /ui/elements/pills\n*/\n\n/**\n@function pills\n\n@description\nDecorates the component object with add() and remove() methods before returning the component.\n\n@param {Object} component \nThe component object to be decorated.\n\n@property {HTMLElement} component.target \nThe target element to append to.\n@property {Object} [component.pills]\narray of values to be initially selected\n@property {Function} [component.addCallback] \nFunction to execute once a pill has been added. Takes as arguments added value and array of selected values.\n@property {Function} [component.removeCallback] \nFunction to execute once a pill has been removed. Takes as arguments removed value and array of selected values.\n\n@returns {Object} \nThe decorated component object.\n*/\nexport default function pills(component = {}) {\n  component.container = mapp.utils.html.node`<div class=\"pill-container\">`;\n\n  // Create set from pills array.\n  component.pills = Array.isArray(component.pills)\n    ? new Set(component.pills)\n    : new Set();\n\n  component.add = add;\n\n  component.remove = remove;\n\n  // create pills for values passed initially\n  component.pills.forEach((pill) => component.add(pill));\n\n  // Append container to component target if instanceof HTMLElement\n  if (component.target instanceof HTMLElement) {\n    component.target.append(component.container);\n  }\n\n  return component;\n}\n\n/**\n@function add\n\n@description\nAdds a pill with the provided value to the pill component (this) and executes the component.addCallback() method if declared.\n\n@param {string} val The pill value.\n*/\nfunction add(val) {\n  const component = this;\n\n  const pill = mapp.utils.html.node`<div\n    class=\"pill\"\n    style=${component.css_pill}\n    data-value=${val}\n    title=\"${val}\">${val}`;\n\n  // Only append the remove button to pill if configured.\n  if (component.removeCallback) {\n    pill.append(mapp.utils.html\n      .node`<button class=\"notranslate material-symbols-outlined close\"\n      data-value=${val}\n      title=${mapp.dictionary.pill_component_remove}\n      onclick=${(e) => {\n        e.stopPropagation();\n        component.remove(val);\n      }}>`);\n  }\n\n  if (!component.pills.has(val)) {\n    component.pills.add(val);\n  }\n\n  // add pill\n  component.container.append(pill);\n\n  if (typeof component.addCallback === 'function') {\n    // execute add callback if exists\n    component.addCallback(val, component.pills);\n  }\n}\n\n/**\n@function remove\n\n@description\nRemoves a pill with the provided value to the pill component (this) and executes the component.removeCallback() method if declared.\n\n@param {string} val The pill value.\n*/\nfunction remove(val) {\n  const component = this;\n\n  const pillElement = Array.from(component.container.children).find(\n    (child) => child.getAttribute('data-value') === val.toString(),\n  );\n\n  pillElement?.remove();\n\n  // remove pill from selection\n  component.pills.delete(val);\n\n  // execute removeCallback if defined\n  if (typeof component.removeCallback === 'function') {\n    component.removeCallback(val, component.pills);\n  }\n}\n", "/**\n### /ui/elements/radio\n\n@module /ui/elements/radio\n\n@description\nRadio is a round interactive element that allows the user to choose only one option from a predefined set of mutually exclusive choices.\nRadio buttons must be organised into groups of at least 2 entries identified by their common name as they function as interdependent boolean flags.\nChecking one radiobutton in a group automatically uncheckes all others.\n\n```js const my_radio = mapp.ui.elements.radio({ label: \"My only option\" }); ```\n\nIn order to create radio buttons as a group:\n\n```js\nconst my_radio1 = mapp.ui.elements.radio({ label: \"My option 1\", name: \"my_group\" });\nconst my_radio2 = mapp.ui.elements.radio({ label: \"My option 2\", name: \"my_group\" });\nconst my_radio3 = mapp.ui.elements.radio({ label: \"My option 3\", name: \"my_group\" });\n```\n\n@param {Object} params Configuration object\n@property {String} [params.name] name attribute which identifies the group and links radio buttons as members.\n@property {String} [params.data_id] Data attribute which identifies each member within the group\n@property {String} [params.label] Text label to display next to radio button\n@property {String} [params.caption] Text caption to display before the radio button\n@property {Function} [params.onchange] \nFunction to execute after the checked state within the group is changed. It takes change event and configuration params as arguments.\n@returns {HTMLElement} \n*/\n\nexport default function radio(params) {\n  params.name ??= 'mapp-ui-radio-element';\n  params.data_id ??= 'radio';\n  params.label ??= 'No label defined';\n\n  const header = params.caption\n    ? mapp.utils.html`<legend>${params.caption}`\n    : '';\n\n  const radio = mapp.utils.html.node`<input \n    type=\"radio\"\n    data-id=${params.data_id}\n    name=\"${params.name}\"\n    .disabled=${!!params.disabled}\n    .checked=${!!params.checked}\n    onchange=${(e) => {\n      params.onchange?.(e, params);\n    }}/>`;\n\n  return mapp.utils.html.node`<div>\n    ${header}\n    <label \n    class=\"radio\">\n    ${radio}\n    <span class=\"material-symbols-outlined\"></span>\n    <span>${params.label}`;\n}\n", "/**\n@module ui/elements/registerForm\n*/\n\n/**\n@function registerForm\n\n@description\nCreates register form used in user registration view.\n@param {Object} params \n@property {String} classList optional list of css classes to apply on form element\n@property {String} login optional custom login route to navigate to, defaults to native framework login route.\n@returns {HTMLElement} form\n*/\n\nexport default function registerForm(params = {}) {\n  params.msg ??= '';\n  params.formAction = `${mapp.host}/api/user/register?language=${mapp.language}`;\n  params.classList ??= '';\n  params.login ??= `${mapp.host}/api/user/login?language=${mapp.language}`;\n  params.register_privacy_agreement ??=\n    mapp.dictionary.register_privacy_agreement;\n  params.register_next_info ??= mapp.dictionary.register_next_info;\n  params.register_error = mapp.dictionary.register_error;\n\n  const classList = `login-form no-select ${params.classList}`;\n\n  const userInput = mapp.utils.html.node`<input\n    id=\"auth_user_email\"\n    name=\"email\"\n    type=\"email\"\n    required\n    autocomplete=\"username\"\n    maxlength=\"50\"\n    onkeyup=${check}\n    onchange=${check}>`;\n\n  const passwordInput = mapp.utils.html.node`<input\n      id=\"auth_user_password\"\n      name=\"password\"\n      type=\"password\"\n      required\n      autocomplete=\"new-password\"\n      minlength=\"12\"\n      pattern=\"(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])^.{12,}$\"\n      onkeyup=${check}\n      onchange=${check}>`;\n\n  const passwordRetypeInput = mapp.utils.html.node`<input\n    id=\"auth_user_password_retype\"\n    name=\"password_retype\"\n    type=\"password\"\n    required\n    autocomplete=\"new-password\"\n    minlength=\"12\"\n    pattern=\"(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])^.{12,}$\"\n    onkeyup=${check}\n    onchange=${check}>`;\n\n  const invalidInfo = mapp.utils.html\n    .node`<div class=\"bold\" style=\"color: var(--color-danger)\">`;\n\n  const agreement_checkbox = mapp.ui.elements.chkbox({\n    name: 'privacy_agreement',\n    label: mapp.utils\n      .html`<span class=\"asterisk\">${mapp.dictionary.register_agree}`,\n    onchange: check,\n  });\n\n  const registerBtn = mapp.utils.html.node`<button \n    class=\"primary bold\"\n    id=\"btnRegister\" type=\"submit\" disabled>\n    ${mapp.dictionary.register_reset}`;\n\n  const form = mapp.utils.html.node`<form\n    class=${classList}\n    method=\"post\"\n    autocomplete=\"off\"\n    action=${params.formAction}>\n    <input style=\"display: none\" name=\"language\" required value=${mapp.language}>\n    <div class=\"input-group\">\n      ${userInput}\n      <span class=\"bar\"></span>\n      <label class=\"asterisk\" for=\"auth_user_email\">${mapp.dictionary.register_email}</label>\n    </div>\n    <div class=\"input-group\">\n      ${passwordInput}\n      <span class=\"bar\"></span>\n      <label class=\"asterisk\" for=\"auth_user_password\">${mapp.dictionary.register_new_password}</label>\n      <br>\n    </div>\n    <div class=\"input-group\">\n      ${passwordRetypeInput}\n      <span class=\"bar\"></span>\n      <label class=\"asterisk\" for=\"auth_user_password_retype\">${mapp.dictionary.register_retype_password}</label>\n      <br>\n    </div>\n    <p class=\"msg\">${params.msg}</p>\n    <br>\n    <h2>${mapp.dictionary.register_privacy}</h2>\n    <p>${params.register_privacy_agreement}</p>\n    <br>\n    ${agreement_checkbox}\n    ${registerBtn}\n    <br>\n    ${invalidInfo}\n    <br>\n    <h2>${mapp.dictionary.register_next}</h2>\n    <p>${params.register_next_info}</p>\n    <br>\n    <a \n      class=\"switch\"\n      href=${params.login}>${mapp.dictionary.register_login}\n    </a>\n    `;\n\n  return form;\n\n  function check() {\n    registerBtn.disabled = !(\n      userInput.validity.valid &&\n      passwordInput.validity.valid &&\n      passwordInput.value === passwordRetypeInput.value &&\n      agreement_checkbox.querySelector('input').checked\n    );\n\n    invalidInfo.textContent = registerBtn.disabled ? params.register_error : '';\n  }\n}\n", "/**\n## /ui/elements/searchbox\n\nExports the searchbox(component) method as mapp.ui.elements.searchbox() to create a searchbox ui component.\n\n@module /ui/elements/searchbox\n*/\n\n/**\n@function searchbox\n\n@description\nCreates a searchbox input element which executes the provided searchFunction with the event argument on `input` and `focus` events.\n\n@param {Object} component \nThe component object to be decorated.\n@param {Function} component.searchFunction \nThe function to execute on input or focus events.\n@param {HTMLElement} [component.target=<DIV>]\nThe target element to append to.\n\n@returns {Object} \nThe decorated component object.\n*/\n\nexport default function searchbox(component = {}) {\n  if (!(component.searchFunction instanceof Function)) {\n    console.warn(\n      `A searchFunction must be provided for the construction of a searchbox component.`,\n    );\n    return;\n  }\n\n  // Ensure the target is an HTMLElement before proceeding\n  if (!(component.target instanceof HTMLElement)) {\n    component.target = mapp.utils.html.node`<div>`;\n  }\n\n  component.name ??= 'searchbox-input';\n\n  /**\n  The search input element.\n  @type {HTMLInputElement}\n  */\n  component.input = mapp.utils.html.node`\n  <input\n    name=${component.name}\n    type=\"search\"\n    placeholder=${component.placeholder}\n    aria-label=${component.placeholder}>`;\n\n  /**\n  The search results list element.\n  @type {HTMLUListElement}\n  */\n  component.list = mapp.utils.html.node`<ul>`;\n\n  /**\n  The searchbox container element.\n  @type {HTMLDivElement}\n  */\n  component.node = mapp.utils.html.node`\n    <div class=\"searchbox\">\n      ${component.input}\n      ${component.list}`;\n\n  component.target.append(component.node);\n\n  component.input.addEventListener('input', (e) => component.searchFunction(e));\n\n  component.input.addEventListener('focus', (e) => component.searchFunction(e));\n\n  return component;\n}\n", "/**\nExports method to create a slider element group.\n\n@module /ui/elements/slider\n*/\n\n/**\n@function slider\n\n@description\nThe slider method creates a numeric input element nested in a group with an associated range slider element.\n\nThe params.value property must be between params.min and params.max params.\n\n@param {Object} params Parameter for slider element.\n@property {numeric} params.value Parameter value.\n@property {numeric} params.min Numeric range min.\n@property {numeric} params.max Numeric range max.\n\n@returns {HTMLElement} Element group containing range and numeric input elements.\n*/\nexport default function slider(params) {\n  params.group_id ??= params.data_id || 'slider';\n\n  params.data_id = 'a';\n\n  // Name of range input to update on input.\n  params.rangeInput = 'rangeInput';\n\n  // Range inputs require a step.\n  params.step ??= 1;\n\n  // Set value to val if value is not defined.\n  params.value ??= params.val;\n\n  params.title ??= '';\n\n  params.style ??= '';\n\n  // Create numericInput element for formatting and numeric checks.\n  const numericInput = mapp.ui.elements.numericInput(params);\n\n  // The sliderElement property is required to update the range input on numeric input.\n  params.sliderElement = mapp.utils.html.node`\n    <div\n      role=\"group\"\n      data-id=${params.group_id}\n      title=${params.title}\n      class=\"input-range single\"\n      style=${`\n        --min: ${params.min};\n        --max: ${params.max};\n        --a: ${params.value};\n        ${params.style}`}>\n      <div class=\"label-row\">\n        <label>${params.label}\n        ${numericInput}\n        </label>\n      </div>\n      <div class=\"track-bg\"></div>\n      <input data-id=\"a\"\n        name=\"rangeInput\"\n        type=\"range\"\n        min=${params.min}\n        max=${params.max}\n        step=${params.step}\n        value=${params.value}\n        oninput=${(e) => onRangeInput(e, params)}>`;\n\n  return params.sliderElement;\n\n  /**\n  @function onRangeInput\n\n  @description\n  Assign value from range type input to associated numericInput element.\n\n  Formatting and numeric checks will be handled by the numericInput element.\n\n  @param {Object} e oninput event from range type input.\n  @param {Object} params params object used to pass additional params to the numericInput input function.\n  */\n  function onRangeInput(e, params) {\n    // Range type input return a string target.value.\n    const val = Number(e.target.value);\n\n    //Needed to indicate that the change is coming from a slider element\n    params.onRangeInput = true;\n\n    numericInput.value = val;\n\n    // Trigger formatting and numeric checks.\n    numericInput.dispatchEvent(new Event('change'));\n  }\n}\n", "/**\nExports method to create a slider_ab element group.\n\n@module /ui/elements/slider_ab\n*/\n\n/**\n@function slider_ab\n\n@description\nThe slider method creates a range slider element with two numeric input elements [a/b].\n\nThe params.value property must be between params.min and params.max params.\n\n@param {Object} params Parameter for slider element.\n@property {numeric} params.val_a Parameter value for a input.\n@property {numeric} params.val_b Parameter value for b input.\n@property {numeric} params.min Numeric range min.\n@property {numeric} params.max Numeric range max.\n\n@returns {HTMLElement} Element group containing range and numeric input elements.\n*/\nexport default function slider_ab(params) {\n  params.group_id ??= params.data_id || 'slider_ab';\n\n  params.step ??= 1;\n\n  const minInputParams = {\n    ...params,\n    callback: params.callback_a,\n    data_id: 'a',\n    dynamicWidth: true,\n    numericChecks,\n    rangeInput: 'minRangeInput',\n    value: params.val_a,\n  };\n\n  // Create numericInput element for formatting and numeric checks.\n  const minNumericInput = mapp.ui.elements.numericInput(minInputParams);\n\n  const maxInputParams = {\n    ...params,\n    callback: params.callback_b,\n    data_id: 'b',\n    dynamicWidth: true,\n    numericChecks,\n    rangeInput: 'maxRangeInput',\n    value: params.val_b,\n  };\n\n  // Create numericInput element for formatting and numeric checks.\n  const maxNumericInput = mapp.ui.elements.numericInput(maxInputParams);\n\n  /**\n  @function numericChecks\n\n  @description\n  The numericChecks method checks whether a provided numeric value is a number, larger than params.min, and smaller than params.max.\n\n  The slider_ab numericCheck methods returns false if the 'a' slider element value exceeds the 'b' slider element value or vice versa.\n\n  @param {Object} value The numeric value to check.\n  @param {Object} params The config object argument.\n  @property {numeric} params.min Value must be larger than min.\n  @property {numeric} params.max Value must be smaller than max.\n  @property {boolean} params.showMinMax Whether the minmax-row element should be displayed.\n  @property {string} params.data_id The id of the numeric input element.\n\n  @returns {Boolean} true if checks are passed.\n  */\n  function numericChecks(value, params) {\n    // Check whether value is a null.\n    if (value === null) return false;\n    // Check whether value is a number.\n    if (isNaN(value)) return false;\n\n    //Value should be cast to number\n    value = Number(value);\n\n    if (\n      params.data_id === 'a' &&\n      value > Number(maxInputParams.newValue ?? maxInputParams.value)\n    ) {\n      return false;\n    }\n\n    if (\n      params.data_id === 'b' &&\n      value < Number(minInputParams.newValue ?? minInputParams.value)\n    ) {\n      return false;\n    }\n\n    // Check if the value is within the allowed range\n    return !(value < params.min || value > params.max);\n  }\n\n  // The min max row should only be displayed with the showMinMax property flag.\n  const minmaxClasslist = params.showMinMax\n    ? 'minmax-row'\n    : 'minmax-row display-none';\n\n  const minLabel = mapp.utils.formatNumericValue({\n    value: params.min,\n    ...params,\n  });\n  const maxLabel = mapp.utils.formatNumericValue({\n    value: params.max,\n    ...params,\n  });\n\n  const element = mapp.utils.html.node`\n    <div\n      role=\"group\"\n      data-id=${params.group_id}\n      class=\"input-range multi\"\n      style=${`\n        --min: ${params.min};\n        --max: ${params.max};\n        --a: ${params.val_a};\n        --b: ${params.val_b};`}>\n      <div class=\"label-row\">\n        ${minNumericInput} ${maxNumericInput}\n      </div>\n      <div class=\"track-bg\"></div>\n      <div class=${minmaxClasslist}>\n        <span>${minLabel}</span><span>${maxLabel}</span>\n      </div>\n      <input data-id=\"a\" type=\"range\"\n        name=\"minRangeInput\"\n        min=${params.min}\n        max=${params.max}\n        step=${params.step}\n        value=${params.val_a}\n        oninput=${(e) => onRangeInput(e, params)}/>\n      <input data-id=\"b\" type=\"range\"\n        name=\"maxRangeInput\"\n        min=${params.min}\n        max=${params.max}\n        step=${params.step}\n        value=${params.val_b}\n        oninput=${(e) => onRangeInput(e, params)}/>`;\n\n  // The sliderElement property is required to update the range input on numeric input.\n  minInputParams.sliderElement = element;\n  maxInputParams.sliderElement = element;\n\n  /**\n  @function onRangeInput\n\n  @description\n  Assign value from range type input to associated numericInput element.\n\n  Formatting and numeric checks will be handled by the numericInput element.\n\n  @param {Object} e oninput event from range type input.\n  @param {Object} params params object used to pass additional params to the numericInput input function.\n  */\n  function onRangeInput(e, params) {\n    // Range type input return a string target.value.\n    const val = Number(e.target.value);\n\n    // Check whether input event is from minRangeInput.\n    if (e.target.dataset.id === 'a') {\n      //Needed to indicate that the change is coming from a slider element\n      minInputParams.onRangeInput = true;\n      minNumericInput.value = val;\n\n      // Trigger formatting and numeric checks.\n      minNumericInput.dispatchEvent(new Event('change'));\n    }\n\n    // Check whether input event is from maxRangeInput.\n    if (e.target.dataset.id === 'b') {\n      //Needed to indicate that the change is coming from a slider element\n      maxInputParams.onRangeInput = true;\n      maxNumericInput.value = val;\n\n      // Trigger formatting and numeric checks.\n      maxNumericInput.dispatchEvent(new Event('change'));\n    }\n  }\n\n  const range = params.max - params.min;\n\n  if (!range) {\n    return mapp.utils.html.node`<div>No available range for slider element.`;\n  }\n\n  return element;\n}\n", "/**\n### /ui/elements/themeLegendSwitch\n\nThe module exports a method to create a switch for theme legends.\n\n@module /ui/elements/themeLegendSwitch\n*/\n\n/**\n@function themeLegendSwitch\n\n@description\nThe method returns a HTMLElement with a button which toggles all label elements in the legend.\n\n@returns {HTMLElement} HTMLElement with nested button.\n*/\n\nexport default function themeLegendSwitch() {\n  return mapp.utils.html`<div\n  class=\"switch-all\"\n  style=\"grid-column: 1/3;\">\n  ${mapp.dictionary.layer_style_switch_caption}\n  <button\n    class=\"bold\"\n    onclick=${(e) => {\n      const allSwitches = [\n        ...e.target.closest('.legend').querySelectorAll('.switch'),\n      ];\n      const disabledSwitches = allSwitches.filter((switch_) =>\n        switch_.classList.contains('disabled'),\n      );\n\n      if (\n        disabledSwitches.length == 0 ||\n        disabledSwitches.length == allSwitches.length\n      ) {\n        // if all switches are either enabled or disabled, click on all\n        allSwitches.forEach((switch_) => switch_.click());\n      } else {\n        // if only some of them are enabled, click only on disabled ones\n        disabledSwitches.forEach((switch_) => switch_.click());\n      }\n    }}>${mapp.dictionary.layer_style_switch_all}</button>.`;\n}\n", "/**\n### /ui/elements/toast\n\nExports the toast element method as mapp.ui.elements.toast()\n\n@module /ui/elements/toast\n*/\n\n/**\n@function toast\n\n@description\nThe toast method creates and appends a toast HTMLElement to the document body.\n\nThe method returns a promise which will resolve to the value of a button element defined in the actions array.\n\n```js\nconst toast = mapp.ui.elements.toast({\n\tlogo: \"https://geolytix.github.io/public/mapp_v4/emblem.svg\",\n\tcontent: 'Hello from ui toast!',\n\tactions: [{\n\t\tlabel: 'Accept',\n\t\tvalue: 'true',\n\t\tclasslist: 'bold raised accept',\n\t\tcallback: (e, params) => console.log(e)\n\t  },\n\t  {\n\t\tlabel: 'Reject',\n\t\tclasslist: 'bold raised reject',\n\t\tvalue: 'false',\n\t\tcallback: (e, params) => console.log(e)\n\t  }]\n});\n```\n\nWithout any actions provided the toast element will disappear after a timeout params in ms.\n\n@param {Object} params Params for the toast element.\n@property {array} [params.actions] An array of action objects to generate toast element buttons.\n@property {string} [params.data_id='ui-elements-toast'] The data-id attribute value for the element.\n@property {string} [params.logo] A src string for a logo element.\n@property {string} [params.timeout=3000] A toast with out action elements will disappear after the timeout in ms.\n@property {boolean} [params.close] An optional button to close the toast will be added to the toast element.\n@property {string} [params.accept] Shorthand for accept button. String value will be used for the label.\n@property {string} [params.cancel] Shorthand for cancel button. String value will be used for the label.\n@property {string} [params.classlist] list of classes to apply on the button, optional. Example: \"raised bold accept\".\n@property {HTMLElement} [params.content] HTML to display in the toast container. Can be text with links etc. Defaults to generic text.\n@returns {Promise} The promise will resolve to the value of the button element.\n*/\nexport default function toast(params = {}) {\n  params.data_id ??= 'ui-elements-toast';\n  params.content ??= 'Set custom HTML content in element configuration.';\n\n  params.actions ??= [];\n\n  if (params.accept) {\n    params.actions.push({\n      label: typeof params.accept === 'string' ? params.accept : 'Accept',\n    });\n  }\n\n  if (params.cancel) {\n    params.actions.push({\n      label: typeof params.accept === 'string' ? params.cancel : 'Cancel',\n    });\n  }\n\n  return new Promise((resolve) => {\n    let closeBtn;\n    if (params.close) {\n      closeBtn = mapp.utils.html`\n        <button class=\"notranslate material-symbols-outlined close\"\n          onclick=${hide_toast}>`;\n    }\n\n    const actions = params.actions?.map((action) => {\n      // default styling if unset\n      action.classlist ??= 'bold raised primary';\n      // Use label property as default for value.\n      action.value ??= action.label;\n      return mapp.utils.html`<button class=\"${action.classlist}\"\n        value=${action.value}\n        onclick=${(e) => hide_toast(e, action)}>${action.label}`;\n    });\n\n    if (!actions.length) {\n      params.timeout ??= 3000;\n\n      setTimeout(hide_toast, params.timeout);\n    }\n\n    const logo =\n      params.logo &&\n      mapp.utils.html`<div class=\"toast-logo\"><img src=${params.logo}>`;\n\n    const container = mapp.utils.html.node`\n      <div data-id=${params.data_id} class=\"toast\">\n      ${closeBtn}\n      ${logo}\n      ${params.content}\n      <div class=\"actions\">\n      ${actions}\n      </div>`;\n\n    document.body.append(container);\n\n    function hide_toast(e, action) {\n      container.classList.add('ease-out');\n\n      // element removed in a timeout so that hide smooth animation can complete\n      setTimeout(function () {\n        container.remove();\n      }, 1200);\n\n      if (action?.callback instanceof Function) action.callback(e);\n\n      resolve(e?.target.value);\n    }\n  });\n}\n", "/**\n## ui/elements/tooltip\nExports tooltip HTML document fragment.\n\n@function ui/elements/tooltip\n*/\n\n/**\nmapp.ui.elements.tooltip(params)\n\n@description\nAdds an inline \"help\" symbol to indicate that the closest sibling has a tooltip information.\n\n```js\nconst tooltip = mapp.ui.elements.tooltip({\n   content: \"My tooltip text\"\n});\n\nIn order to use tooltip symbol on entries, set `entry.tooltip = <text>` to display.\n```\n\n@function tooltip\n@param {Object} params Params for the tooltip element.\n@property {string} [params.data_id='ui-elements-tooltip'] The data-id attribute value for the element, optional.\n@property {string} [params.content] Text to display on mouseover. Required, if undefined tooltip creation will be skipped.\n@return {HTMLElement} The tooltip HTML node.\n*/\nexport default function tooltip(params = {}) {\n  params.data_id ??= 'ui-elements-tooltip';\n\n  if (!params.content) {\n    console.warn(\n      `mapp.ui.elements.tooltip: content for ${params.data_id} not provided.`,\n    );\n    return;\n  }\n\n  params.node = mapp.utils.html.node`<span \n    data-id=${params.data_id}\n    title=${params.content}\n    class=\"tooltip material-symbols-outlined notranslate\">help</span>`;\n\n  return params.node;\n}\n", "/**\nExports the default userLocale element method as mapp.ui.elements.userLocale().\n\n@module ui/elements/userLocale\n*/\n\n/**\n@function userLocale\n\n@description\nReturns a panel with an input field to define the userlocale name and buttons to either put (create or overwrite) a stored userlocale or delete a stored userlocale.\nThe panel will be disabled during the transaction to save or remove a user locale.\n\n@param {Object} params The userLocale config from the locale.\n@param {Object} mapview The mapview object.\n@returns {HTMLElement} The panel element containing the userLocale interface.\n*/\n\nexport default function userLocale(params, mapview) {\n  params.localeInput = mapp.utils.html.node`<input\n    type=\"text\" value=\"${decodeURIComponent(mapview.locale.name) || mapview.locale.key}\">`;\n\n  params.ulLocales = mapp.utils.html.node`<div class=\"user-locales\">`;\n\n  params.panel = mapp.utils.html.node`\n  <div>\n    <p>${mapp.dictionary.user_locale_specific}</p>\n    <p>${mapp.dictionary.user_locale_context}</p>\n    <br>\n    <h3>${mapp.dictionary.user_locale_save}</h3>\n\n    <div style=\"display:flex;\">${params.localeInput}\n      <button style=\"font-size: 1.5em;\"\n        onclick=${async () => await saveLocale(params, mapview)}>\n        <span class=\"notranslate material-symbols-outlined\">save</span>\n      </button>\n    </div>\n    ${params.ulLocales}`;\n\n  // Call the listLocales method to render the list of userlocales.\n  listLocales(params, mapview);\n\n  // Return the panel as content to be displayed.\n  return params.panel;\n}\n\n/**\n@function removeLocale\n@description\nThe removeLocale method removes the userlocale from the mapview and calls the listLocales method to update the list of userlocales.\n@param {Object} params The userLocale config from the locale.\n@param {Object} mapview The mapview object.\n@param {string} locale_name The name of the userlocale to be removed.\n*/\nasync function removeLocale(params, mapview, locale_name) {\n  params.panel.classList.add('disabled');\n  mapview.locale.name = locale_name;\n  await mapp.utils.userLocale.remove(mapview.locale);\n  listLocales(params, mapview);\n  params.panel.classList.remove('disabled');\n}\n\n/**\n@function saveLocale\n@description\nThe saveLocale method saves the userlocale to the mapview and calls the listLocales method to update the list of userlocales.\n*/\nasync function saveLocale(params, mapview) {\n  params.panel.classList.add('disabled');\n  mapview.locale.name = encodeURIComponent(params.localeInput.value);\n  const response = await mapp.utils.userLocale.putLocale(mapview);\n\n  if (response === mapview.locale.name) {\n    listLocales(params, mapview);\n    params.panel.classList.remove('disabled');\n  }\n}\n\n/**\n@function listLocales\n\n@description\nThe listlocales method requests an array of userlocales keys and names from the userLocale.list utility method and renders a list of links for these userLocale.\nThe list includes a delete button for each userLocale, which when clicked will remove the userLocale from the mapview and update the list of userlocales.\n*/\nasync function listLocales(params, mapview) {\n  const locales = await mapp.utils.userLocale.list(mapview.locale.workspace);\n\n  if (!locales.length) {\n    mapp.utils.render(params.ulLocales, mapp.utils.html`<div>`);\n    return;\n  }\n\n  const list = locales.map((locale) => {\n    const removeBtn = mapp.utils.html`<button\n    onclick=${async (e) => await removeLocale(params, mapview, locale.name)}>\n      <span class=\"notranslate material-symbols-outlined\">delete</span>`;\n\n    const href = `${mapp.host}?locale=${locale.key}&userlocale=${encodeURIComponent(locale.name)}`;\n\n    return mapp.utils\n      .html`<li>${removeBtn}<a href=${href}>${decodeURIComponent(locale.name)}`;\n  });\n\n  mapp.utils.render(\n    params.ulLocales,\n    mapp.utils.html`\n    <h3>${mapp.dictionary.user_locale_desc}</h3>\n    <ul>${list}`,\n  );\n}\n", "/**\n## /ui/elements\n\nThe module exports a collection of ui element modules.\n\n@module /ui/elements\n\n@requires module:/ui/elements/alert\n@requires module:/ui/elements/btnPanel\n@requires module:/ui/elements/card\n@requires module:/ui/elements/chkbox\n@requires module:/ui/elements/confirm\n@requires module:/ui/elements/contextMenu\n@requires module:/ui/elements/control\n@requires module:/ui/elements/dialog\n@requires module:/ui/elements/drawer\n@requires module:/ui/elements/drawing\n@requires module:/ui/elements/dropdown\n@requires module:/ui/elements/dropdown_multi\n@requires module:/ui/elements/helpDialog\n@requires module:/ui/elements/jsoneditor\n@requires module:/ui/elements/layerStyle\n@requires module:/ui/elements/legendIcon\n@requires module:/ui/elements/loginForm\n@requires module:/ui/elements/numericInput\n@requires module:/ui/elements/pills\n@requires module:/ui/elements/registerForm\n@requires module:/ui/elements/searchbox\n@requires module:/ui/elements/slider\n@requires module:/ui/elements/slider_ab\n@requires module:/ui/elements/themeLegendSwitch\n@requires module:/ui/elements/toast\n@requires module:/ui/elements/tooltip\n@requires module:/ui/elements/userLocale\n*/\n\nimport alert from './alert.mjs';\nimport btnPanel from './btnPanel.mjs';\nimport card from './card.mjs';\nimport chkbox from './chkbox.mjs';\nimport confirm from './confirm.mjs';\nimport contextMenu from './contextMenu.mjs';\nimport control from './control.mjs';\nimport dialog from './dialog.mjs';\nimport drawer from './drawer.mjs';\nimport drawing from './drawing.mjs';\nimport dropdown from './dropdown.mjs';\nimport helpDialog from './helpDialog.mjs';\nimport jsoneditor from './jsoneditor.mjs';\nimport layerStyle from './layerStyle.mjs';\nimport legendIcon from './legendIcon.mjs';\nimport loginForm from './loginForm.mjs';\nimport numericInput from './numericInput.mjs';\nimport pills from './pills.mjs';\nimport radio from './radio.mjs';\nimport registerForm from './registerForm.mjs';\nimport searchbox from './searchbox.mjs';\nimport slider from './slider.mjs';\nimport slider_ab from './slider_ab.mjs';\nimport themeLegendSwitch from './themeLegendSwitch.mjs';\nimport toast from './toast.mjs';\nimport tooltip from './tooltip.mjs';\nimport userLocale from './userLocale.mjs';\n\nexport default {\n  alert,\n  btnPanel,\n  card,\n  chkbox,\n  confirm,\n  contextMenu,\n  control,\n  dialog,\n  drawer,\n  drawing,\n  dropdown,\n  helpDialog,\n  jsoneditor,\n  layerStyle,\n  legendIcon,\n  loginForm,\n  numericInput,\n  pills,\n  radio,\n  registerForm,\n  searchbox,\n  slider,\n  slider_ab,\n  themeLegendSwitch,\n  toast,\n  tooltip,\n  userLocale,\n};\n", "/**\n## ui/gazetteer\nModule to export the gazetteer UI element functions used in mapp.\n\n@requires /dictionary\n\n@module /ui/gazetteer\n*/\n\n/**\n@function gazetteer\n@param {Object} gazetteer - The gazetteer configuration object.\n@property {HTMLElement} gazetteer.target - The target element to append the gazetteer to.\n@property {string} gazetteer.placeholder - The placeholder text for the search input.\n@property {string} [gazetteer.provider] - The external gazetteer provider to use for searching.\n@returns {Object} The gazetteer object.\n*/\nexport default (gazetteer) => {\n  gazetteer = {\n    ...gazetteer,\n    ...mapp.ui.elements.searchbox({\n      name: 'gazetteer-search-input',\n      placeholder: gazetteer.placeholder,\n      searchFunction: search,\n      target: gazetteer.target,\n    }),\n  };\n\n  function search(e) {\n    // Clear results\n    gazetteer.list.innerHTML = '';\n\n    // Only search if value has length.\n    if (!e.target.value.length) return;\n\n    // Get possible coordinates from input.\n    const ll = e.target.value.split(',').map(parseFloat);\n\n    // Check whether coordinates are valid float values.\n    if (\n      ll.length === 2 &&\n      ll.every((n) => typeof n === 'number' && !isNaN(n) && isFinite(n))\n    ) {\n      // Check if both coordinates are within valid range (latitude: -90 to 90, longitude: -180 to 180).\n      const [lat, lng] = ll;\n\n      if (lat >= -90 && lat <= 90 && lng >= -180 && lng <= 180) {\n        gazetteer.list.appendChild(mapp.utils.html.node`\n        <li onclick=${(e) => {\n          mapp.utils.gazetteer.getLocation(\n            {\n              label: `Latitude:${ll[0]}, Longitude:${ll[1]}`,\n              lat: ll[0],\n              lng: ll[1],\n              source: 'Coordinates',\n            },\n            gazetteer,\n          );\n        }}><span>Latitude:${ll[0]}, Longitude:${ll[1]}</span>`);\n\n        // Do not search if coordinates are provided.\n        return;\n      } else {\n        // Handle the case where coordinates are not within valid ranges.\n        // Add the error as a list item\n        gazetteer.list.appendChild(mapp.utils.html.node`\n          <li style=\"color: red;\">\n            <span>${mapp.dictionary.invalid_lat_long_range}</span>`);\n      }\n    }\n\n    // An external gazetteer provider is requested\n    if (gazetteer.provider) {\n      // Check whether the gazetteer provider is available.\n      if (!Object.hasOwn(mapp.utils.gazetteer, gazetteer.provider)) {\n        console.warn('Requested gazetteer service not available');\n      } else {\n        // Query the external gazetteer provider\n        mapp.utils.gazetteer[gazetteer.provider](e.target.value, gazetteer);\n      }\n    }\n\n    // Request datasets gazetteer\n    mapp.utils.gazetteer.datasets(e.target.value, gazetteer);\n  }\n};\n", "/**\n## /ui/layers/filters\n\nThe ui/layers/filters module exports a lookup object for the different layer filter type methods.\n\n- like\n- match\n- numeric\n- integer\n- in\n- ni\n- date\n- datetime\n- boolean\n- null\n\nDictionary entries:\n- identical_values_filter\n- no_data_filter\n- layer_filter_greater_than\n- layer_filter_less_than\n- filter_searchbox_placeholder\n- no_results\n\n@requires /dictionary\n\n@module /ui/layers/filters\n*/\n\nconst filterMethods = {\n  applyFilter,\n  boolean: filter_boolean,\n  date: filter_date,\n  datetime: filter_date,\n  in: filter_in,\n  integer: filter_numeric,\n  like: filter_text,\n  match: filter_text,\n  ni: filter_in,\n  null: filter_null,\n  numeric: filter_numeric,\n  removeFilter,\n  resetFilter,\n  generateMinMax,\n};\n\nexport default filterMethods;\n\n/**\n@function applyFilter\n\n@description\nThe applyFilter method is used to debounce the layer.reload() from filter. This is required in order to not fire layer [data] reload in quick succession by moving a slider element.\n\nThe 'changeEnd' event is dispatched the layer.mapview in order to trigger the update of dataviews with the mapChange flag.\n\n@param {Object} layer The layer to reload.\n*/\nlet timeout;\nfunction applyFilter(layer) {\n  clearTimeout(timeout);\n\n  // Debounce layer reload by 500\n  timeout = setTimeout(() => {\n    layer.reload();\n\n    layer.filter.list?.forEach((filter) => {\n      filter.histogram?.update?.();\n    });\n\n    // The 'changeEnd' event triggers dataview updates with the mapChange flag.\n    layer.mapview?.target.dispatchEvent(new Event('changeEnd'));\n  }, 500);\n}\n\n/**\n@function deleteFilter\n\n@description\nThe deleteFilter function deletes the filter in the layer.filter.current object. And applies the changes to the layer.\n\n@param {layer} layer The layer to reload.\n@property {Object} layer.filter The filter thats active on the layer.\n@param {Object} filter The filter definition.\n@property {Object} filter.field The field the filter works on.\n@property {String} filter.type The filters' type e.g like, in, etc.\n*/\nfunction deleteFilter(layer, filter) {\n  if (layer.filter.current[filter.field]) {\n    if (Object.hasOwn(layer.filter.current[filter.field], filter.type)) {\n      // Delete type property from filter\n      delete layer.filter.current[filter.field][filter.type];\n    }\n\n    if (Object.hasOwn(layer.filter.current, filter.field)) {\n      // Delete [filter] field property.\n      delete layer.filter.current[filter.field];\n    }\n\n    // Delete [filter] min if not fixed as Min.\n    if (isNaN(filter.Min)) {\n      delete filter.min;\n    }\n\n    // Delete [filter] max if not fixed as Max.\n    if (isNaN(filter.Max)) {\n      delete filter.max;\n    }\n  }\n\n  mapp.ui.layers.filters.applyFilter(layer);\n}\n\n/**\n@function removeFilter\n\n@description\nThe removeFilter function removes the selected filter from the panel.\nCalls {@link module:/ui/layers/filters~applyFilter} once the card has been removed to update the layer.\n\nHides the clearAll and resetAll button if they are no more cards in the panel.\n\n@param {layer} layer The layer to reload.\n@param {Object} filter The filter definition.\n@property {HTMLElement} [filter.card] The html element of the filter.\n@property {HTMLElement} [filter.li] The list element if applicable.\n*/\nfunction removeFilter(layer, filter) {\n  deleteFilter(layer, filter);\n\n  filter.li?.classList.remove('selected');\n\n  filter.card?.remove();\n\n  filter.histogram?.removeChangeEnd?.();\n  // remove selected flag to allow for selection in dropdown element.\n  delete filter.selected;\n\n  delete filter.card;\n\n  if (!layer.filter.list?.some((filter) => filter.card)) {\n    layer.filter.clearAll instanceof HTMLElement &&\n      layer.filter.clearAll.style.setProperty('display', 'none');\n    layer.filter.resetAll instanceof HTMLElement &&\n      layer.filter.resetAll.style.setProperty('display', 'none');\n    layer.filter.feature_count instanceof HTMLElement &&\n      layer.filter.feature_count.style.setProperty('display', 'none');\n  }\n}\n\n/**\n@function resetFilter\n\n@description\nThe resetFilter method deletes the filter and replaces the filter.card with a new card with initial filter config.\n\n@param {layer} layer The layer to reload.\n@param {Object} filter The filter definition.\n@property {HTMLElement} filter.card The html element of the filter.\n*/\nasync function resetFilter(layer, filter) {\n  deleteFilter(layer, filter);\n\n  // Get interface content for filter card.\n  if (!filter.card) return;\n\n  filter.content = [\n    await mapp.ui.layers.filters[filter.type](layer, filter),\n  ].flat();\n\n  const newCard = mapp.ui.elements.card(filter);\n\n  filter.card.replaceWith(newCard);\n\n  filter.card = newCard;\n}\n\n/**\n@function filter_text\n@description Creates an input element for filtering text values.\n@param {Object} layer - The layer object to apply the filter to.\n@param {Object} filter - The filter configuration object.\n@returns {HTMLElement} The input element for text filtering.\n*/\nfunction filter_text(layer, filter) {\n  return mapp.utils.html.node`\n  <input\n    type=\"text\"\n    onkeyup=${(e) => {\n      if (!e.target.value.length) {\n        // Delete filter for empty input.\n        delete layer.filter.current[filter.field];\n      } else {\n        layer.filter.current[filter.field] ??= {};\n        layer.filter.current[filter.field][filter.type] = encodeURIComponent(\n          `${(filter.leading_wildcard && '%') || ''}${e.target.value}`,\n        );\n      }\n      filterMethods.applyFilter(layer);\n    }}>`;\n}\n\n/**\n@function filter_boolean\n@description Creates a checkbox element for filtering boolean values.\n@param {Object} layer - The layer object to apply the filter to.\n@param {Object} filter - The filter configuration object.\n@returns {HTMLElement} The checkbox element for boolean filtering.\n*/\nfunction filter_boolean(layer, filter) {\n  function booleanFilter(checked) {\n    layer.filter.current[filter.field] = {\n      boolean: checked,\n    };\n    filterMethods.applyFilter(layer);\n  }\n\n  booleanFilter(false);\n\n  return mapp.ui.elements.chkbox({\n    label: filter.label || filter.title || 'chkbox',\n    onchange: booleanFilter,\n  });\n}\n\n/**\n@function filter_null\n@description Creates a checkbox element for filtering null values.\n@param {Object} layer - The layer object to apply the filter to.\n@param {Object} filter - The filter configuration object.\n@returns {HTMLElement} The checkbox element for null filtering.\n*/\nfunction filter_null(layer, filter) {\n  function nullFilter(checked) {\n    layer.filter.current[filter.field] = {\n      null: checked,\n    };\n    filterMethods.applyFilter(layer);\n  }\n\n  nullFilter(false);\n\n  return mapp.ui.elements.chkbox({\n    label: filter.label || filter.title || 'chkbox',\n    onchange: nullFilter,\n  });\n}\n\n/**\n@function generateMinMax\n@description\nQuery the min and max values for a numeric filter field.\n\n@param {layer} layer MAPP layer typedef object.\n@param {Object} filter Filter object.\n@property {string} filter.field Field to filter.\n@property {numeric} [filter.min] Min bounds.\n@property {numeric} [filter.max] Max bounds.\n@property {string} [filter.minmax_query] Query template for min max values.\n*/\nasync function generateMinMax(layer, filter) {\n  const queryParams = mapp.utils.queryParams({\n    layer: layer,\n    queryparams: {\n      table: true,\n      template: 'field_minmax',\n      field: filter.field,\n    },\n    viewport: layer.filter.viewport,\n  });\n\n  queryParams.filter = structuredClone(layer.filter.current);\n\n  // The filter field itself must be removed from the queryParams filter as otherwise the result would never increase.\n  delete queryParams.filter[filter.field];\n\n  const paramString = mapp.utils.paramString(queryParams);\n\n  const response = await mapp.utils.xhr(\n    `${layer.mapview.host}/api/query?${paramString}`,\n  );\n\n  // Assign min, max from response if not a number.\n  let min = isNaN(filter.min) ? response.minmax[0] : filter.min;\n  let max = isNaN(filter.max) ? response.minmax[1] : filter.max;\n\n  // overwrite min max from response if viewport is applied\n  if (layer.filter?.viewport) {\n    min = response.minmax[0];\n    max = response.minmax[1];\n  }\n\n  // Parse min, max as interger or float depending on type.\n  // Round integer to be correct up or down.\n  filter.min = filter.type === 'integer' ? Math.round(min) : parseFloat(min);\n  filter.max = filter.type === 'integer' ? Math.round(max) : parseFloat(max);\n\n  filter.min = filter.val_a < filter.min ? filter.val_a : filter.min;\n  filter.max = filter.val_b > filter.max ? filter.val_b : filter.max;\n}\n\n/**\n@function filter_numeric\n\n@description\nReturns numeric inputs and range slider element as UI for numeric layer filter.\n\nNumeric layer filter are a combination of an LTE (less-than-[or]equal) and GTE (greater-than-[or]equal) filter for a field defined in a matching entry field.\n\n@param {layer} layer MAPP layer typedef object.\n@param {Object} filter Filter object.\n@property {string} filter.field Field to filter.\n@property {numeric} [filter.min] Min bounds.\n@property {numeric} [filter.max] Max bounds.\n@property {numeric} [filter.step] Step for renage slider.\n\n@returns {Promise<HTMLElement>}\nThe filter UI elements.\n*/\n\nasync function filter_numeric(layer, filter) {\n  // Find infoj entry and merge into the filter object.\n  const entry = layer.infoj.find((entry) => entry.field === filter.field);\n\n  Object.assign(filter, entry);\n\n  delete filter.val_a;\n  delete filter.val_b;\n\n  // Fix min and max as Min and Max if [finite] number.\n  filter.Min ??= Number.isFinite(filter.min) ? filter.min : undefined;\n  filter.Max ??= Number.isFinite(filter.max) ? filter.max : undefined;\n\n  if (isNaN(filter.max) || isNaN(filter.min)) {\n    // Query min and max if not implicit.\n    await generateMinMax(layer, filter);\n  }\n\n  // If filter.min and filter.max are not numeric values, return a message.\n  if (isNaN(filter.min) || isNaN(filter.max)) {\n    // Return text to indicate that the min and max values are not defined.\n    return mapp.utils.html.node`<div>${mapp.dictionary.no_data_filter}</div>`;\n  }\n\n  filter.step ??= filter.type === 'integer' ? 1 : 0.01;\n\n  // Assign the range min / max as layer filter if not already defined.\n  layer.filter.current[filter.field] = Object.assign(\n    {\n      gte: Number(filter.min),\n      lte: Number(filter.max),\n    },\n    layer.filter.current[filter.field],\n  );\n\n  filterMethods.applyFilter(layer);\n\n  // Create affix for rangeslider input label.\n  const affix =\n    filter.prefix || filter.suffix\n      ? `(${(filter.prefix || filter.suffix).trim()})`\n      : '';\n\n  filter.label_a ??= `${mapp.dictionary.layer_filter_greater_than} ${affix}`;\n\n  filter.label_b ??= `${mapp.dictionary.layer_filter_less_than} ${affix}`;\n\n  filter.val_a = layer.filter.current?.[filter.field]?.gte;\n\n  filter.val_b = layer.filter.current?.[filter.field]?.lte;\n\n  filter.callback_a = (val) => {\n    layer.filter.current[filter.field].gte = val;\n    filter.val_a = Number(val);\n    filterMethods.applyFilter(layer);\n  };\n\n  filter.callback_b = (val) => {\n    layer.filter.current[filter.field].lte = val;\n    filter.val_b = Number(val);\n    filterMethods.applyFilter(layer);\n  };\n\n  filter.slider = mapp.ui.elements.slider_ab(filter);\n\n  await histogram(filter, layer);\n\n  const node = mapp.utils.html`\n    ${filter.histogram?.container}\n    ${filter.slider}`;\n\n  return node;\n}\n\n/**\n@function histogram\n@description\nCreates a histogram element based on configuration in the numeric filter object.\n@param {Object} filter Filter object.\n@param {layer} layer MAPP layer on which the filter is applied.\n@property {Object} [filter.histogram] Configuration object for a histogram dataview.\n*/\nasync function histogram(filter, layer) {\n  if (!filter.histogram) return;\n\n  if (filter.histogram === true) {\n    // If histogram is set to true, make histogram an object.\n    filter.histogram = {};\n  }\n\n  filter.histogram.container ??= mapp.utils.html.node`<div>`;\n  filter.histogram.dataview ??= 'histogram';\n  filter.histogram.options ??= {\n    tooltip: true,\n  };\n  filter.histogram.target ??= filter.histogram.container;\n  filter.histogram.layer ??= layer;\n\n  filter.histogram.queryparams ??= {\n    field: filter.field,\n    table: true,\n    filter: true,\n  };\n\n  filter.histogram.viewport ??= layer.filter.viewport;\n\n  if (!filter.histogram.update) {\n    await mapp.ui.Dataview(filter.histogram);\n  }\n\n  if (filter.histogram.viewport) {\n    layer.mapview.Map.getTargetElement().addEventListener(\n      'changeEnd',\n      changeEnd,\n    );\n\n    filter.histogram.removeChangeEnd = () => {\n      layer.mapview.Map.getTargetElement().removeEventListener(\n        'changeEnd',\n        changeEnd,\n      );\n    };\n\n    function changeEnd() {\n      filter.histogram.update();\n    }\n  }\n}\n\n/**\n@function filter_in\n\n@description\nFilter interface elements for `in` and `ni` type layer filter are returned from the filter_in() method.\n\nThe method is async to wait for a distinct values query to populate the filter type [eg. in or ni] values array.\n\nA list of checkbox elements will be returned as default interface without a `dropdown`, `dropdown_pills`, or `searchbox` flag.\n\n@param {Object} layer Decorated MAPP Layer Object.\n@param {Object} filter The filter object.\n@param {string} filter.field The filter field.\n@property {Array} [filter.in] Array of values for in type filter.\n@property {Array} [filter.ni] Array of values for ni type filter.\n@property {Boolean} [filter.dropdown] Create dropdown [pills] filter interface.\n@property {Boolean} [filter.dropdown_pills] Create dropdown [pills] filter interface.\n@property {Boolean} [filter.searchbox] Create searchbox [pills] filter interface.\n@returns {Promise<HTMLElement>} Filter interface elements.\n*/\nasync function filter_in(layer, filter) {\n  // Check whether a filter type values array has been provided.\n  if (!Array.isArray(filter[filter.type])) {\n    const filter_current = structuredClone(layer.filter?.current);\n\n    // The distinct_values query should not be filtered on the field.\n    delete filter_current?.[filter.field];\n\n    // Query distinct field values from the layer table.\n    const response = await mapp.utils.xhr(\n      `${layer.mapview.host}/api/query?` +\n        mapp.utils.paramString({\n          field: filter.field,\n          filter: filter_current,\n          layer: layer.key,\n          locale: layer.mapview.locale.key,\n          table: layer.tableCurrent(),\n          template: 'distinct_values',\n        }),\n    );\n\n    if (!response) {\n      console.warn(\n        `Distinct values query did not return any values for field ${filter.field}`,\n      );\n\n      // Set a div with a message that the field contains no data.\n      return mapp.utils.html.node`<div>${mapp.dictionary.no_data_filter}</div>`;\n    }\n\n    filter[filter.type] = [response]\n\n      // Flatten response in array to account for the response being a single record and not an array.\n      .flat()\n\n      // Map the entry field from response records.\n      .map((record) => record[filter.field])\n\n      // Filter out null values.\n      .filter((val) => val !== null);\n  }\n\n  // Create set to check for current values in the filter array.\n  const chkSet = new Set(\n    layer.filter?.current[filter.field]?.[filter.type] || [],\n  );\n\n  if (filter.dropdown || filter.dropdown_pills || filter.dropdown_search) {\n    const dropdown = mapp.ui.elements.dropdown({\n      callback: async (e, options) => {\n        if (!options.length) {\n          // Remove empty array filter.\n          delete layer.filter.current[filter.field];\n        } else {\n          // Set filter values array from options.\n          Object.assign(layer.filter.current, {\n            [filter.field]: {\n              [filter.type]: options,\n            },\n          });\n        }\n\n        filterMethods.applyFilter(layer);\n      },\n      field: filter.field,\n      search: filter.dropdown_search,\n      entries: filter[filter.type].map((val) => ({\n        option: val,\n        selected: chkSet.has(val),\n        title: val,\n      })),\n      inputfilter: true,\n      keepPlaceholder: filter.dropdown_pills,\n      maxHeight: 300,\n      multi: true,\n      pills: filter.dropdown_pills,\n      placeholder:\n        filter.placeholder || mapp.dictionary.layer_filter_dropdown_select,\n    });\n\n    return mapp.utils.html.node`<div class=\"filter\">${dropdown}`;\n  }\n\n  if (filter.searchbox) {\n    const searchbox_filter = mapp.utils.html.node`<div class=\"filter\">`;\n\n    const pillComponent = mapp.ui.elements.pills({\n      addCallback: (val, pills) => {\n        Object.assign(layer.filter.current, {\n          [filter.field]: {\n            [filter.type]: [...pills],\n          },\n        });\n        filterMethods.applyFilter(layer);\n      },\n      removeCallback: (val, pills) => {\n        if (pills.size === 0) {\n          searchbox.input.value = null;\n\n          //if nothing left selected delete the entire filter\n          delete layer.filter.current[filter.field];\n        } else {\n          Object.assign(layer.filter.current, {\n            [filter.field]: {\n              [filter.type]: [...pills],\n            },\n          });\n        }\n\n        filterMethods.applyFilter(layer);\n      },\n      target: searchbox_filter,\n    });\n\n    const searchbox = mapp.ui.elements.searchbox({\n      placeholder: mapp.dictionary.filter_searchbox_placeholder,\n      searchFunction: (e) => {\n        searchbox.list.innerHTML = '';\n\n        if (!e.target.value) return; // nothing to match\n\n        const pattern = e.target.value;\n\n        const filtered = filter[filter.type].filter((val) =>\n          // val may not be string.\n          val\n            .toString()\n            .toLowerCase()\n            .startsWith(pattern.toLowerCase()),\n        );\n\n        if (!filtered.length) {\n          searchbox.list.append(mapp.utils.html.node`\n            <li><span>${mapp.dictionary.no_results}`);\n\n          return;\n        }\n\n        filtered\n          .filter((val) => !pillComponent.pills.has(val)) // only those not selected already\n          .filter((val, i) => i < 9)\n          .forEach((val) => {\n            // Append li element to searchbox.list\n            searchbox.list.append(mapp.utils.html.node`\n              <li onclick=${() => {\n                // Add pill not yet in pillComponent\n                !pillComponent.pills.has(val) && pillComponent.add(val);\n              }}>${val}`);\n          });\n      },\n      target: searchbox_filter,\n    });\n\n    return mapp.utils.html.node`${searchbox_filter}`;\n  }\n\n  const chkBoxes = filter[filter.type].map((val) =>\n    mapp.ui.elements.chkbox({\n      checked: chkSet.has(val),\n      label: val,\n      onchange: (checked, val) => {\n        if (checked) {\n          // Create filter object if it doesn't exist.\n          if (!layer.filter.current[filter.field]) {\n            layer.filter.current[filter.field] = {};\n          }\n\n          // Create empty in array if it doesn't exist.\n          if (!layer.filter.current[filter.field][filter.type]) {\n            layer.filter.current[filter.field][filter.type] = [];\n          }\n\n          // Add value to filter array.\n          layer.filter.current[filter.field][filter.type].push(val);\n        } else {\n          // Get index of value in filter array.\n          const idx =\n            layer.filter.current[filter.field][filter.type].indexOf(val);\n\n          // Splice filter array on idx.\n          layer.filter.current[filter.field][filter.type].splice(idx, 1);\n\n          // Remove filter object if it is empty.\n          if (!layer.filter.current[filter.field][filter.type].length) {\n            delete layer.filter.current[filter.field];\n          }\n        }\n\n        filterMethods.applyFilter(layer);\n      },\n      val: val,\n    }),\n  );\n\n  return mapp.utils.html.node`<div class=\"filter\">${chkBoxes}`;\n}\n\n/**\n@function filter_date\n@description Creates input elements for filtering date values.\n@param {Object} layer - The layer object to apply the filter to.\n@param {Object} filter - The filter configuration object.\n@returns {HTMLElement} The input elements for date filtering.\n*/\nfunction filter_date(layer, filter) {\n  const inputAfter = mapp.utils.html.node`\n    <input\n      data-id=\"inputAfter\"\n      onchange=${onClose}\n      type=${(filter.type === 'datetime' && 'datetime-local') || 'date'}>`;\n\n  const inputBefore = mapp.utils.html.node`\n    <input\n      data-id=\"inputBefore\"\n      onchange=${onClose}\n      type=${(filter.type === 'datetime' && 'datetime-local') || 'date'}>`;\n\n  function onClose(e) {\n    if (e.target.dataset.id === 'inputAfter') {\n      layer.filter.current[filter.field] = Object.assign(\n        layer.filter.current[filter.field] || {},\n        {\n          gt: new Date(e.target.value).getTime() / 1000,\n        },\n      );\n    }\n\n    if (e.target.dataset.id === 'inputBefore') {\n      layer.filter.current[filter.field] = Object.assign(\n        layer.filter.current[filter.field] || {},\n        {\n          lt: new Date(e.target.value).getTime() / 1000,\n        },\n      );\n    }\n\n    filterMethods.applyFilter(layer);\n  }\n\n  return mapp.utils.html`\n    <div style=\"\n      display: grid;\n      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));\n      grid-gap: 5px;\">\n      <label>Date after\n        ${inputAfter}</label>\n      <label>Date before\n        ${inputBefore}</label>`;\n}\n", "/**\n### /ui/layers/legends/basic\n\nThe basic theme legend module exports the basicTheme to the `ui.layers.legend{}` library object.\n\n@requires /ui/elements/legendIcon\n\n@module /ui/layers/legends/basic\n*/\n\n/**\n@function basicTheme\n\n@description\nThe basicTheme method creates and returns a basic theme legend for the current layer.style.theme.\n\n@param {layer} layer The decorated mapp layer.\n\n@returns {HTMLElement} The basic theme legend element.\n*/\nexport default function basicTheme(layer) {\n  const theme = layer.style.theme;\n\n  theme.legend ??= {};\n\n  theme.legend.grid = [];\n\n  // Make 'left' default alignment.\n  theme.legend.alignContents ??= 'left';\n  theme.legend.alignContents += ' contents';\n\n  layer.style.theme.style ??= {};\n  layer.style.theme.style.width ??= 24;\n  layer.style.theme.style.height ??= 24;\n\n  const legendIcon = mapp.ui.elements.legendIcon(layer.style.theme.style);\n\n  theme.legend.grid.push(mapp.utils.html`\n    <div \n      class=\"contents\">\n      ${legendIcon}<div class=\"label\" style=\"grid-column: 2\";>${layer.style.theme.label}`);\n\n  theme.legend.node = mapp.utils.html.node`\n    <div class=\"legend\">\n    <div class=\"contents-wrapper grid\">${theme.legend.grid}`;\n\n  layer.style.legend ??= theme.legend.node;\n\n  if (layer.style.legend) {\n    layer.style.legend.replaceChildren(...theme.legend.node.children);\n  }\n\n  return theme.legend.node;\n}\n", "/**\n## /ui/layers/legends/utils\n\nThe categorized theme legend module exports the categorizedTheme to the `ui.layers.legend{}` library object.\n\nDictionary entries:\n  - layer_style_switch_caption\n  - layer_style_switch_all\n  - layer_style_cluster\n\n@requires /dictionary\n\n@module /ui/layers/legends/utils\n*/\n\n/**\n@function createLegend\n@description\nCreate legend entry for category within a theme.\n\n@param {Object} cat The category object.\n@param {Object} theme The theme configuration object.\n@param {Object} layer The layer object.\n**/\nexport function createLegend(cat, theme, layer) {\n  cat.field ??= theme.field;\n\n  // Check whether cat is in current filter.\n  cat.disabled ??=\n    layer.filter?.current[cat.field]?.ni?.indexOf(cat.value) >= 0;\n\n  if (layer.featureFields && theme.distribution === 'count') {\n    // Build a params object to pass to the numericFormatter.\n    const params = {\n      value: layer.featureFields[cat.field]?.[cat.value],\n    };\n    cat.count = mapp.utils.formatNumericValue(params);\n    if (!cat.disabled && !cat.count) return;\n  }\n\n  const catLegendIcon = mapp.ui.elements.legendIcon({\n    height: 24,\n    width: 24,\n    ...(cat._style || cat.style),\n  });\n\n  const icon = mapp.utils.html`<div\n      style=\"height: 24px; width: 24px; grid-column: 1;\">\n      ${catLegendIcon}`;\n\n  const classList = `label ${(theme.legend.switch && layer.filter && 'switch') || ''} ${\n    (cat.disabled && 'disabled') || ''\n  }`;\n\n  const cat_label = cat.label + (cat.count ? ` [${cat.count}]` : '');\n\n  // Cat label with filter function.\n  const label = mapp.utils.html.node`<div\n      class=${classList}\n      style=\"grid-column: 2;\n             overflow: hidden;\n             text-overflow: ellipsis;\n             text-wrap: nowrap;\">\n            ${cat_label}`;\n\n  if (theme.legend.switch) label.onclick = (e) => catToggle(e, layer, cat);\n\n  cat.node = mapp.utils.html.node`<div\n      data-id=${cat.value}\n      class=\"${theme.legend.alignContents}\">\n      ${icon}${label}`;\n\n  // Push icon and label into legend grid.\n  theme.legend.grid.push(cat.node);\n}\n\n/**\n@function filterRemove\n\n@description\nRemove the cat value to the current filter.\n\n@param {layer} layer The decorated mapp layer.\n@param {object} cat The cat object from the theme.\n*/\nexport function filterRemove(layer, cat) {\n  if (layer.style.theme.filterOnly) return;\n\n  if (Array.isArray(cat.keys)) {\n    for (const cat of cat.keys) {\n      // Splice key out of the NI array.\n      layer.filter.current[cat.field].ni.splice(\n        layer.filter.current[cat.field].ni.indexOf(key),\n        1,\n      );\n    }\n  } else {\n    // Splice value out of the NI array.\n    layer.filter.current[cat.field].ni.splice(\n      layer.filter.current[cat.field].ni.indexOf(cat.value),\n      1,\n    );\n  }\n\n  // Delete current field filter if NI array is empty.\n  if (!layer.filter.current[cat.field].ni.length) {\n    delete layer.filter.current[cat.field].ni;\n    if (!Object.keys(layer.filter.current[cat.field]).length) {\n      delete layer.filter.current[cat.field];\n    }\n  }\n\n  const filter = layer.filter.list?.find(\n    (f) => f.type === 'ni' && f.field === cat.field,\n  );\n\n  if (filter?.card) {\n    filter.card\n      .querySelector('.filter')\n      .replaceWith(mapp.ui.layers.filters.ni(layer, filter));\n  }\n}\n\n/**\n@function filterAdd\n\n@description\nAdd the cat value to the current filter.\n\n@param {layer} layer The decorated mapp layer.\n@param {object} cat The cat object from the theme.\n*/\nexport function filterAdd(layer, cat) {\n  if (layer.style.theme.filterOnly) return;\n\n  // Create empty field filter object if non exists.\n  if (!layer.filter.current[cat.field]) {\n    layer.filter.current[cat.field] = {};\n  }\n\n  // Create empty NI filter array for field if non exists.\n  if (!layer.filter.current[cat.field].ni) {\n    layer.filter.current[cat.field].ni = [];\n  }\n\n  // Push cat value into the NI filter array.\n  layer.filter.current[cat.field].ni.push(cat.keys || cat.value);\n\n  // Flatten the filter in case of arrays filter.\n  layer.filter.current[cat.field].ni =\n    layer.filter.current[cat.field].ni.flat();\n\n  const filter = layer.filter.list?.find(\n    (f) => f.type === 'ni' && f.field === cat.field,\n  );\n\n  if (filter?.card) {\n    filter.card\n      .querySelector('.filter')\n      .replaceWith(mapp.ui.layers.filters.ni(layer, filter));\n  }\n}\n\n/**\n@function catToggle\n\n@description\nThe method toggles the disabled class on the event target element.\n\nIf toggled [on] the filterAdd method will be called and the style will be set to null.\n\nIf toggled [off] the filterRemove method will be called and the style will be restored from the cat._style.\n\n@param {Event} e The cat label click event.\n@param {layer} layer The decorated mapp layer.\n@param {object} cat The cat object from the theme.\n*/\nexport function catToggle(e, layer, cat) {\n  const toggle = e.target.classList.toggle('disabled');\n\n  if (toggle) {\n    cat.disabled = true;\n\n    filterAdd(layer, cat);\n\n    // Store style to toggle on.\n    cat._style = cat.style;\n\n    // The feature should not be rendered.\n    cat.style = null;\n  } else {\n    delete cat.disabled;\n\n    filterRemove(layer, cat);\n\n    // If the filter is defined in the config for initial display of just a subset of catergories, _style may not yet exist.\n    cat._style ??= cat.style;\n\n    // Set the style to _style that is a stored style.\n    cat.style = cat._style;\n\n    delete cat._style;\n  }\n\n  layer.style.theme.filterOnly ? layer.L.changed() : layer.reload();\n}\n\n/**\n@function distributedLegend\n@description\nThis function hides the distribution count theme on load.\n@param {layer} layer The layer the theme exists on.\n@returns {HTMLElement} The legend node\n**/\nexport function distributedLegend(layer) {\n  const displayStyle = layer.display ? 'block' : 'none';\n\n  const theme = layer.style.theme;\n\n  //Hide distribution count themes on load.\n  theme.legend.node.style.setProperty('display', displayStyle);\n\n  //Set the legend display to match layer show.\n  layer.style.legend?.style.setProperty('display', displayStyle);\n\n  //Hide/Show meta tag.\n  theme.meta_node?.style.setProperty('display', displayStyle);\n\n  return theme.legend.node;\n}\n\n/**\n@function clusterLegend\n@description Adds a cluster icon for the theme.\n@param layer The layer the theme exists on.\n**/\nexport function clusterLegend(layer) {\n  const theme = layer.style.theme;\n  // Attach row for cluster locations.\n  // Create cluster icon.\n  const icon = mapp.utils.html`\n      <div\n        style=\"height: 40px; width: 40px;\">\n        ${mapp.ui.elements.legendIcon({\n          height: 40,\n          icon: layer.style.cluster.icon,\n          width: 40,\n        })}`;\n\n  // Create cluster label.\n  const label = mapp.utils.html`\n      <div\n        class=\"label\">\n        ${mapp.dictionary.layer_style_cluster}`;\n\n  // Push icon and label into legend grid.\n  theme.legend.grid.push(mapp.utils.html`<div\n      data-id=\"cluster\"\n      class=${theme.legend.alignContents}>\n      ${icon}${label}`);\n}\n\n/**\n@function themeParser\n@description Sets nullish assignment of values and classList properties on the theme.\n@param layer The layer the theme exists on.\n**/\nexport function themeParser(layer) {\n  const theme = layer.style.theme;\n\n  theme.filterOnly ??= layer.style.filterOnly;\n\n  theme.legend ??= {};\n\n  theme.legend.grid = [];\n\n  // Make 'left' default alignment.\n  theme.legend.alignContents ??= 'left';\n\n  //Prevent multiple contents classes being added.\n  if (!theme.legend.alignContents.includes('contents'))\n    theme.legend.alignContents += ' contents';\n\n  theme.legend.classList = `contents-wrapper ${\n    theme.legend?.layout || 'grid'\n  } ${theme.legend?.nowrap ? 'nowrap' : ''}`;\n\n  // if nowrap is set, we need to allow overflow scroll in case of too many items\n  theme.legend.style = theme.legend?.nowrap ? 'overflow: scroll;' : '';\n}\n", "/**\n### /ui/layers/legends/categorized\n\nThe categorized theme legend module exports the categorizedTheme to the `ui.layers.legend{}` library object.\n\n@requires /ui/layers/legends/utils\n@requires /ui/elements/themeLegendSwitch\n\n@module /ui/layers/legends/categorized\n*/\n\nimport {\n  clusterLegend,\n  createLegend,\n  distributedLegend,\n  themeParser,\n} from './utils.mjs';\n\n/**\n@function categorizedTheme\n\n@description\nThe categorizedTheme method creates and returns a categorized theme legend for the current layer.style.theme.\n\n@param {layer} layer The decorated mapp layer.\n\n@returns {HTMLElement} The categorized theme legend element.\n*/\nexport default function categorizedTheme(layer) {\n  themeParser(layer);\n\n  const theme = layer.style.theme;\n\n  // Switch all control\n  theme.legend.switch = layer.filter && mapp.ui.elements.themeLegendSwitch();\n\n  theme.categories.forEach((cat) => {\n    createLegend(cat, theme, layer);\n  });\n\n  if (layer.style.cluster) {\n    clusterLegend(layer);\n  }\n\n  theme.legend.node = mapp.utils.html.node`\n    <div class=\"legend\">\n      ${theme.legend.switch || ''}\n      <div class=${theme.legend.classList} style=${theme.legend.style}>\n        ${theme.legend.grid}`;\n\n  layer.style.legend ??= theme.legend.node;\n\n  if (layer.style.legend) {\n    layer.style.legend.replaceChildren(...theme.legend.node.children);\n  }\n\n  //Determine whether to show the legend based on layer.display\n  if (theme.distribution === 'count') {\n    distributedLegend(layer);\n\n    return theme.legend.node;\n  }\n\n  //Display legend for other cases.\n  layer.style.legend.style.removeProperty('display');\n\n  return theme.legend.node;\n}\n", "/**\n### /ui/layers/legends/distributed\n\nThe distributed theme legend module exports the distributedTheme to the `ui.layers.legend{}` library object.\n\n@requires /ui/layers/legends/utils\n\n@module /ui/layers/legends/distributed\n*/\n\nimport {\n  clusterLegend,\n  createLegend,\n  distributedLegend,\n  themeParser,\n} from './utils.mjs';\n/**\n@function distributedTheme\n\n@description\nThe distributedTheme method creates and returns a distributed theme legend for the current layer.style.theme.\n\n@param {layer} layer The decorated mapp layer.\n\n@returns {HTMLElement} The distributed theme legend element.\n*/\nexport default function distributedTheme(layer) {\n  themeParser(layer);\n\n  const theme = layer.style.theme;\n\n  // If the legend is set to be hidden, exit the function.\n  if (theme.hideLegend) return;\n\n  // For each category in the theme.categories array\n  for (const cat of theme.categories) {\n    cat.label = cat.values?.join(', ');\n\n    // Only create a legend item if the category has a label defined\n    // If no label, it means that category is not being used.\n    if (cat.label !== undefined) {\n      createLegend(cat, theme, layer);\n    }\n  }\n\n  if (layer.style.cluster) {\n    clusterLegend(layer);\n  }\n\n  theme.legend.node = mapp.utils.html.node`\n    <div class=\"legend\">\n      ${theme.legend.switch || ''}\n      <div class=${theme.legend.classList} style=${theme.legend.style}>\n        ${theme.legend.grid}`;\n\n  distributedLegend(layer);\n\n  layer.style.legend ??= theme.legend.node;\n\n  if (layer.style.legend) {\n    layer.style.legend.replaceChildren(...theme.legend.node.children);\n  }\n\n  layer.L.once('postrender', () => {\n    if (theme.key !== layer.style.theme.key) return;\n\n    distributedTheme(layer);\n  });\n\n  return theme.legend.node;\n}\n", "/**\n### /ui/layers/legends/graduated\n\nThe graduated theme legend module exports the graduatedTheme to the `ui.layers.legend{}` library object.\n\n@requires /ui/elements/legendIcon\n@requires /ui/elements/themeLegendSwitch\n\n@module /ui/layers/legends/graduated\n*/\n\n/**\n@function graduatedTheme\n\n@description\nThe graduatedTheme method creates a `catElements[]` array with icons for each graduated theme category. The elements array is passed into a legend element assigned as `layer.style.legend` and returned from the method.\n\n@param {layer} layer The decorated mapp layer.\n\n@returns {HTMLElement} The graduated theme legend element.\n*/\nexport default function graduatedTheme(layer) {\n  const theme = layer.style.theme;\n\n  theme.legend ??= {};\n\n  // Switch all control\n  const switchAll = mapp.ui.elements.themeLegendSwitch();\n\n  const catElements = theme.categories\n    .filter((cat) => cat.value !== undefined)\n    .map((cat) => {\n      const catClass = `contents ${\n        theme.legend?.horizontal ? 'horizontal' : ''\n      }`;\n\n      const catIcon = mapp.ui.elements.legendIcon({\n        height: 24,\n        width: 24,\n        ...(cat._style || cat.style),\n      });\n\n      cat.label ??= cat.value;\n\n      const labelClassList = `label switch ${cat.disabled ? 'disabled' : ''}`;\n\n      return mapp.utils.html`<div \n        data-id=${cat.value}\n        class=${catClass}>\n        <div \n          style=\"height: 24px; width: 24px; grid-column: 1;\">\n          ${catIcon}\n        </div>\n          <div \n            class=${labelClassList}\n            style=\"grid-column: 2;\"\n            onclick=${(e) => catToggle(e, layer, cat)}>\n            ${cat.label}`;\n    });\n\n  const classList = `contents-wrapper ${theme.legend?.layout || 'grid'} ${\n    theme.legend?.nowrap ? 'nowrap' : ''\n  }`;\n\n  // if nowrap is set, we need to allow overflow scroll in case of too many items\n  const style = theme.legend?.nowrap ? 'overflow: scroll;' : '';\n\n  theme.legend.node = mapp.utils.html.node`\n    <div class=\"legend\">\n      ${switchAll}\n      <div class=${classList} style=${style}>\n        ${catElements}\n      </div>`;\n\n  layer.style.legend ??= theme.legend.node;\n\n  if (layer.style.legend) {\n    layer.style.legend.replaceChildren(...theme.legend.node.children);\n  }\n\n  return theme.legend.node;\n}\n\n/**\n@function catToggle\n\n@description\nThe method toggles the disabled class on the event target element.\n\nIf toggled [on] the style will be set to null.\n\nThe cat style will be restored if toggled off.\n\n@param {Event} e The cat label click event.\n@param {layer} layer The decorated mapp layer.\n@param {object} cat The cat object from the theme.\n*/\nfunction catToggle(e, layer, cat) {\n  const toggle = e.target.classList.toggle('disabled');\n\n  if (toggle) {\n    cat.disabled = true;\n\n    // Store style to toggle on.\n    cat._style = cat.style;\n\n    // The feature should not be rendered.\n    cat.style = null;\n  } else {\n    delete cat.disabled;\n\n    cat.style = cat._style;\n\n    delete cat._style;\n  }\n\n  layer.L.changed();\n}\n", "/**\n## /ui/layers/legends\n\nThe legends module exports an object that references core ui layers legends methods.\n\nCustom methods can be added through plugins by assigning a method to the mapp.ui.layers.legends{} object.\n\n@requires /ui/layers/legends/basic\n@requires /ui/layers/legends/categorized\n@requires /ui/layers/legends/distributed\n@requires /ui/layers/legends/graduated\n\n@module /ui/layers/legends\n*/\n\nimport basicTheme from './basic.mjs';\nimport categorizedTheme from './categorized.mjs';\nimport distributedTheme from './distributed.mjs';\nimport graduatedTheme from './graduated.mjs';\n\nexport default {\n  basic: basicTheme,\n  categorized: categorizedTheme,\n  distributed: distributedTheme,\n  graduated: graduatedTheme,\n};\n", "/**\n## /ui/layers/listview \n\nThe module exports the default listview method.\n\n@requires /mapp/ui/layers/view\n\n@module /ui/layers/listview\n*/\n\n/**\n@function listview\n\n@description\nCreates a listview for organizing and displaying map layers, optionally grouped.\n\nA HTMLelement target property must be provided for the listview element to be rendered into.\n\nAn initial list of decorated mapview layers is optional since layers can be added to the listview object through the add method.\n\nThe listview method is a decorator which returns the decorated listview object.\n\n```js\nmapp.ui.layers.listview({\n  layers: mapview.layers,\n  target: document.getElementById('layer-list')\n});\n```\n\n@param {Object} params - Configuration parameters\n@property {HTMLElement} params.target DOM element where the listview will be rendered\n@property {Object} [params.layers] - Map of layer objects to be added to the listview\n*/\nexport default function listview(params) {\n  if (!params.target) return;\n\n  const listview = {\n    add,\n    createGroup,\n    groups: {},\n    node: params.target,\n  };\n\n  if (\n    typeof params.layers === 'object' &&\n    Object.values(params.layers).length\n  ) {\n    // Loop through the layers and add to layers list\n    Object.values(params.layers).forEach((layer) => listview.add(layer));\n  }\n\n  return listview;\n}\n\n/** \n@function add\n\n@description\nThe add method creates a layer.view and adds this to the listview.\n\n@param {layer} layer - The layer object to add\n@property {boolean} [layer.hidden] Do not create a layer.view and shortcircuit.\n@property {string} [layer.group] Create a layer group and or add the layer to an existing listview.group\n@fires addLayerView\n*/\nfunction add(layer) {\n  // Do not create a layer view\n  if (layer.hidden) return;\n\n  // Create the layer view\n  mapp.ui.layers.view(layer);\n\n  if (!layer.group) {\n    this.node.append(layer.view);\n    this.node.dispatchEvent(\n      new CustomEvent('addLayerView', {\n        detail: layer,\n      }),\n    );\n    return;\n  }\n\n  // Create new layer group if group does not exist yet\n  if (!this.groups[layer.group]) this.createGroup(layer);\n\n  // Add layer to group\n  this.groups[layer.group].addLayer(layer);\n  this.node.dispatchEvent(\n    new CustomEvent('addLayerView', {\n      detail: layer,\n    }),\n  );\n}\n\n/** \n@function createGroup\n@param {layer} layer The layer to add to a group.\n@property {string} layer.group Group key.\n@property {string} [layer.groupClassList] CSS classes to apply to group\n*/\nfunction createGroup(layer) {\n  // Create group object\n  const group = {\n    list: [],\n  };\n\n  // Assign layer group to listview object\n  this.groups[layer.group] = group;\n\n  // Create hide all group layers button\n  group.hideLayers = mapp.utils.html.node`<button\n  class=\"notranslate material-symbols-outlined active\"\n    title=${mapp.dictionary.layer_group_hide_layers}\n    onclick=${(e) => {\n      e.target.style.visibility = 'hidden';\n      group.list\n        .filter((layer) => layer.display)\n        .forEach((layer) => layer.hide());\n    }}>visibility_off`;\n\n  group.meta = mapp.utils.html.node`<div class=\"meta\">`;\n  group.drawer = mapp.ui.elements.drawer({\n    class: `layer-group ${layer.groupClassList || ''}`,\n    content: group.meta,\n    data_id: layer.group,\n    header: mapp.utils.html`\n       <h2>${layer.group}</h2>\n       ${group.hideLayers}\n       <div class=\"notranslate material-symbols-outlined caret\"/>`,\n  });\n\n  this.node.appendChild(group.drawer);\n\n  group.chkVisibleLayer = chkVisibleLayer;\n\n  group.addLayer = addLayerToGroup;\n}\n\n/**\n@function addLayer\n@this group\n@description\nAdds a layer to group [this].\nThe layer.groupmeta will be overwritten.\n@param {layer} layer Layer to add to the group\n@property {string} [layer.groupmeta] HTML content for group metadata\n*/\nfunction addLayerToGroup(layer) {\n  if (layer.groupmeta) {\n    const metaNode = mapp.utils.html.node`<div>`;\n    metaNode.innerHTML = layer.groupmeta;\n    mapp.utils.render(this.meta, metaNode);\n  }\n\n  this.list.push(layer);\n  this.drawer.appendChild(layer.view);\n  this.chkVisibleLayer();\n  layer.showCallbacks.push(() => this.chkVisibleLayer());\n  layer.hideCallbacks.push(() => this.chkVisibleLayer());\n}\n\n/**\n@function chkVisibleLayer\n@description\nChecks if any layers in group are visible and toggles visibility button accordingly\n*/\nfunction chkVisibleLayer() {\n  this.hideLayers.style.visibility = this.list.some((layer) => layer.display)\n    ? 'visible'\n    : 'hidden';\n}\n", "/**\n## ui/layers/panels/dataviews\n\nThe dataviews panel module exports the dataviews method.\n\n@requires /ui/Dataview\n\n@module /ui/layers/panels/dataviews\n*/\n\n/**\n@function dataviews\n\n@description\n### mapp.ui.layers.panels.dataviews(layer)\n\nThe dataviews method returns a drawer with checkbox elements for each dataview object in `layer.dataviews{}`.\n\nThe dataviews will be decorated with the `mapp.ui.Dataview()` method.\n\nSpecifying `layer.dataviews.drawer: false` will prevent a drawer from being made for the dataview panel.\n\n@param {layer} layer The decorated mapp layer object.\n\n@property {object} layer.dataviews The layer dataviews.\n@property {boolean} [dataviews.popout] Whether the drawer can be popped out into a dialog.\n@property {string} [dataviews.classList] The string will be appended to the drawer element classlist.\n\n@return {HTMLElement}\n*/\nexport default function dataviews(layer) {\n  const content = [];\n\n  for (const [key, dataview] of Object.entries(layer.dataviews)) {\n    // The dataview entry may be a flag.\n    if (typeof dataview === 'string' || dataview === true || dataview === false)\n      continue;\n\n    Object.assign(dataview, {\n      host: layer.mapview.host,\n      key,\n      layer,\n    });\n\n    // Find tabview element from data-id attribute.\n    populateTabview(dataview);\n\n    // Return if on mobile as dataviews are not supported.\n    if (dataview.tabview && mapp.utils.mobile()) return;\n\n    // Assign label for dataview.chkbox\n    dataview.label ??= dataview.title || dataview.key;\n\n    mapp.ui.utils.dataviewDialog(dataview);\n\n    // Assign target html element for dataview.\n    dataview.target =\n      dataview.target instanceof HTMLElement\n        ? dataview.target\n        : mapp.utils.html.node`\n        <div class=\"dataview-target\">`;\n\n    if (mapp.ui.Dataview(dataview) instanceof Error) return;\n\n    // Display dataview if layer and dv have display flag.\n    layer.display && dataview.display && dataview.show();\n\n    layer.showCallbacks.push(() => {\n      if (dataview.display) {\n        dataview.chkbox.querySelector('input').checked = true;\n        dataview.show();\n      }\n    });\n\n    layer.hideCallbacks.push(() => {\n      // Only attempt to hide a dataview which is currently displayed.\n      if (dataview.display) {\n        dataview.chkbox.querySelector('input').checked = false;\n        dataview.hide();\n      }\n    });\n\n    content.push(dataview.chkbox);\n\n    !dataview.tabview &&\n      !dataview.dataview_dialog &&\n      content.push(dataview.target);\n  }\n\n  // The dataviews are created but no panel is returned.\n  if (layer.dataviews.hide) return;\n\n  if (layer.dataviews.drawer === false) {\n    return mapp.utils.html\n      .node`<div data-id=\"dataviews-drawer\"><h3>${mapp.dictionary.layer_dataview_header}</h3>${content}`;\n  }\n\n  // Create a drawer with the dataview chkbox controls.\n  const drawer = mapp.ui.elements.drawer({\n    class: layer.dataviews.classList || '',\n    content,\n    data_id: `dataviews-drawer`,\n    header: mapp.utils.html`\n      <h3>${mapp.dictionary.layer_dataview_header}</h3>\n      <div class=\"notranslate material-symbols-outlined caret\"/>`,\n    popout: layer.dataviews.popout,\n  });\n\n  return drawer;\n}\n\n/**\n@function populateTabview\n\n@description\nAdds show and hide methods for dataviews with a tabview target\n\n@param {layer} dataview The dataview to add the show nad hide functions to.\n*/\nfunction populateTabview(dataview) {\n  dataview.tabview = document.querySelector(`[data-id=${dataview.target}]`);\n\n  // Return if the named tabview is not found in document.\n  if (dataview.tabview) {\n    dataview.show ??= () => {\n      // Create tab after dataview creation is complete.\n      dataview.tabview.dispatchEvent(\n        new CustomEvent('addTab', { detail: dataview }),\n      );\n\n      // Show the dataview tab.\n      dataview.show();\n    };\n\n    dataview.hide ??= () => {\n      dataview.display = false;\n      dataview.remove();\n    };\n  }\n}\n", "/**\n## ui/layers/panels/draw\n\nThe draw panel module exports the draw method.\n\nDictionary entries:\n- layer_add_new_location\n\n@requires /dictionary\n@module /ui/layers/panels/draw\n*/\n\n/**\n@function drawPanel\n\n@description\nThe drawPanel method iterates over the layer.draw object and creates interface elements for each.\n\nThe interface elements are returned in a panel element.\n\nSpecifying `layer.draw.drawer: false` will prevent a drawer from being made for the drawing panel.\n\n@param {layer} layer\n@property {string} layer.geom The field to store draw geometries.\n@property {Object} layer.draw The configuration for the layer draw methods.\n@property {boolean} [draw.hidden] The draw panel should not be created for the layer.view.\n@property {boolean} [draw.popout] Whether the drawer can be popped out into a dialog.\n@property {string} [draw.classList] The string will be appended to the drawer element classlist.\n\n@returns {HTMLElement} The draw panel drawer element.\n*/\nexport default function drawPanel(layer) {\n  if (typeof layer.draw !== 'object') return;\n\n  // Do not create the panel.\n  if (layer.draw.hidden) return;\n\n  // If the layer has no geom return with a warning as you need a geom to draw.\n  if (!layer.geom) {\n    console.warn(\n      `Layer: ${layer.key} - You must have a geom property to draw new features.`,\n    );\n    return;\n  }\n\n  const elements = Object.keys(layer.draw)\n    .map((key) => {\n      // Return element from drawing method.\n      return mapp.ui.elements.drawing[key]?.(layer);\n    })\n    .filter((node) => !!node);\n\n  // Short circuit panel creation without elements.\n  if (!elements.length) return;\n\n  const content = mapp.utils.html`${elements}`;\n\n  if (layer.draw.drawer === false) {\n    return mapp.utils\n      .html`<div id=\"draw-drawer\"><h3>${mapp.dictionary.layer_add_new_location}</h3>${content}`;\n  }\n\n  const drawer = mapp.ui.elements.drawer({\n    data_id: `draw-drawer`,\n    header: mapp.utils.html`\n      <h3>${mapp.dictionary.layer_add_new_location}</h3>\n      <div class=\"notranslate material-symbols-outlined caret\"/>`,\n    content,\n    class: layer.draw.classList,\n    popout: layer.draw.popout,\n  });\n\n  return drawer;\n}\n", "/**\n## /ui/layers/panels/filter\n\nThe filter panel module exports the filterPanel method for the creation of a filter panel in the layer view.\n\nDictionary entries:\n- filter_header\n- filter_select\n- filter_clear_all\n- filter_reset_all\n- filter_btn_label\n- filter_btn_title\n- filter_count\n- filter_in_viewport\n- filter_not_in_viewport\n\n@requires /dictionary \n\n@module /ui/layers/panels/filter\n*/\n\n/**\n@function filterPanel\n\n@description\nThe filterPanel method will call the multi_filter method to update the filter configuration in regards to the legacy multi_filter plugin.\n\nThe method will shortcircuit if the filter panel is set to be hidden or if the layer has no infoj entries to create a list of filter.\n\n@param {layer} layer \n\n@property {array} layer.infoj Array of infoj entries.\n@property {object} layer.filter Configuration object for layer filter.\n@property {boolean} [filter.hidden] The filter panel should not be displayed.\n@property {boolean} [filter.popout] Whether the drawer can be popped out into a dialog.\n@property {string} [filter.classList] The string will be appended to the drawer element classlist.\n@returns {HTMLElement} The filter panel drawer element or filter dialog button.\n*/\nexport default function filterPanel(layer) {\n  multi_filter(layer);\n\n  if (layer.filter.hidden) return;\n\n  if (!layer.infoj) return;\n\n  layer.filter.list = listFilter(layer);\n\n  if (!layer.filter.list.length) return;\n\n  layer.filter.dropdown = mapp.ui.elements.dropdown({\n    callback: async (e, options, filter) => {\n      if (!filter.selected) {\n        mapp.ui.layers.filters.removeFilter(layer, filter);\n        updatePanel(layer);\n        return;\n      }\n\n      // Return if filter card already exists.\n      if (filter?.card) return;\n\n      // Display clear and reset all button.\n      layer.filter.clearAll.style.display = 'inline-block';\n      layer.filter.resetAll.style.display = 'inline-block';\n\n      updatePanel(layer);\n\n      // Get interface content for filter card.\n      filter.content = [\n        await mapp.ui.layers.filters[filter.type](layer, filter),\n      ].flat();\n\n      // Add meta element to beginning of contents array.\n      filter.meta &&\n        filter.content.unshift(mapp.utils.html.node`<p>${filter.meta}`);\n\n      filter.header = filter.title;\n\n      filter.close = () => mapp.ui.layers.filters.removeFilter(layer, filter);\n\n      filter.card = mapp.ui.elements.card(filter);\n\n      //Append the card to the dialog view instead.\n      if (layer.filter.dialog?.view)\n        return layer.filter.dialog.view.append(filter.card);\n      if (layer.filter.drawer?.popout?.view?.checkVisibility?.()) {\n        return layer.filter.drawer.popout.view.append(filter.card);\n      }\n\n      layer.filter.view.querySelector('.content').append(filter.card);\n    },\n    data_id: `${layer.key}-filter-dropdown`,\n    entries: layer.filter.list,\n    keepPlaceholder: true,\n    multi: true,\n    placeholder: mapp.dictionary.filter_select,\n  });\n\n  layer.filter.clearAll = mapp.utils.html.node`<button\n    data-id=clearall\n    class=\"flat underline\"\n    onclick=${(e) => {\n      layer.filter.list.forEach((filter) =>\n        mapp.ui.layers.filters.removeFilter(layer, filter),\n      );\n    }}>${mapp.dictionary.filter_clear_all}`;\n\n  layer.filter.resetAll = mapp.utils.html.node`<button\n    data-id=resetall\n    class=\"flat underline\"\n    onclick=${(e) => {\n      layer.filter.list.forEach((filter) =>\n        mapp.ui.layers.filters.resetFilter(layer, filter),\n      );\n    }}>${mapp.dictionary.filter_reset_all}`;\n\n  layer.filter.count = mapp.utils.html.node`<span class=\"bold\">`;\n\n  layer.changeEndCallbacks.push(updatePanel);\n\n  layer.hideCallbacks.push((layer) => {\n    if (layer.filter.clearAll?.checkVisibility()) {\n      layer.filter.feature_count.style.setProperty('display', 'none');\n    }\n  });\n\n  layer.filter.count_meta ??= mapp.dictionary.filter_count;\n\n  layer.filter.feature_count = mapp.utils.html.node`\n    <p style=\"display:none\">${layer.filter.count} ${layer.filter.count_meta}`;\n\n  layer.filter.viewport_description ??= layer.filter.viewport\n    ? mapp.dictionary.filter_in_viewport\n    : mapp.dictionary.filter_not_in_viewport;\n\n  layer.filter.viewport_description = mapp.utils.html\n    .node`<p style=\"display:none\"><i>${layer.filter.viewport_description}</i>`;\n\n  layer.filter.content = [\n    layer.filter.dropdown,\n    layer.filter.clearAll,\n    layer.filter.resetAll,\n    layer.filter.feature_count,\n    layer.filter.viewport_description,\n  ];\n\n  filterDialog(layer);\n\n  if (layer.filter.drawer === false) {\n    layer.filter.view =\n      layer.filter.dialog?.btn ||\n      mapp.utils.html\n        .node`<div data-id=\"filter-drawer\"><h3>${mapp.dictionary.filter_header}</h3>\n    ${layer.filter.content}`;\n  } else {\n    layer.filter.drawer = {\n      data_id: `filter-drawer`,\n      class: layer.filter.classList || '',\n      header: mapp.utils.html`\n        <h3>${mapp.dictionary.filter_header}</h3>\n        <div class=\"notranslate material-symbols-outlined caret\"/>`,\n      content: layer.filter.dialog?.btn || layer.filter.content,\n      popout: layer.filter.popout,\n      view: layer.view,\n    };\n\n    layer.filter.view = mapp.ui.elements.drawer(layer.filter.drawer);\n  }\n\n  return layer.filter.view;\n}\n\n/**\n@function listFilter\n@description\nParse layer.infoj entries to create a list of layer filter objects.\n\nAny entry with a filter defintion will be included in the list unless specifically excluded in the layer.filter configuration.\n\nA filter definition will be created for all entries if possible with the includeAll layer.filter flag or if the entry.field is in the layer.filter.include[] array.\n\n@param {Object} layer\n@property {Object} layer.filter Configuration object for layer filter.\n@property {Array} [filter.exclude] Array of filter [fields] which are excluded in the filter list.\n@property {Array} [filter.include] Array of filter [fields] which should be included in the filter list.\n@property {Boolean} [filter.includeAll] Include all possible infoj entry in filter list.\n\n@returns {Array} Array of cloned entry.filter\n*/\nconst filterByType = {\n  numeric: 'numeric',\n  integer: 'integer',\n  text: 'like',\n  date: 'date',\n  datetime: 'datetime',\n  boolean: 'boolean',\n};\nfunction listFilter(layer) {\n  const list = [];\n\n  layer.filter.include ??= [];\n\n  layer.filter.exclude ??= [];\n\n  for (const entry of layer.infoj) {\n    if (\n      entry.skipEntry === true ||\n      entry.field === undefined ||\n      layer.filter.exclude.includes(entry.field)\n    )\n      continue;\n\n    if (\n      layer.filter.includeAll ||\n      layer.filter.include.includes(entry.field) ||\n      entry.filter === true\n    ) {\n      entry.type ??= 'text';\n\n      if (!Object.hasOwn(filterByType, entry.type)) continue;\n\n      if (!Object.keys(entry.filter || {}).length)\n        entry.filter = filterByType[entry.type];\n    }\n\n    // The filter is defined as a string e.g. \"like\"\n    if (typeof entry.filter === 'string') {\n      entry.filter = {\n        type: entry.filter,\n      };\n    }\n\n    if (\n      !entry.filter?.type ||\n      !Object.hasOwn(mapp.ui.layers.filters, entry.filter.type)\n    )\n      continue;\n\n    entry.filter.title ??= entry.title;\n\n    entry.filter.field ??= entry.field;\n\n    list.push(structuredClone(entry.filter));\n  }\n\n  return list;\n}\n\n/**\n@function updatePanel\n\n@description\nThe updatePanel method is triggered either from a layer.showCallbacks[] method or from the mapview.Map changeend event listener. The execution of the queries is therefore debounced to 1 second to prevent multiple expensive queries running at the same time. The method will shortcircuit if the layer is not displayed nor has current filter.\n\nThe method will hide the location count prior to the debounce.\n\nWithin the debounce the location count will be executed. The min max will be generated for current integer or numeric filter.\n\n@param {Object} layer\n@property {Object} layer.filter The layer filter configuration.\n@property {Object} filter.current The filter currently applied to the layer.\n@property {Boolean} filter.viewport The filter are restricted to the mapview viewport.\n@property {HTMLElement} filter.count The location count element in the filter panel.\n*/\nfunction updatePanel(layer) {\n  if (!layer.display) return;\n\n  clearTimeout(layer.filter.debounce);\n\n  // Debounce updatePanel queries by a second.\n  layer.filter.debounce = setTimeout(async () => {\n    for (const filter of layer.filter.list) {\n      // Filter in list must be a current filter.\n      if (!Object.hasOwn(layer.filter.current, filter.field)) continue;\n\n      if (filter.min === undefined) continue;\n      if (filter.max === undefined) continue;\n      if (filter.Min && filter.Max) continue;\n\n      await mapp.ui.layers.filters.generateMinMax(layer, filter);\n\n      const range = filter.max - filter.min;\n\n      if (range === 0) continue;\n\n      const slider = mapp.ui.elements.slider_ab(filter);\n\n      filter.slider.replaceWith(slider);\n      filter.slider = slider;\n    }\n\n    mapp.ui.utils.locationCount(layer).then((feature_count) => {\n      const value = mapp.utils.formatNumericValue({\n        value: feature_count,\n      });\n\n      layer.filter.count.innerText = value;\n      layer.filter.feature_count.style.setProperty('display', 'block');\n    });\n  }, 1000);\n}\n\n/**\n@function filterDialog\n\n@description\nThe filterDialog method creates a button to toggle the filter dialog if configured.\n\n@param {Object} layer\n@property {Object} layer.filter The layer filter configuration.\n@property {Object} [filter.dialog] The configuration for the filter dialog.\n@property {String} [dialog.btn_title] The title string for the filter dialog toggle button.\n@property {String} [dialog.btn_label] The label string for the filter dialog toggle button.\n@property {Object} [dialog.showOnLayerDisplay] Show dialog in layer showCallback.\n*/\nfunction filterDialog(layer) {\n  if (!layer.filter.dialog) return;\n\n  if (layer.filter.dialog === true) layer.filter.dialog = {};\n\n  layer.filter.dialog.btn_title ??= mapp.dictionary.filter_btn_title;\n  layer.filter.dialog.btn_label ??= mapp.dictionary.filter_btn_label;\n\n  layer.filter.dialog.btn = mapp.utils.html.node`<button \n    class=\"wide flat action multi_hover\"\n    data-id=${`multifilter-${layer.key}`}\n    title=${layer.filter.dialog.btn_title}\n    onclick=${(e) => {\n      // classList.toggle resolves as true when the class is added.\n      if (layer.filter.dialog?.btn.classList.toggle('active')) {\n        openDialog(layer);\n      } else {\n        // The decorated dialog object has a close method.\n        layer.filter.dialog.close();\n      }\n    }}>\n    <span class=\"material-symbols-outlined notranslate\">filter_alt</span>\n    ${layer.filter.dialog.btn_label}`;\n\n  //Show the dialog on layer display\n  if (layer.filter.dialog.showOnLayerDisplay) {\n    layer.showCallbacks.push(() => {\n      !layer.filter.dialog?.btn.classList.contains('active') &&\n        layer.filter.dialog?.btn.dispatchEvent(new Event('click'));\n      return layer;\n    });\n\n    layer.display && layer.filter.dialog?.btn.dispatchEvent(new Event('click'));\n  }\n\n  //Hide the dialog when the layer is hidden\n  layer.hideCallbacks.push(() => {\n    layer.filter.dialog?.btn.classList.contains('active') &&\n      layer.filter.dialog?.btn.dispatchEvent(new Event('click'));\n    return layer;\n  });\n}\n\n/**\n@function openDialog\n@description\nOpens the filter panel in a dialog.\n\n@param {Object} layer\n@property {Object} layer.filter The configuration parameters of the filter on the layer.\n*/\nfunction openDialog(layer) {\n  //Show the layer when the filter is opened\n  layer.show();\n\n  //Call the show function when applicable\n  if (layer.filter.dialog.show) return layer.filter.dialog.show();\n\n  layer.filter.dialog.title ??= mapp.dictionary.filter_dialog_title;\n\n  layer.filter.dialog.header = mapp.utils.html`<h1\n    >${layer.filter.dialog.title}`;\n\n  layer.filter.filter_list = mapp.utils.html`<div class=filter-list>`;\n\n  layer.filter.content = [\n    mapp.utils.html`<p class=bold>${layer.name}</p>`,\n    layer.filter.feature_count,\n    layer.filter.viewport_description,\n    layer.filter.clearAll,\n    layer.filter.resetAll,\n    layer.filter.dropdown,\n    layer.filter.filter_list,\n  ];\n\n  layer.filter.content = mapp.utils.html.node`${layer.filter.content}`;\n\n  Object.assign(layer.filter.dialog, {\n    data_id: `${layer.key}-filter-dialog`,\n    target: document.getElementById('Map'),\n    content: layer.filter.content,\n    height: 'auto',\n    left: '5em',\n    top: '0.5em',\n    class: 'box-shadow',\n    css_style: 'min-width: 300px;width: 350px',\n    containedCentre: true,\n    contained: true,\n    headerDrag: true,\n    minimizeBtn: true,\n    closeBtn: true,\n    onClose: () => {\n      // Toggle the active class on the button\n      layer.filter.dialog.btn.classList.remove('active');\n    },\n  });\n\n  mapp.ui.elements.dialog(layer.filter.dialog);\n\n  //Setup a dialog.view so the filter cards can be added to the dialog\n  layer.filter.dialog.view =\n    layer.filter.dialog.node.querySelector('.filter-list');\n\n  //Display clear all/reset all immediately\n  layer.filter.clearAll.style.display = 'inline-block';\n  layer.filter.resetAll.style.display = 'inline-block';\n}\n\n/**\n@function multi_filter\n\n@description\nSupport for multi_filter legacy plugin and configuration.\nWarning will be issued if the multi_filter plugin is configured.\nThe filter panel method will shortcircuit with the hidden flag set by the multi_filter plugin.\nThe hidden flag property will be deleted with the multi_filter layer configuration but the plugin not loaded.\n*/\nfunction multi_filter(layer) {\n  if (!layer.multi_filter) return;\n\n  if (mapp.layer.multi_filter) return;\n\n  delete layer.filter.hidden;\n\n  layer.filter.dialog = true;\n  layer.filter.drawer = false;\n  layer.filter.includeAll = true;\n}\n", "/**\n## /ui/layers/panels/gazetteer\n\nThe layer gazetteer panel module exports a method allowing to add a gazetteer search input to the layer view.\n\n@module /ui/layers/panels/gazetteer\n*/\n\nexport default (layer) => {\n  const gazetteer = {\n    layer: layer.key,\n    mapview: layer.mapview,\n    target: mapp.utils.html.node`<div>`,\n    ...layer.gazetteer,\n  };\n\n  mapp.ui.Gazetteer(gazetteer);\n\n  return gazetteer.target;\n};\n", "/**\n## /ui/layers/panels/jsonEditor\nThe layer panels module exports a default method to open a dialog with a layerJSE element to update the mapp layer.\n\n@requires /ui/utils/layerJSE\n\n@module /ui/layers/panels/jsonEditor\n*/\n\n/**\n@function jsonEditor\n@description\nThe jsonEditor method asigns a jsoneditor element to the decorated layer and a removeCallback method to close the dialog.\n\nThe button returned from the panel method will display a modal dialog with the jsoneditor element.\n\nThe 'Update Layer' button of the jsoneditor element will attempt to update the layer object with the json content of the editor.\n\n@param {layer} layer A decorated mapp layer.\n\n@return {HTMLElement} A button to toggle the jsoneditor dialog.\n*/\nexport default function jsonEditor(layer) {\n  if (layer.jsonEditor === true) {\n    layer.jsonEditor = {};\n  }\n\n  const button = mapp.utils.html\n    .node`<button class=\"wide flat\" data-id=\"jsonEditor\">JSON Editor</button>`;\n\n  button.addEventListener('click', async () => {\n    button.classList.toggle('active');\n\n    const jsonLayer = mapp.utils.jsonParser(layer);\n\n    const content = mapp.utils.html.node`<div>`;\n\n    const updateBtn = {\n      className: 'text-button',\n      onClick: () => updateLayer(jse, layer),\n      text: 'Update Layer',\n      title: 'Update Layer',\n      type: 'button',\n    };\n\n    const jse = await mapp.ui.utils.layerJSE(\n      content,\n      { json: jsonLayer },\n      updateBtn,\n    );\n\n    layer.jsonEditor.dialog = mapp.ui.elements.dialog({\n      header: mapp.utils.html.node`<div>`,\n      css_style: 'width: 500px; height 300px;',\n      containedCentre: true,\n      contained: true,\n      closeBtn: true,\n      onClose: () => {\n        button.classList.toggle('active');\n      },\n      content,\n    });\n  });\n\n  layer.removeCallbacks.push((layer) => {\n    layer.jsonEditor?.dialog?.close();\n  });\n\n  return button;\n}\n\n/**\n@function updateLayer\n@description\nThe method extracts the content from the provided jsoneditor argument and attempt to update the mapp with the json content.\n\n@param {jse} jse A jsoneditor instance.\n@param {layer} layer A decorated mapp layer.\n*/\nasync function updateLayer(jse, layer) {\n  const content = jse.get();\n\n  const layerJSON = JSON.parse(content.text);\n\n  await layer.update(layerJSON);\n}\n", "/**\n## ui/layers/panels/meta\n\nThe meta module exports a method to add a meta panel element to a layer view.\n@module /ui/layers/panels/meta\n*/\n\n/**\n@function meta\n\n@description\nThe method will create an element with the layer.meta string as innerHTML.\n\n@param {layer} layer\n@property {string} layer.meta The content for meta element innerHTML.\n\n@returns {HTMLElement} The meta panel element.\n*/\nexport default function meta(layer) {\n  const meta = mapp.utils.html.node`<p data-id=\"meta\" class=\"meta\">`;\n  meta.innerHTML = layer.meta;\n  return meta;\n}\n", "/**\n## /ui/layers/panels/reports\nExports a function for creating a drawer or just a panel which contains links to custom views.\n\n```JSON\n    {\n      \"report_1\":{\n        \"template\": \"report_template\"\n      }\n    }\n```\n\nSupplying `layer.reports.drawer: false` will return the links a plain dev instead of a drawer\n\n@module /ui/layers/panels/reports\n*/\n\n/**\n@function reports\n\n@description\nCreates a list of `a` elements containing links to custom views.\n\nSpecifying `layer.reports.drawer: false` will prevent a drawer from being made for the reports panel.\n\n@param {layer} layer\n\n@property {array} layer.reports The configuration of the reports\n@property {boolean} [reports.popout] Whether the drawer can be popped out into a dialog.\n@property {string} [reports.classList] The string will be appended to the drawer element classlist.\n\n@returns {HTMLElement} The report element for the panel.\n*/\nexport default function reports(layer) {\n  // Create chkbox controls for each dataview entry.\n  const reportLinks = mapp.utils.html.node`<div>`;\n  for (const [key, report] of Object.entries(layer.reports)) {\n    if (typeof report === 'boolean') continue;\n\n    report.key = key;\n\n    report.host = layer.mapview.host;\n\n    const href = `${report.host}/view?${mapp.utils.paramString({\n      lat: mapp.hooks.current?.lat,\n      lng: mapp.hooks.current?.lng,\n      locale: layer.mapview.locale.key,\n      template: report.template,\n      z: mapp.hooks.current?.z,\n    })}`;\n\n    reportLinks.appendChild(mapp.utils.html.node`\n      <div>\n      <a\n        class=\"link-with-img\"\n        target=\"_blank\"\n        href=\"${href}\">\n        <span class=\"notranslate material-symbols-outlined\">summarize</span>\n        <span>${report.title || report.key}`);\n  }\n\n  // Create a drawer with the dataview chkbox controls.\n  if (layer.reports.drawer === false) {\n    return mapp.utils.html\n      .node`<div data-id=\"reports-drawer\"><h3>Reports</h3>${reportLinks}`;\n  }\n  const drawer = mapp.ui.elements.drawer({\n    class: layer.reports.classList || '',\n    data_id: `reports-drawer`,\n    header: mapp.utils.html`\n      <h3>Reports</h3>\n      <div class=\"notranslate material-symbols-outlined caret\"/>`,\n    content: reportLinks,\n    popout: layer.reports.popout,\n  });\n\n  return drawer;\n}\n", "/**\n## /ui/layers/panels/style\n\nThe style panel module exports the styleDrawer method for the `mapp.ui.layers.panels{}` library object.\n\nDictionary entries:\n- layer_style_header\n\n@requires /dictionary \n\n@requires /ui/elements/style\n@requires /ui/elements/drawer\n\n@module /ui/layers/panels/style\n*/\n\n/**\n@function stylePanel\n\n@description\nThe stylePanel will shortcircuit with the layer.style.hidden flag.\n\nA layer style panel element will be requested from mapp.utils.style.panel().\n\nA default order for the elements that make up the style panel will be assigned as mapp.ui.elements.style.elements[] if not implicit in configuration.\n\nA drawer element will be created with the style panel element as content.\n\nA default array will be assigned to the layer.style object to order the elements being added to the view in the [elements.layerStyle panel method]{@link module:/ui/elements/layerStyle~panel}.\n\nSpecifying `layer.style.drawer: false` will prevent a drawer from being made for the style panel.\n\n@param {layer} layer A decorated mapp layer with a style object.\n\n@property {layer-style} layer.style The layer style configuration.\n@property {boolean} [style.hidden] Do not create style drawer for layer.view.\n@property {boolean} [style.popout] Whether the drawer can be popped out into a dialog.\n@property {string} [style.classList] The string will be appended to the drawer element classlist..\n@property {array} [style.elements=['labels','label','hovers','hover','themes','theme', 'icon_scaling','opacitySlider']] Array of default elements and their order for the style panel.\n\n@returns {HTMLElement} The style drawer element for the layer.view.\n*/\nexport default function stylePanel(layer) {\n  // Do not create the panel.\n  if (layer.style.hidden) return;\n\n  layer.style.elements ??= [\n    'labels',\n    'label',\n    'hovers',\n    'hover',\n    'themes',\n    'theme',\n    'icon_scaling',\n    'opacitySlider',\n  ];\n\n  // Request style.panel element as content for drawer.\n  const content = mapp.ui.elements.layerStyle.panel(layer);\n\n  if (!content) return;\n\n  layer.style.classList ??= '';\n\n  // Create header for layer.view style drawer.\n  const header = mapp.utils.html`\n    <h3>${mapp.dictionary.layer_style_header}</h3>\n    <div class=\"notranslate material-symbols-outlined caret\"/>`;\n\n  if (layer.style.drawer === false) {\n    layer.style.drawer = mapp.utils.html\n      .node`<div data-id=\"style-drawer\"><h3>${mapp.dictionary.layer_style_header}</h3>${content}`;\n  } else {\n    // Create style drawer for layer.view\n    layer.style.drawer = mapp.ui.elements.drawer({\n      data_id: `style-drawer`,\n      class: layer.style.classList,\n      header,\n      content,\n      popout: layer.style.popout,\n    });\n  }\n\n  return layer.style.drawer;\n}\n", "/**\n## /ui/layers/panels\n\nThe panels module exports an object that references core ui layers view panel methods.\n\nCustom methods can be added through plugins by assigning a method to the mapp.ui.layers.panels{} object.\n\n@requires /ui/layers/panels/dataviews\n@requires /ui/layers/panels/draw\n@requires /ui/layers/panels/filter\n@requires /ui/layers/panels/gazetteer\n@requires /ui/layers/panels/jsonEditor\n@requires /ui/layers/panels/meta\n@requires /ui/layers/panels/reports\n@requires /ui/layers/panels/style\n\n@module /ui/layers/panels\n*/\n\nimport dataviews from './dataviews.mjs';\nimport draw from './draw.mjs';\nimport filter from './filter.mjs';\nimport gazetteer from './gazetteer.mjs';\nimport jsonEditor from './jsonEditor.mjs';\nimport meta from './meta.mjs';\nimport reports from './reports.mjs';\nimport style from './style.mjs';\n\nexport default {\n  dataviews,\n  draw,\n  filter,\n  gazetteer,\n  jsonEditor,\n  meta,\n  reports,\n  style,\n};\n", "/**\n### /ui/layers/view\n\nThe module exports a method to create layer.view elements.\n\n@requires /ui/layers/viewHeader\n\n@module /ui/layers/view\n*/\n\n/**\n@function layerView\n\n@description\nThe layerView method will create and assign a layer.view node to the layer object.\n\nSpecifying `layer.drawer: false` create a drawer card for the layer view. The drawer cannot be collapsed.\n\n@param {layer} layer\n@property {Object} [layer.view] The layerView method will shortcircuit if the layer.view property is null.\n@property {Object} [layer.drawer] The layerView method will shortcircuit after executing the viewConfig method is the layer.drawer property is null.\n*/\nexport default function layerView(layer) {\n  // Do not create a layer view.\n  if (layer.view === null) return;\n\n  viewConfig(layer);\n\n  if (layer.drawer === null) {\n    layer.view = mapp.utils.html.node`<div\n      data-id=${layer.key}\n      class=\"layer-view\">\n      ${layer.viewConfig.content}`;\n    return;\n  }\n\n  const header = mapp.utils.html.node`\n    <h2>${layer.name}</h2>\n    ${layer.viewConfig.headerBtn}`;\n\n  if (layer.drawer === false) {\n    layer.view = mapp.utils.html.node`<div \n      class=\"drawer layer-view\"\n      data-id=${layer.key}>\n      <div class=\"header\">${header}</div>\n      ${layer.viewConfig.content}`;\n  } else {\n    header.append(\n      mapp.utils.html\n        .node`<div class=\"notranslate material-symbols-outlined caret\">`,\n    );\n\n    layer.view = mapp.ui.elements.drawer({\n      data_id: layer.key,\n      class: layer.viewConfig.classList,\n      header,\n      content: layer.viewConfig.content,\n      popout: layer.viewConfig.popoutBtn,\n    });\n  }\n\n  layer.changeEndCallbacks.push(changeEnd);\n}\n\n/**\n@function viewConfig\n\n@description\nThe viewConfig method will create viewConfig object and update the configuration from legacy properties.\n\nThe method will iterate through the panelOrder keys to add panel to the content array.\n\nThe method will iterate through the headerOrder keys to and execute methods from mapp.ui.layers.viewHeader{} to return elements for the headerBtn array.\n\n@param {layer} layer\n@property {Array} [layer.tables] Array of data tables for different zoom level.\n@property {Object} [layer.viewConfig] Control options for elements in the layer.view.\n@property {Boolean} [viewConfig.displayToggle=true] Controls whether the layer toggle close is displayed.\n@property {Boolean} [viewConfig.zoomBtn=true] Controls whether the zoom magnifying glass is displayed.\n@property {Boolean} [viewConfig.hideDisabled=false] Controls whether the layer view is hidden when layer is outside its zoom range. When set to true layer will be temporarily hidden in the list until it's within restricted zoom again.\n@property {Boolean} [viewConfig.zoomToFilteredExtentBtn=true] Controls whether the zoom to extent button is displayed.\n@property {Array} [viewConfig.panelOrder=['draw-drawer', 'dataviews-drawer', 'filter-drawer', 'style-drawer', 'meta']] Controls which panels are added to the view and in which order, will be assigned from layer.panelOrder if not explicit.\n@property {string} [viewConfig.classList] Classlist string to be added to layer-view drawer element classList.\n@property {Array} [viewConfig.headerOrder=['zoomToFilteredExtentBtn', 'zoomBtn', 'popoutBtn', 'displayToggle']] List of viewHeader methods to be executed.\n@property {array} [viewConfig.headerBtn] Array of elements to be added to the layer.view header.\n*/\nfunction viewConfig(layer) {\n  // Spread viewConfig into defaults.\n  layer.viewConfig = {\n    displayToggle: true,\n    zoomBtn: true,\n    zoomToFilteredExtentBtn: true,\n    hideDisabled: false,\n    ...layer.viewConfig,\n  };\n\n  // layer.zoomBtn is the legacy configuration for layer.viewConfig.zoomBtn\n  if (layer.zoomBtn === false) {\n    delete layer.viewConfig.zoomBtn;\n    delete layer.zoomBtn;\n  }\n\n  // layer.popout is the legacy configuration for layer.viewConfig.popoutBtn\n  layer.viewConfig.popoutBtn ??= layer.popout;\n\n  // The zoomBtn and hideDisabled is not possible without a tables config.\n  if (!layer.tables) {\n    delete layer.viewConfig.zoomBtn;\n    delete layer.viewConfig.hideDisabled;\n  }\n\n  // Assign viewConfig.panelOrder from legacy JSON layer config.\n  layer.viewConfig.panelOrder ??= layer.panelOrder;\n\n  // Delete legacy panelOrder config\n  delete layer.panelOrder;\n\n  if (!Array.isArray(layer.viewConfig.panelOrder)) {\n    // Assign default panelOrder if not a config array.\n    layer.viewConfig.panelOrder = [\n      'draw-drawer',\n      'dataviews-drawer',\n      'filter-drawer',\n      'style-drawer',\n      'meta',\n    ];\n  }\n\n  // Create content from layer view panels and plugins\n  layer.viewConfig.content = Object.keys(layer)\n    .map((key) => mapp.ui.layers?.panels?.[key]?.(layer))\n    .filter((panel) => typeof panel !== 'undefined');\n\n  if (Array.isArray(layer.viewConfig.panelOrder)) {\n    // Sort the content array according to the data-id in the panelOrder array.\n    layer.viewConfig.content.sort((a, b) => {\n      return layer.viewConfig.panelOrder.findIndex(\n        (chk) => chk === a.dataset?.id,\n      ) < layer.viewConfig.panelOrder.findIndex((chk) => chk === b.dataset?.id)\n        ? 1\n        : -1;\n    });\n  }\n\n  // layer.classList is the legacy configuration for layer.viewConfig.classList\n  layer.viewConfig.classList ??= layer.classList || '';\n\n  // Add default class for layer-view drawer.\n  layer.viewConfig.classList += ` layer-view `;\n\n  // Add empty class to prevent expanding an empty drawer.\n  layer.viewConfig.classList += layer.viewConfig.content.length\n    ? ''\n    : ' empty ';\n\n  if (!Array.isArray(layer.viewConfig.headerOrder)) {\n    // Assign default headerOrder if not a config array.\n    // Items which are not defined in the viewConfig will be filtered out.\n    layer.viewConfig.headerOrder = [\n      'zoomToFilteredExtentBtn',\n      'zoomBtn',\n      'popoutBtn',\n      'displayToggle',\n    ].filter((key) => layer.viewConfig[key]);\n  }\n\n  layer.viewConfig.headerBtn ??= [];\n\n  for (const method of layer.viewConfig.headerOrder) {\n    const el = mapp.ui.layers.viewHeader[method]?.(layer);\n    layer.viewConfig.headerBtn.push(el);\n  }\n}\n\n/**\n@function changeEnd\n\n@description\nThe changeEnd method is assigned to the mapview.Map changeEnd event listener for layer with a tables object.\n\nLayer with a tables object maybe zoom restricted.\n\nThe [layer.tableCurrent()]{@link module:/layer/decorate~tableCurrent} method is called to determine whether the layer has a table configured for the current zoom level.\n\nNested elements will be disabled if a layer can not be displayed.\n\n@param {layer} layer A decorated mapp layer.\n@property {HTMLElement} layer.view The layer view element.\n*/\nfunction changeEnd(layer) {\n  if (!layer.tableCurrent) return;\n\n  // Get array of nested elements excluding the .header element.\n  const nestedElements = Array.from(\n    layer.view.querySelectorAll(':scope > :not(.header)'),\n  );\n\n  // Check whether the layer can be displayed at current zoom.\n  if (layer.tableCurrent()) {\n    if (layer.viewConfig.hideDisabled) {\n      layer.view.classList.remove('display-none');\n    }\n\n    // The zoomBtn is hidden if the layer is in range.\n    if (layer.zoomBtn instanceof HTMLElement) {\n      layer.zoomBtn.style.setProperty('display', 'none');\n    }\n\n    layer.view\n      .querySelector('[data-id=\"display-toggle\"]')\n      ?.classList.remove('disabled');\n\n    // Enable all drawer elements in array.\n    nestedElements.forEach((el) => {\n      el.disabled = false;\n      el.classList.remove('disabled');\n    });\n  } else if (layer.table || layer.tables) {\n    // The zoomBtn is displayed outside if the layer is out of range.\n    if (layer.zoomBtn instanceof HTMLElement) {\n      layer.zoomBtn.style.removeProperty('display');\n    }\n\n    // Collapse drawer and disable layer.view.\n    layer.view.classList.remove('expanded');\n\n    const expandedDrawer = layer.view.querySelectorAll('.expanded');\n\n    // Collapse any expanded elements within layer.view drawer.\n    [...expandedDrawer].forEach((drawer) =>\n      drawer.classList.remove('expanded'),\n    );\n\n    layer.view\n      .querySelector('[data-id=\"display-toggle\"]')\n      ?.classList.add('disabled');\n\n    // Disable all drawer elements in array.\n    nestedElements.forEach((el) => {\n      el.disabled = true;\n      el.classList.add('disabled');\n    });\n\n    if (layer.viewConfig.hideDisabled) {\n      layer.view.classList.add('display-none');\n    }\n  }\n}\n", "/**\n### /ui/layers/viewHeader\n\nThe module exports an object referencing methods to create elements for the layer view header.\n\nThis allows for plugins to add custom methods to mapp.ui.layers.viewHeader{} or override existing methods.\n\n@module /ui/layers/viewHeader\n*/\n\nexport default {\n  zoomToFilteredExtentBtn,\n  zoomBtn,\n  popoutBtn,\n  displayToggle,\n};\n\n/**\n@function zoomToFilteredExtentBtn\n\n@description\nThe method creates and returns a button element which will call the [layer.zoomToExtent]{@link module:/layer/decorate~zoomToExtent} method.\n\n@param {layer} layer\n@property {object} layer.filter The layer filter configuration.\n@property {object} filter.current Filter that are currently applied to layer data requests.\n@returns {HTMLElement} Button element.\n*/\nfunction zoomToFilteredExtentBtn(layer) {\n  const btnStyle = Object.keys(layer.filter.current).length\n    ? ''\n    : 'display: none;';\n\n  const zoomToFilteredExtentBtn = mapp.utils.html.node`<button\n    data-id=zoomToFilteredExtentBtn\n    title=${mapp.dictionary.layer_zoom_to_extent}\n    style=${btnStyle}\n    class=\"notranslate material-symbols-outlined\"\n    onclick=${async (e) => {\n      // disable button if no locations were found.\n      e.target.disabled = !(await layer.zoomToExtent());\n      layer.show();\n    }}>filter_alt`;\n\n  function zoomToFilteredExtentBtn_changeEnd(layer) {\n    if (Object.keys(layer.filter.current).length) {\n      zoomToFilteredExtentBtn.style.display = 'inline-block';\n    } else {\n      zoomToFilteredExtentBtn.style.display = 'none';\n    }\n  }\n  layer.changeEndCallbacks.push(zoomToFilteredExtentBtn_changeEnd);\n\n  return zoomToFilteredExtentBtn;\n}\n\n/**\n@function zoomBtn\n\n@description\nThe method creates and returns a button element which will call the zoomToRange method.\n\n@param {layer} layer\n@returns {HTMLElement} Button element.\n*/\nfunction zoomBtn(layer) {\n  const zoomBtn = mapp.utils.html.node`<button\n    data-id=\"zoom-to\"\n    title=${mapp.dictionary.zoom_to}\n    class=\"notranslate material-symbols-outlined\"\n    onclick=${() => zoomToRange(layer)}>arrows_input`;\n\n  //Hide the zoomBtn if the layer is able to display.\n  function zoomBtn_changeEnd(layer) {\n    if (layer.tableCurrent()) {\n      zoomBtn.style.display = 'none';\n      return;\n    }\n    zoomBtn.style.display = 'block';\n  }\n\n  layer.changeEndCallbacks.push(zoomBtn_changeEnd);\n  return zoomBtn;\n}\n\n/**\n@function zoomToRange\n\n@description\nThe zoomToRange method set layer.mapview zoom to be in range of the layer.tables configuration and calls the [layer.show()]{@link module:/layer/decorate~show} method.\n\n@param {layer} layer A decorated mapp layer.\n@property {Object} layer.tables The zoom range table configuration.\n*/\nfunction zoomToRange(layer) {\n  const minZoom = Object.entries(layer.tables).find((entry) => !!entry[1])[0];\n\n  const maxZoom = Object.entries(layer.tables)\n    .reverse()\n    .find((entry) => !!entry[1])[0];\n\n  const view = layer.mapview.Map.getView();\n\n  view.getZoom() < minZoom ? view.setZoom(minZoom) : view.setZoom(maxZoom);\n\n  layer.show();\n}\n\n/**\n@function zoomBtn\n\n@description\nThe method creates and returns a button element which will popout the layer view into a dialog.\n\n@param {layer} layer\n@returns {HTMLElement} Button element.\n*/\nfunction popoutBtn(layer) {\n  const popoutBtn = mapp.utils.html.node`<button\n    data-id=\"popout-btn\"\n    class=\"notranslate material-symbols-outlined\">open_in_new`;\n\n  return popoutBtn;\n}\n\n/**\n@function displayToggle\n\n@description\nThe method creates and returns a button element which will toggle the layer display.\n\n@param {layer} layer\n@returns {HTMLElement} Button element.\n*/\nfunction displayToggle(layer) {\n  const btnClass = `notranslate material-symbols-outlined toggle ${\n    layer.zoomDisplay || layer.display ? 'toggle-on' : ''\n  }`;\n\n  const displayToggle = mapp.utils.html.node`<button\n    data-id=display-toggle\n    title=${mapp.dictionary.layer_visibility}\n    class=${btnClass}\n    onclick=${(e) => {\n      if (e.target.classList.toggle('toggle-on')) {\n        layer.show();\n      } else {\n        layer.hide();\n      }\n    }}>`;\n\n  // Add on callback for toggle button.\n  layer.showCallbacks.push(() => {\n    displayToggle.classList.add('toggle-on');\n  });\n\n  // Remove on callback for toggle button.\n  layer.hideCallbacks.push(() => {\n    !layer.zoomDisplay && displayToggle.classList.remove('toggle-on');\n  });\n\n  return displayToggle;\n}\n", "/**\n## /ui/layers\n\nThe module requires and exports methods to build a MAPP layers listview and layer.view elements for the MAPP.UI.\n\n@requires /ui/layers/filters\n@requires /ui/layers/legends\n@requires /ui/layers/listview\n@requires /ui/layers/panels\n@requires /ui/layers/view\n@requires /ui/layers/viewHeader\n\n@module /ui/layers\n*/\n\nimport filters from './filters.mjs';\nimport legends from './legends/_legends.mjs';\nimport listview from './listview.mjs';\nimport panels from './panels/_panels.mjs';\nimport view from './view.mjs';\nimport viewHeader from './viewHeader.mjs';\n\nexport default {\n  filters,\n  legends,\n  listview,\n  panels,\n  view,\n  viewHeader,\n};\n", "/**\nThe boolean [location] entries module exports the boolean function as default.\n\n@module /ui/locations/entries/boolean\n*/\n\n/**\n@function boolean\n\n@description\n## mapp.ui.locations.entries.boolean(entry)\nReturns a HTML element as visual representation of the boolean value. A checkbox element will be returned if the entry is editable.\n\n```js\n{\n  \"title\": \"Flag\",\n  \"label\": \"Checkbox\",\n  \"edit\": true,\n  \"field\": \"flag\",\n  \"type\": \"boolean\",\n  \"inline\": true\n}\n```\n\n@param {infoj-entry} entry type:boolean infoj entry.\n\n@returns {HTMLElement} Location view entry node.\n*/\nexport default function boolean(entry) {\n  if (entry.edit) {\n    return mapp.ui.elements.chkbox({\n      checked: entry.newValue !== undefined ? entry.newValue : entry.value,\n      disabled: !entry.edit,\n      label: entry.label || entry.title,\n      onchange: (checked) => {\n        entry.newValue = checked;\n        entry.location.view?.dispatchEvent(\n          new CustomEvent('valChange', {\n            detail: entry,\n          }),\n        );\n      },\n    });\n  }\n\n  entry.label ??= '';\n\n  const iconName = entry.value ? 'check' : 'close';\n\n  return mapp.utils.html.node`\n    <div class=\"link-with-img\">\n      <div class=\"notranslate material-symbols-outlined\">${iconName}</div>\n      <span>${entry.label}`;\n}\n", "/**\n## /ui/locations/entries/cloudinary\n\nThe cloudinary module exports a method to upload or destroy resources with signed requests on cloudinary.\n\nThe exported method creates an interface in the location view with input for images and documents.\n\n@requires /utils/xhr\n@requires /utils/imagePreview\n\n@module /ui/locations/entries/cloudinary\n*/\n\nconst types = {\n  documents,\n  image,\n  images,\n};\n\nexport default (entry) => types[entry.type](entry);\n\n/**\n@function image\n\n@description\nThe image entry.type function returns an image with a button to detroy the image the entry has a value and is editable.\n\n@param {Object} entry \n@property {string} entry.value An existing cloudinary resource URL.\n@property {Object} entry.edit The entry is editable.\n\n@returns {HTMLElement} Returns either an image element or an input element to upload an image.\n*/\nfunction image(entry) {\n  if (entry.value) {\n    // The trash button will only be created when entry is editable.\n    const trashBtn =\n      entry.edit &&\n      mapp.utils.html`<button \n      title=\"${mapp.dictionary.delete}\"\n      class=\"notranslate material-symbols-outlined color-danger delete\"\n      data-name=${entry.value.replace(/^.*\\//, '').replace(/\\.([\\w-]{3})/, '')}\n      data-src=${entry.value}\n      onclick=${(e) => trash(e, entry, mapp.dictionary.remove_image_confirm)}>delete`;\n\n    return mapp.utils.html.node`<div class=\"img-item\"><img\n      style=\"width: 100%\"\n      src=${entry.value}\n      onclick=${mapp.ui.utils.imagePreview}>\n      ${trashBtn}`;\n  } else if (entry.edit) {\n    // Return image upload input for editable entry without a value.\n    return mapp.utils.html.node`<div \n      class=\"drag_and_drop_zone\"\n      ondrop=${(e) => {\n        // the input element onchange trigger must be prevented.\n        e.preventDefault();\n        upload(e, entry);\n      }}>\n      <p><span class=\"notranslate material-symbols-outlined add\">add_a_photo</span>${mapp.dictionary.drag_and_drop_image}</p>\n      <input\n        type=\"file\"\n        accept=\"image/*;capture=camera\" onchange=${(e) => {\n          upload(e, entry);\n        }}>`;\n  }\n}\n\n/**\n@function images\n\n@description\nThe images entry.type function returns an image-grid element of images with the ability to destroy resources if the entry is editable. An input is show to upload additional images if the entry is editable.\n\n@param {Object} entry \n@property {Array} entry.value An array of existing cloudinary resource URLs.\n@property {Object} entry.edit The entry is editable.\n@returns {HTMLElement} A grid element with existing images and an input to upload additional images on editable entry.\n*/\nfunction images(entry) {\n  const images = [];\n\n  entry.value?.map((image) => {\n    // The trash button will only be created when entry is editable.\n    const trashBtn =\n      entry.edit &&\n      mapp.utils.html`<button title=\"${mapp.dictionary.delete}\"\n      class=\"notranslate material-symbols-outlined color-danger delete\"\n      data-name=${image.replace(/^.*\\//, '').replace(/\\.([\\w-]{3})/, '')}\n      data-src=${image}\n      onclick=${(e) => trash(e, entry, mapp.dictionary.remove_image_confirm)}>delete`;\n\n    images.push(mapp.utils.html`<div class=\"img-item\"><img \n      src=${image}\n      onclick=${mapp.ui.utils.imagePreview}>\n      ${trashBtn}`);\n  });\n\n  // Push upload input into images array.\n  if (entry.edit) {\n    const drap_and_drop_zone = mapp.utils.html.node`<div \n      class=\"drag_and_drop_zone mobile-display-none\"\n      ondrop=${(e) => {\n        // the input element onchange trigger must be prevented.\n        e.preventDefault();\n        upload(e, entry);\n      }}>\n      <p><span class=\"notranslate material-symbols-outlined add\">add_a_photo</span>${mapp.dictionary.drag_and_drop_image}</p>\n      <input\n        type=\"file\"\n        accept=\"image/*;capture=camera\" onchange=${(e) => {\n          upload(e, entry);\n        }}>`;\n\n    images.push(drap_and_drop_zone);\n  }\n\n  if (!images.length) return;\n\n  return mapp.utils.html.node`<div class=\"images-grid\">${images}`;\n}\n\n/**\n@function documents\n\n@description\nThe documents entry.type function returns an document-list element of documents with the ability to destroy resources if the entry is editable. An input is show to upload additional documents if the entry is editable.\n\n@param {Object} entry \n@returns {HTMLElement} A list element with existing documents and an input to upload additional documents on editable entry.\n*/\nfunction documents(entry) {\n  const docs = [];\n\n  entry.value?.map((doc) => {\n    const trashBtn =\n      entry.edit &&\n      mapp.utils.html`<button \n      title=\"${mapp.dictionary.delete}\"\n      class=\"notranslate material-symbols-outlined color-danger delete\"\n      data-name=${doc.replace(/^.*\\//, '').replace(/\\.([\\w-]{3})/, '')}\n      data-href=${doc}\n      onclick=${(e) => trash(e, entry, mapp.dictionary.remove_document_confirm)}>delete`;\n\n    const title = doc.replace(/^.*\\//, '').replace(/\\.([\\w-]{3})/, '');\n\n    docs.push(mapp.utils.html`<div class=\"link-with-img\">\n      <a target=\"_blank\" href=${doc}>${title}</a>${trashBtn}`);\n  });\n\n  if (entry.edit) {\n    const drag_and_drop_zone = mapp.utils.html.node`<div \n      class=\"drag_and_drop_zone mobile-display-none\"\n      ondrop=${(e) => {\n        // the input element onchange trigger must be prevented.\n        e.preventDefault();\n        upload(e, entry);\n      }}>\n      <p><span class=\"notranslate material-symbols-outlined add-doc\">add_notes</span>${mapp.dictionary.drag_and_drop_doc}</p>\n      <input type=\"file\"\n        accept=\".txt,.pdf,.doc,.docx,.xls,.xlsx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document;\"\n        onchange=${(e) => upload(e, entry)}>`;\n\n    docs.unshift(drag_and_drop_zone);\n  }\n\n  if (!docs.length) return;\n\n  return mapp.utils.html.node`<div>${docs}`;\n}\n\n/**\n@function upload\n\n@description\nThe upload event can be assigned to the onchange event of an input to upload the resource selected in the input element.\n\n@param {event} e The onchange event from the input element to select a resource.\n@param {Object} entry  \n*/\nasync function upload(e, entry) {\n  const reader = new FileReader();\n\n  const file = e.type === 'drop' ? e.dataTransfer?.files[0] : e.target.files[0];\n\n  if (!file) return;\n\n  // Location view must disabled while uploading resource.\n  entry.location.view?.classList.add('disabled');\n\n  const onload = {\n    documents: docLoad,\n    image: newImage,\n    images: newImage,\n  };\n\n  reader.onload = (e) => onload[entry.type](e, entry, file);\n\n  reader.readAsDataURL(file);\n}\n\n/**\n@function newImage\n\n@description\nThe method creates a new Image object with the event target result as source. The imgOnload method is assigned as image onload.\n\n@param {event} e \n@param {Object} entry \n*/\nfunction newImage(e, entry, file) {\n  const img = new Image();\n  img.onload = async () => imgOnload(entry, img, file);\n  img.src = e.target.result;\n}\n\n/**\n@function imgOnload\n\n@description\nThe onload method of the image element will create a canvas element and apply a size transformation in regards to the max_size entry property.\n\nA signeUrl will be requested to upload a dataURL for the canvas to the cloudinary service.\n\nA successful cloudinary upload will respond with an item reference for the cloudinary resource.\n\nThe updateLocation method is called to store the item reference to the location [entry] field.\n\n@param {image} img The image element to upload.\n@param {object} entry \n@property {integer} [entry.max_size=1024] The default max_size applied to image size transformation.\n*/\nasync function imgOnload(entry, img, file) {\n  const canvas = document.createElement('canvas');\n\n  //Assign default max_size\n  entry.max_size ??= 1024;\n\n  // resize\n  if (img.width > img.height && img.width > entry.max_size) {\n    img.height *= entry.max_size / img.width;\n    img.width = entry.max_size;\n  } else if (img.height > entry.max_size) {\n    img.width *= entry.max_size / img.height;\n    img.height = entry.max_size;\n  }\n\n  canvas.width = img.width;\n  canvas.height = img.height;\n\n  canvas.getContext('2d').drawImage(img, 0, 0, img.width, img.height);\n\n  const public_id =\n    file.name.replace(/^.*\\//, '').replace(/\\.([\\w-]{3})/, '') +\n    entry.suffix_date\n      ? `@${Date.now()}`\n      : '';\n\n  const signedUrl = await getSignedUrl(entry, { public_id });\n\n  // Failed to generate a signedUrl for the request.\n  if (!signedUrl) return;\n\n  const data = new FormData();\n\n  data.append('file', canvas.toDataURL('image/jpeg', 0.5));\n\n  const response = await fetch(signedUrl, {\n    body: data,\n    method: 'post',\n  });\n\n  if (!response || response.error) {\n    const errorDetail = response?.error?.message\n      ? `Error: ${response.error.message}`\n      : '';\n    const errorMessage = `Cloudinary Image upload failed! ${errorDetail}`;\n    mapp.ui.elements.alert({ text: errorMessage });\n    return;\n  }\n\n  const responseJson = await response.json();\n\n  if (entry.type === 'image') {\n    // Only a single image is supported by the entry.type.\n    entry.value = responseJson.secure_url;\n  } else {\n    // Add the secure_url to the entry values array and update the location.\n    entry.value = Array.isArray(entry.value)\n      ? entry.value.concat([responseJson.secure_url])\n      : [responseJson.secure_url];\n  }\n\n  updateLocation(entry);\n}\n\n/**\n@function docLoad\n\n@description\nThe docLoad method handles the upload of document files to via signed URL to cloudinary.\n\n@param {event} e \n@param {Object} entry \n*/\nasync function docLoad(e, entry, file) {\n  const date = new Date();\n  const stamp = `${date.getMonth() + 1}-${date.getDate()}T${date.getHours()}:${date.getMinutes()}`;\n  const file_type = file.name.substring(file.name.lastIndexOf('.'));\n  const public_id = `${file.name.replace(file_type, '')}-${stamp}${file_type}`;\n\n  const signedUrl = await getSignedUrl(entry, { public_id });\n\n  // Failed to generate a signedUrl for the request.\n  if (!signedUrl) return;\n\n  const data = new FormData();\n\n  data.append('file', e.target.result.toString());\n\n  const response = await fetch(signedUrl, {\n    body: data,\n    method: 'post',\n  });\n\n  if (!response || response.error) {\n    const errorDetail = response?.error?.message\n      ? `Error: ${response.error.message}`\n      : '';\n\n    mapp.ui.elements.alert(`Cloudinary document upload failed! ${errorDetail}`);\n    return;\n  }\n\n  // Add the secure_url to the entry values array and update the location.\n  const responseJson = await response.json();\n\n  entry.value = Array.isArray(entry.value)\n    ? entry.value.concat([responseJson.secure_url])\n    : [responseJson.secure_url];\n\n  updateLocation(entry);\n}\n\n/**\n@function trash\n\n@description\nThe trash function handles the deletion an image file.\n\n@param {event} e \n@param {Object} entry \n*/\nasync function trash(e, entry, confirm_message) {\n  const confirm_remove = await mapp.ui.elements.confirm({\n    text: confirm_message,\n  });\n\n  if (!confirm_remove) return;\n\n  const public_id = decodeURIComponent(e.target.dataset.name);\n\n  const signedUrl = await getSignedUrl(entry, { destroy: true, public_id });\n\n  // Failed to generate a signedUrl for the request.\n  if (!signedUrl) return;\n\n  // Send request to cloudinary to destroy resource.\n  await fetch(signedUrl, { method: 'post' });\n\n  // Remove the resource link from the entry values array and update the location.\n  const valueSet = new Set(entry.value);\n\n  valueSet.delete(e.target.dataset.src || e.target.dataset.href);\n\n  if (entry.type === 'image') {\n    entry.value = null;\n  } else {\n    entry.value = valueSet.size ? Array.from(valueSet) : null;\n  }\n\n  updateLocation(entry);\n}\n\n/**\n@function updateLocation \n\n@description\nThe method disables the location view before updating the location data and re-creating the cloudinary entry.type interface.\n\n@param {Object} entry\n@property {HTMLElement} entry.node The location view element which holds the cloudinary interface elements.\n*/\nasync function updateLocation(entry) {\n  entry.location.view?.classList.add('disabled');\n\n  await mapp.utils.xhr({\n    body: JSON.stringify({ [entry.field]: entry.value }),\n    method: 'POST',\n    url:\n      `${entry.location.layer.mapview.host}/api/query?` +\n      mapp.utils.paramString({\n        id: entry.location.id,\n        layer: entry.location.layer.key,\n        locale: entry.location.layer.mapview.locale.key,\n        table: entry.location.table,\n        template: 'location_update',\n      }),\n  });\n\n  // Render the type interface into the location view entry.node\n  entry.node.replaceChildren(\n    mapp.utils.html.node`<div class=\"label\">${entry.title}`,\n    types[entry.type](entry),\n  );\n\n  entry.location.view?.classList.remove('disabled');\n}\n\n/**\n@function getSignedUrl\n@async\n@description\nSigns a parameterised request to upload or destroy a resource on cloudinary.\n\n@param {Object} entry \n@param {Object} params \n@property {string} entry.cloudinary_folder\n@property {string} params.public_id\n@property {boolean} [params.destroy] The request is to detroy a stored resource.\n\n@returns {Promise<String>} signedURL\n*/\nasync function getSignedUrl(entry, params) {\n  const paramString = mapp.utils.paramString({\n    ...params,\n    folder: entry.cloudinary_folder,\n  });\n\n  const signedUrl = await mapp.utils.xhr({\n    responseType: 'text',\n    url: `${entry.location.layer.mapview.host}/api/sign/cloudinary?${paramString}`,\n  });\n\n  if (signedUrl instanceof Error) {\n    console.error(signedUrl);\n  }\n\n  return signedUrl;\n}\n", "/**\n## ui/locations/entries/dataview\n\nThe dataview entry module exports the dataview method as mapp.ui.locations.entries.dataview()\n\n@requires /ui/Dataview\n\n@module /ui/locations/entries/dataview\n*/\n\n/**\n@function dataview\n\n@description\nThe entry object provided to the dataview entry method is effectively a dataview object.\n\nThe dataview data property is assigned from the entry value if not undefined in the location_get query response.\n\nThe assignTargetFromString method is called to consolidate the required dataview target as a HTMLElement.\n\nThe dataview will be shown if the boolean display property is true.\n\nThe HTMLElement returned from the method will contain a checkbox element if a label string property has been configured and a location view dataview target element.\n\n@param {infoj-entry} entry type:dataview entry.\n@property {location} entry.location The entry location.\n@property {layer} entry.layer The entry layer will be assigned from the entry.location.\n@property {Object} [entry.data] The dataview data.\n@property {string} [entry.label] Label for checkbox element.\n@property {string} [entry.dataview] The dataview type, eg. \"chartjs\", \"tabulator\".\n@property {HTMLElement} [entry.target=\"location\"] The dataview will be rendered into the target HTMLElement.\n@property {Function} [entry.update] The dataview update method.\n@property {boolean} [entry.display] The dataview display flag.\n@property {Function} [entry.show] The dataview show method.\n@property {Function} [entry.hide] The dataview hide method.\n\n@return {HTMLElement} Location view dataview and checkbox.\n*/\nexport default function dataview(entry) {\n  if (entry.value !== undefined) {\n    entry.data = entry.value;\n  }\n\n  // An empty data array is assumed to be null.\n  if (entry.data?.length === 0) {\n    entry.data = null;\n  }\n\n  // Dataview queries may be layer queries.\n  entry.layer ??= entry.location.layer;\n\n  assignTargetFromString(entry);\n\n  // A dataview must have a HTMLElement target\n  if (entry.target instanceof HTMLElement === false) return;\n\n  // Decorate the dataview entry.\n  if (mapp.ui.Dataview(entry) instanceof Error) return;\n\n  //If queryCheck is true and theres no data, don't dislpay the dataview\n  if ((!entry.data || entry.data instanceof Error) && entry.queryCheck) {\n    entry.chkbox?.classList?.add?.('disabled');\n    entry.chkbox.querySelector('input').checked = false;\n    entry.display = false;\n    entry.hide();\n  }\n\n  // Dataview should be displayed.\n  entry.display && entry.show?.();\n\n  // Return elements to location view.\n  return mapp.utils.html.node`\n    ${entry.chkbox || ''}\n    ${entry.locationViewTarget || ''}`;\n}\n\n/**\n@function assignTargetFromString\n\n@description\nThe method assigns \"location\" as the default dataview [entry] target.\n\nA lookup for an element with the id property matching the target string will be attempted. The dataview will always be displayed in the matched element and the method will shortcircuit.\n\nThe mapp default view has a tabview element with a \"tabview\" data-id property. The tab added to the tabview will be assigned as HTMLElement target.\n\nWithout a matched HTMLElement; A target <div> will be created and assigned as locationViewTarget to the dataview [entry].\n\n@param {infoj-entry} entry type:dataview entry.\n@property {string} [entry.target=\"location\"] Target string identifying a HTMLElement target.\n*/\nfunction assignTargetFromString(entry) {\n  // The location [view] is the default target for a location dataview entry.\n  if (!entry.target) {\n    entry.target = 'location';\n  }\n\n  if (typeof entry.target !== 'string') return;\n\n  if (entry.target === 'dialog') {\n    mapp.ui.utils.dataviewDialog(entry);\n\n    return;\n  }\n\n  if (document.getElementById(entry.target)) {\n    entry.target = document.getElementById(entry.target);\n    entry.display = true;\n    return;\n  }\n\n  if (document.querySelector(`[data-id=${entry.target}]`)) {\n    // Tabview entries return empty on mobile.\n    if (mapp.utils.mobile()) return;\n\n    // Assign tabview element from queryselector\n    entry.tabview ??= document.querySelector(`[data-id=${entry.target}]`);\n\n    // Assign border style based on the location view record (from list)\n    entry.tab_style ??= `border-bottom: 3px solid ${\n      entry.location.style?.strokeColor || 'var(--color-primary)'\n    }`;\n\n    // Assign target html element for dataview.\n    entry.target = mapp.utils.html.node`\n      <div class=\"dataview-target\">`;\n\n    // Create tab after dataview creation is complete.\n    entry.tabview.dispatchEvent(\n      new CustomEvent('addTab', {\n        detail: entry,\n      }),\n    );\n\n    return;\n  }\n\n  // Dataview will be rendered into location view.\n  const location_class = `location ${entry.key || entry.query}`;\n\n  entry.locationViewTarget = mapp.utils.html.node`\n    <div class=\"${location_class}\">`;\n\n  entry.target = entry.locationViewTarget;\n}\n", "/**\n## /ui/locations/entries/date\n\nThe date entry module exports a default date method to process infoj entries with an unix datetime integer value.\n\n@requires /utils/dateTime\n\n@module /ui/locations/entries/date\n*/\n\nexport default date;\n\n/**\n@function date\n\n@description\nThe date entry method returns a formatted date[time] string or an input element to edit date[time] entry values.\n\nDate[time] values returned from the input element will be stored as UnixEpoch integer values.\n\n@param {infoj-entry} entry type:date or type:datetime entry.\n@property {integer} entry.value date[time] as unix epoch.\n@property {integer} [entry.newValue] updated entry.value which has not yet been saved.\n@property {Object} [entry.edit] the entry value is editable.\n\n@return {HTMLElement} Formatted datestring or date input if editable.\n*/\nfunction date(entry) {\n  if (entry.edit) {\n    if (entry.newValue === true) {\n      entry.newValue = mapp.utils.temporal.dateToUnixEpoch();\n\n      entry.location.view?.dispatchEvent(\n        new CustomEvent('valChange', {\n          detail: entry,\n        }),\n      );\n    }\n\n    const timestamp = entry.newValue || entry.value;\n\n    if (typeof timestamp === 'string') {\n      console.warn(`${entry.type} field: ${entry.field} should be an integer.`);\n    }\n\n    const value = mapp.utils.temporal[entry.type](parseInt(timestamp));\n\n    // return date/time input\n    return mapp.utils.html.node`<input\n      type=${entry.type === 'datetime' ? 'datetime-local' : 'date'}\n      value=\"${value}\"\n      onchange=${(e) => {\n        if (e.target.value === '') {\n          entry.newValue = null;\n        } else {\n          entry.newValue = mapp.utils.temporal.dateToUnixEpoch(e.target.value);\n        }\n\n        entry.location.view?.dispatchEvent(\n          new CustomEvent('valChange', {\n            detail: entry,\n          }),\n        );\n      }}>`;\n  }\n\n  // Assign val for non-editable entry.\n  const val = entry.value ? mapp.utils.temporal.dateString(entry) : 'null';\n\n  entry.css_val ??= '';\n\n  const node = mapp.utils.html.node`<div\n    class=\"val\"\n    style=${entry.css_val}>\n    ${val}`;\n\n  return node;\n}\n", "/**\n## ui/locations/entries/geometry\n\nThe geometry entry module exports a default entry method to process infoj entries with a geometry value.\n\nDictionary entries:\n- delete_geometry\n- modify_geometry\n- edit_dialog_title\n- edit_dialog_cancel_drawing\n- edit_dialog_remove_vertex\n- edit_dialog_modify_shape\n- edit_dialog_save\n\n@requires /dictionary \n@requires /utils/olStyle\n@requires /ui/elements/chkbox\n@requires /ui/elements/helpDialog\n@requires /ui/elements/drawing\n\n@module /ui/locations/entries/geometry\n*/\n\n/**\n@function geometry\n\n@description\nThe geometry method will create an OL entry.Style object from the entry.style{} spread into the location.style{}. The geometry will not be rendered with entry.style null.\n\nThe entry will be decorated with a show() method if not implicit.\n\nBy default a checkbox element will be returned which can trigger the show method or will hide the geometry in the mapview if toggled off.\n\nDrawing elements will be displayed in the entry.node for the entry.draw{} configuration.\n\nThe draw object can be nested within the entry.edit{} configuration object. In this case the edit and draw elements will only be visible if editing is enabled for the location.\n\nA vector layer entry.L will be created to render a style feature for the geometry entry in the entry.mapview.\n\n@param {infoj-entry} entry type:geometry entry.\n@property {location} entry.location The entry location.\n@property {boolean} [entry.display=false] Whether the geometry should be displayed in the mapview.\n@property {Object} entry.value geometry as JSON value.\n@property {Object} entry.style MAPP style configuration.\n@property {string} [entry.format='GeoJSON'] format for entry.value geometry.\n@property {Object} [entry.edit] configuration object for editing the geometry.\n@property {Object} [entry.draw] configuration object for mapview draw interaction.\n@property {Function} [entry.api] Method to request geometry from an external API.\n\n@return {HTMLElement} elements for the location view.\n*/\nexport default function geometry(entry) {\n  entry.format ??= 'GeoJSON';\n\n  // Assigning the mapview to the entry makes the entry behave like a layer object for draw and modify interactions.\n  entry.mapview ??= entry.location.layer.mapview;\n\n  if (typeof entry.value === 'string') {\n    // Parse string value as JSON.\n    entry.value = JSON.parse(entry.value);\n  }\n\n  entry.srid ??= entry.location.layer.srid;\n  entry.zIndex ??= entry.location.layer.zIndex + 1 || 99;\n\n  // Should be false if nullish.\n  entry.display ??= false;\n\n  // Drawing is only available within an edit context.\n  if (entry.edit?.draw) {\n    entry.draw = entry.edit.draw;\n  }\n\n  // Editing with drawing is toggled off.\n  if (entry._edit?.draw) delete entry.draw;\n\n  // Return if entry has no geometry value and cannot be drawn in to.\n  if (!entry.value && !entry.draw && !entry.api) {\n    entry.location.removeLayer(entry);\n    return;\n  }\n\n  if (entry.style !== null) {\n    // Assign entry.style to location.style. Allow for `style: {}` to apply no styling\n    entry.style = { ...entry.location.style, ...entry.style };\n\n    // Create ol style from entry.style if not yet defined.\n    entry.Style ??= mapp.utils.style(entry.style);\n  }\n\n  entry.show ??= show;\n  entry.hide ??= hide;\n  entry.getExtent ??= getExtent;\n  entry.modify ??= modify;\n  entry.label ??= 'Geometry';\n  // Must always be set in case the geometry is re-rendered and now has data.\n  entry.disabled = !entry.value && !entry.api;\n\n  // Create checkbox to control geometry display.\n  entry.chkbox = mapp.ui.elements.chkbox({\n    checked: entry.display,\n    data_id: `chkbox-${entry.key}`,\n    disabled: entry.disabled,\n    label: entry.label,\n    onchange: (checked) => {\n      checked ? entry.show() : entry.hide();\n    },\n  });\n\n  if (!Array.isArray(entry.elements)) {\n    entry.elements = entry.api_elements || [];\n\n    draw(entry);\n\n    edit(entry);\n  }\n\n  if (!entry.edit) delete entry.elements;\n\n  const icon = mapp.ui.elements.legendIcon({\n    height: 24,\n    width: 24,\n    ...entry.style,\n  });\n\n  entry.display && entry.show();\n\n  return mapp.utils.html.node`\n    <div class=\"flex-spacer\">${entry.chkbox}${icon}</div>\n    ${entry.elements}`;\n}\n\n/**\n@function getExtent\n@this infoj-entry\n\n@description\nReturns the extent of the geometry. \n\n@returns {Array} an array representing an openlayers extent\n*/\nfunction getExtent() {\n  if (!this.display) return;\n  if (!this.L) return;\n  return this.L.getSource().getExtent();\n}\n\n/**\n@function show\n@async\n@this infoj-entry\n\n@description\nThe show method is bound to the geometry type making this the entry object.\n\nThe show method sets the entry.display flag and associated checkbox element status true.\n\nA geometry can be requested from an entry.api() method if no geometry entry.value is present.\n\nAn existing OL vector layer entry.L will be removed from the mapview and deleted.\n\nA new OL vector layer entry.L will be created and added to the mapview.\n*/\nasync function show() {\n  if (this.disabled) return;\n\n  this.location.removeLayer(this);\n\n  this.display = true;\n\n  const chkbox = this.chkbox?.querySelector('input');\n\n  if (chkbox) chkbox.checked = true;\n\n  if (!this.value && this.api) {\n    // Disable location view while awaiting API response.\n    this.blocking && this.location.view?.classList.add('disabled');\n\n    await this.api(this);\n\n    // The api() method should dispatch the location.view event to re-render the list.\n    if (this.blocking) return;\n\n    // A value will not be assigned if the api method request fails.\n    if (!this.value) {\n      this.disabled = true;\n    }\n  }\n\n  // An ol layer L can only be created with a value.\n  if (!this.value) return;\n\n  // Create new geometry layer from entry value\n  this.L = this.location.layer.mapview.geometry(this);\n\n  this.location.Layers.push(this);\n}\n\n/**\n@function hide\n@this infoj-entry\n\n@description\nRemoves the entry.L from the location.layer.mapview. \n*/\nfunction hide() {\n  this.display = false;\n\n  this.location.removeLayer(this);\n}\n\n/**\n@function edit\n@description\nThe edit method will push elements for geometry edits into the entry.elements array.\n\n@param {infoj-entry} entry type:geometry entry.\n@property {Object} [entry.edit] editing must be configured for the geometry entry.\n@property {string} [entry.edit.modify_label] label for the modify button. If not defined, defaults to dictionary term.\n@property {string} [entry.edit.delete_label] label for the delete button. If not defined, defaults to dictionary term.\n@property {boolean} [entry.edit.delete] flag to enable delete button. Without it, only the modify button will be shown.\n@property {Object} [entry.value] entry must have a geometry value to be editable.\n*/\nfunction edit(entry) {\n  if (!entry.edit) return;\n\n  // Editing requires a value to be edited.\n  if (!entry.value) return;\n\n  entry.edit.modify_label ??= mapp.dictionary.modify_geometry;\n\n  entry.edit.modify_btn = mapp.utils.html.node`\n    <button\n      class=\"action wide\"\n      data-id=\"modify-btn\"\n      onclick=${() => {\n        if (entry.edit.modify_btn.classList.toggle('active')) {\n          entry.modify();\n        } else {\n          entry.location.layer.mapview.interactions.highlight();\n        }\n      }}>\n      <span class=\"notranslate material-symbols-outlined\">format_shapes</span>\n      ${entry.edit.modify_label}`;\n\n  entry.elements.push(entry.edit.modify_btn);\n\n  entry.edit.delete_label ??= mapp.dictionary.delete_geometry;\n\n  // Delete is only shown if edit.delete flag is provided.\n  entry.edit.delete &&\n    entry.elements.push(mapp.utils.html`<button class=\"action wide\"\n    onclick=${() => deleteGeometry(entry)}>\n    <span class=\"notranslate material-symbols-outlined color-danger\">ink_eraser</span>\n    <span style=\"color: var(--color-danger)\">${\n      entry.edit.delete_label\n    }</span>`);\n}\n\n/**\n@function deleteGeometry\n@async\n\n@description\nThe method will check whether unsaved changes should be saved. The method will return if the confirm dialog is cancelled.\n\nWithout unsaved changes the geometry will be deleted and the location will be updated.\n\nAll unsaved changes will be confirmed and the geometry will be deleted otherwise.\n\n@param {infoj-entry} entry type:geometry entry.\n*/\nasync function deleteGeometry(entry) {\n  const confirmUpdate = await entry.location.confirmUpdate(deleteUpdate);\n\n  if (confirmUpdate === null) {\n    return;\n  }\n\n  deleteUpdate();\n\n  function deleteUpdate() {\n    entry.display = false;\n    entry.newValue = null;\n    entry.location.update(renderLocationView);\n  }\n\n  function renderLocationView() {\n    delete entry.elements;\n    entry.location.renderLocationView();\n  }\n}\n\n/**\n@function modify\n@async\n@this infoj-entry\n\n@description\nThe modify method will toggle a mapview modify interaction for the entry geometry.\n\nThe entry.show() method will be called prior to the modify interaction.\n*/\nasync function modify() {\n  const entry = this;\n\n  const confirmUpdate = await entry.location.confirmUpdate(() => {\n    entry.location.renderLocationView();\n  });\n\n  if (confirmUpdate === null) {\n    entry.edit.modify_btn.classList.remove('active');\n    return;\n  }\n\n  if (!entry.hideHelp) {\n    const helpDialog = {\n      content: mapp.utils.html.node`<li>\n        <ul>${mapp.dictionary.edit_dialog_cancel_drawing}\n        <ul>${mapp.dictionary.edit_dialog_remove_vertex}</ul>\n        <ul>${mapp.dictionary.edit_dialog_modify_shape}</ul>\n        <ul>${mapp.dictionary.edit_dialog_save}</ul>`,\n      header: mapp.utils.html`<h3>${mapp.dictionary.edit_dialog_title}</h3>`,\n    };\n\n    mapp.ui.elements.helpDialog(helpDialog);\n  }\n\n  !entry.display && entry.show();\n\n  // Remove existing entry geometry layer.\n  entry.location.layer.mapview.Map.removeLayer(entry.L);\n\n  const Feature = entry.L.getSource().getFeatures()[0].clone();\n\n  entry.location.layer.mapview.interactions.modify({\n    Feature,\n    layer: entry.location.layer,\n    snap: entry.edit.snap,\n    srid: entry.srid,\n    callback: (feature) => {\n      entry.edit.modify_btn.classList.remove('active');\n      updateCallback(feature, entry);\n    },\n  });\n}\n\n/**\n@function draw\n\n@description\nThe draw method push drawing interface elements to the entry.elements[] array.\n\n@param {infoj-entry} entry type:geometry entry.\n*/\nfunction draw(entry) {\n  if (!entry.draw) return;\n\n  Object.keys(entry.draw).forEach((key) => {\n    if (entry.draw[key] === true) {\n      entry.draw[key] = {};\n    }\n\n    if (mapp.ui.elements.drawing[key]) {\n      entry.draw[key].callback ??= (feature) => {\n        entry.draw[key].btn.classList.remove('active');\n        updateCallback(feature, entry);\n      };\n\n      const el = mapp.ui.elements.drawing[key](entry);\n\n      entry.elements.push(el);\n    }\n  });\n}\n\n/**\n@function updateCallback\n\n@description\nThe updateCallback method is passed as callback method for the drawing or modify interactions.\n\n@param {object} feature The feature returned from modify or drawing interaction.\n@param {infoj-entry} entry type:geometry entry.\n*/\nfunction updateCallback(feature, entry) {\n  delete entry.mapview.interaction;\n  mapp.ui.elements.helpDialog();\n\n  if (!feature) {\n    // Set highlight interaction if no other interaction is current after 400ms.\n    setTimeout(() => {\n      !entry.mapview.interaction && entry.mapview.interactions.highlight();\n    }, 400);\n    entry.location.renderLocationView();\n    return;\n  }\n\n  entry.newValue = feature.geometry;\n\n  // Location will stay editable after update.\n  entry.location.update(renderLocationView);\n\n  function renderLocationView() {\n    delete entry.elements;\n    entry.location.renderLocationView();\n  }\n}\n", "/**\n## /ui/locations/entries/json\n\nThe json layer entry module exports a default method to add a jsoneditor control to the location view.\n\n@requires module:/ui/elements/jsoneditor\n\n@module /ui/locations/entries/json\n*/\n\n/**\n@function json\n\n@description\nThe json location entry method creates a jsoneditor control with data from either the entry newValue or value.\n\n@param {infoj-entry} entry type:json entry.\n\n@return {HTMLElement} The entry node containing a jsoneditor control.\n*/\nexport default function json(entry) {\n  entry.css_val ??= '';\n\n  // json entries cannot be inline as the jsoneditor formatting looks odd.\n  // We cannot remove entry.inline here as it has already been applied in the infoj.mjs module, so just warn instead.\n  if (entry.inline) {\n    console.warn(\n      `${entry.key} - json entries cannot be inline, please remove inline true from entry`,\n    );\n  }\n\n  const node = mapp.utils.html.node`<div\n    class=\"val\"\n    style=${entry.css_val}>`;\n\n  entry.data = entry.newValue || entry.value;\n\n  // Limit the menu for the jsoneditor control.\n  function renderMenu(items) {\n    return items\n      .filter((item) => item.text !== 'tree')\n      .filter((item) => item.text !== 'text')\n      .filter((item) => item.text !== 'table')\n      .filter((item) => item.type !== 'separator')\n      .filter((item) => item.className !== 'jse-undo')\n      .filter((item) => item.className !== 'jse-redo')\n      .filter((item) => item.className !== 'jse-search')\n      .filter((item) => item.className !== 'jse-contextmenu')\n      .filter((item) => item.className !== 'jse-sort')\n      .filter((item) => item.className !== 'jse-transform');\n  }\n\n  // Create a jsoneditor control with default props.\n  // The control is readonly if the entry is not editable.\n  entry.jsoneditor = mapp.ui.elements.jsoneditor({\n    data: entry.data,\n    props: {\n      mode: 'text',\n      onChange,\n      onRenderMenu: renderMenu,\n      readOnly: !entry.edit,\n    },\n    target: node,\n  });\n\n  // The onChange method will short circuit on contentErrors.\n  function onChange(content, previousContent, changeStatus) {\n    if (changeStatus.contentErrors) return;\n\n    // Parse the jsoneditor [text] content as newValue.\n    entry.newValue = JSON.parse(content.text);\n    entry.location.view?.dispatchEvent(\n      new CustomEvent('valChange', {\n        detail: entry,\n      }),\n    );\n  }\n\n  return node;\n}\n", "/**\n## ui/locations/entries/key\n\nThe key entry module exports a default [location] entry method to process infoj `type:key` entries.\n\nDictionary entries:\n- layer_visibility\n\n@requires /dictionary \n\n@module /ui/locations/entries/key\n*/\n\n/**\n@function key\n\n@description\nmapp.ui.locations.entries.key(entry)\n\nThe entry method returns a button HTML element which will toggle the location.layer display.\n\nThe button classList reflects whether the layer is displayed or not.\n\n```json\n{\n  \"type\":\"key\",\n  \"hideLayer\": true\n}\n``` \n\n@param {object} entry\n@property {location} entry.location.layer The Mapp location object.\n@property {layer} location.layer The Mapp location layer object.\n@property {boolean} [entry.hideLayer] Optional flag to hide the layer on load.\n\n@return {HTMLElement}\nThe button key element, with an onclick event to toggle the visibility of the layer.\n*/\nexport default function key(entry) {\n  // Hide the layer on load if specified\n  entry.hideLayer && entry.location.layer.hide();\n\n  const classList = `layer-key ${entry.location.layer.display ? 'active' : ''}`;\n\n  const node = mapp.utils.html.node`<div>\n    <button \n      class=${classList}\n      title=\"${mapp.dictionary.layer_visibility}\"\n      onclick=\"${(e) => {\n        if (e.target.classList.toggle('active')) {\n          entry.location.layer.show();\n        } else {\n          entry.location.layer.hide();\n        }\n      }}\">${entry.location.layer.name}`;\n\n  return node;\n}\n", "/**\n## ui/locations/entries/layer\n\nThe entries layer module exports the default layer method.\n\n@module /ui/locations/entries/layer\n*/\n\n/**\n@function layer\n\n@description\nThe layer entry method attempts to lookup a layer from the locale and will spread the infoj-entry object into a structured clone of the locale layer.\n\nThe infoj-entry effectively becomes a JSON layer which will be decorated and add the mapview.\n\nThe layer.key is a concatenated from the entry.layer [key] and the entry.location.hook.\n\nA layer.view will be created for the decorated layer and appended to the entry.node for the location view.\n\nfeatureLookup is an array of properties objects which filter and style requested features.\n\nWhen using query-based featureLookup the query should return unique indentifiers within their original layer and any relevant fields used for thematic styling.\n\nA featureSet of featureLookup can be defined for the layer feature styling. The values for the featureLookup or featureSet can be defined as entry.data. The entry.data may be populated from the get feature field or queried from a parameterised entry.query [template]. A featureSet consists of an array of feature IDs. A featureLookup consists of an array of feature objects with the feature properties being assigned for styling in the [featureProperties]{@link module:/layer/featureStyle~featureProperties} style method.\n\n@param {infoj-entry} entry type:layer entry.\n@property {string} [entry.layer] lookup layer key for locale.layers[].\n@property {object} [entry.data] An array of feature id or objects for the featureSet or featureLookup.\n@property {string} [entry.query] A query to execute to populate the entry.data.\n@property {object} [entry.featureSet] A set of feature ID to filter the layer features.\n@property {object} [entry.featureLookup] Feature objects as lookup to filter the layer features.\n\n@return {HTMLElement} Node element to hold the layer view drawer.\n*/\nexport default function layer(entry) {\n  checkData(entry);\n\n  entry.mapview ??= entry.location.layer.mapview;\n\n  assignLocaleLayer(entry);\n\n  entry.zIndex ??= entry.location.layer.zIndex++;\n\n  decorateLayer(entry);\n\n  entry.panel ??= mapp.utils.html.node`<div class=\"entry-layer\">`;\n\n  return entry.panel;\n}\n\n/**\n@function checkData\n\n@description\nThe value from a [dependent] entry field will override the entry.data when the layer location entry method is called from the infoj entries iteration.\n\nEmpty array data of no features will be assigned as null.\n\nThe entry and the display_toggle checkbox will be disabled if the layer entry should use a featureSet or featureLookup array with no query and no [feature] data.\n\n@param {infoj-entry} entry type:layer entry.\n@property {object} [entry.value] Value assigned from a field in the get feature response.\n@property {object} [entry.data] An array of feature id or objects for the featureSet or featureLookup.\n@property {string} [entry.query] A query to execute to populate the entry.data.\n@property {object} [entry.featureSet] A set of feature ID to filter the layer features.\n@property {object} [entry.featureLookup] Feature objects as lookup to filter the layer features.\n\n@return {HTMLElement} Node element to hold the layer view drawer.\n*/\nfunction checkData(entry) {\n  if (entry.value !== undefined) {\n    entry.data = entry.value;\n\n    if (entry.data?.length === 0) {\n      entry.data = null;\n    }\n  }\n\n  if (entry.featureSet || entry.featureLookup) {\n    if (!entry.query && !entry.data) {\n      entry.disabled = true;\n      entry.display_toggle?.classList.add('disabled');\n    } else {\n      entry.disabled = false;\n      entry.display_toggle?.classList.remove('disabled');\n    }\n  }\n}\n\n/**\n@function assignLocaleLayer\n\n@description\nThe method will attempt to clone a JSON layer from the mapview.locale.layers[] array.\n\nThe layer properties not included in the entry object will be filtered and assigned to the entry object.\n\nThe entry.layer property will be deleted to prevent re-assignment should the layer entry method be executed again.\n*/\nfunction assignLocaleLayer(entry) {\n  if (!entry.layer) return;\n\n  entry.key = entry.layer;\n\n  // Find JSON layer in locale\n  const layer = structuredClone(\n    entry.mapview.locale.layers.find((layer) => layer.key === entry.layer),\n  );\n\n  if (!layer) {\n    console.warn(`Layer [${entry.layer}] not found in mapview.locale`);\n    return;\n  }\n\n  // Filter clone properties owned by the entry.\n  const filtered = Object.keys(layer)\n    .filter((key) => !Object.hasOwn(entry, key))\n    .reduce((obj, key) => {\n      obj[key] = layer[key];\n      return obj;\n    }, {});\n\n  // Assign layer object to entry overriding entry properties.\n  Object.assign(entry, filtered);\n\n  entry.params ??= {};\n\n  entry.params.layer_template ??= entry.layer;\n\n  // The assignment should only happen once.\n  delete entry.layer;\n}\n\n/**\n@function decorateLayer\n@async\n\n@description\nThe infoj layer entry provided as argument will be decorated to become a mapp layer.\n\n@param {infoj-entry} entry type:layer entry.\n*/\nasync function decorateLayer(entry) {\n  // The entry [layer] has already been decorated, and its currently displayed - showLayer should be called to refresh the layer.\n  if (entry.L && entry.display) {\n    entry.show();\n    return;\n    // The entry [layer] has already been decorated, and its not currently displayed, just return.\n  } else if (entry.L) {\n    return;\n  }\n\n  //Assigned to keep track of the original layer key\n  entry.source_key = entry.key;\n\n  await mapp.layer.decorate(entry);\n\n  // The entry [layer] could not be decorated.\n  if (!entry.L) return;\n\n  entry.location.Layers.push(entry);\n\n  // Append the location id to the layer key to ensure its unique and linked to the location.\n  entry.key += `-${entry.location.id}`;\n\n  entry.L.set('key', entry.key);\n\n  entry.show = showLayer;\n\n  entry.hide = hideLayer;\n\n  entry.mapview.layers[entry.key] = entry;\n\n  entry.display_toggle = mapp.ui.elements.chkbox({\n    checked: entry.display,\n    data_id: `${entry.key}-display`,\n    disabled: entry.disabled,\n    label: entry.name,\n    onchange: (checked) => {\n      checked ? entry.show() : entry.hide();\n    },\n  });\n\n  // The layer may be zoom level restricted.\n  if (entry.tables) {\n    if (!entry.tableCurrent()) entry.display_toggle.classList.add('disabled');\n\n    entry.changeEndCallbacks.push(() => {\n      entry.tableCurrent()\n        ? entry.display_toggle.classList.remove('disabled')\n        : entry.display_toggle.classList.add('disabled');\n    });\n  }\n\n  // Append display_toggle to panel.\n  entry.panel.append(entry.display_toggle);\n\n  // Append meta panel to layer panel, if meta is available.\n  entry.meta && entry.panel.append(mapp.ui.layers.panels.meta(entry));\n\n  // Nullish assign style elements to entry.\n  entry.style.elements ??= [\n    'labels',\n    'label',\n    'hovers',\n    'hover',\n    'icon_scaling',\n    'opacitySlider',\n    'themes',\n    'theme',\n  ];\n\n  // Request style.panel element as content for drawer.\n  entry.style.panel = mapp.ui.elements.layerStyle.panel(entry);\n\n  if (entry.style.default) {\n    // Assign the location style to the default style.\n    entry.style.default = { ...entry.location?.style, ...entry.style.default };\n  }\n\n  // Append style panel to layer panel, if style is available.\n  entry.style.panel && entry.panel.append(entry.style.panel);\n\n  entry.location.removeCallbacks.push(() => {\n    entry.remove();\n  });\n\n  entry.display && entry.show();\n}\n\n/**\n@function showLayer\n@async\n\n@description\nA custom show [layer] method bound to the [layer] entry which will not update the mapp.hooks.\n\nThe showLayer method assigns the entry value as data property. A query will be executed to populate the data property otherwise. The entry will be disabled if the query does not return a response.\n\nThe featureData method is called to manage how the data should be handled as features for different layer formats.\n*/\nasync function showLayer() {\n  const entry = this;\n\n  if (entry.query) {\n    const queryParams = mapp.utils.queryParams(entry);\n\n    const paramString = mapp.utils.paramString(queryParams);\n\n    entry.data = await mapp.utils.xhr(\n      `${entry.mapview.host}/api/query?${paramString}`,\n    );\n\n    if (!entry.data) {\n      entry.disabled = true;\n      entry.display_toggle?.classList.add('disabled');\n      // Replace the panel with the display_toggle, as no style panel should be shown.\n      entry.panel.replaceChildren(entry.display_toggle);\n      return;\n    }\n  }\n\n  featureData(entry);\n\n  entry.display = true;\n\n  try {\n    // Add layer to map\n    entry.mapview.Map.addLayer(entry.L);\n  } catch {\n    // Will catch assertation error when layer is already added.\n  }\n\n  // Reload layer data if available.\n  entry.reload instanceof Function && entry.reload();\n\n  // Execute showCallbacks\n  entry.showCallbacks?.forEach((fn) => fn instanceof Function && fn(entry));\n}\n\n/**\n@function featureData\n\n@description\nThe featureData method will shortcircuit if the layer [entry] has no data property.\n\nThe features may be defined as an featureSet in which case the features whose ID is not in the featureSet will not be styled by the [featureStyle]{@link module:/layer/featureStyle~featureProperties} method.\n\nAn array feature object can be assigned to featureLookup property. Feature properties found by their ID in the featureLookup array will be assigned to the feature.properties in the featureStyle method.\n\nThe data will be assigned as features for a vector format layer in case no featureSet or featureLookup is used.\n\nThe vector format [layer] setSource method is called with the entry.features are argument to creature vector layer features and render the layer in the mapview.\n@param {infoj-entry} entry type:layer entry.\n*/\nfunction featureData(entry) {\n  if (!entry.data) return;\n\n  if (entry.featureSet) {\n    const featureID = Array.isArray(entry.data) ? entry.data : [entry.data];\n\n    entry.featureSet = new Set(featureID);\n    return;\n  }\n\n  if (entry.featureLookup) {\n    // featureLookup on layer must be arrays\n    entry.featureLookup = Array.isArray(entry.data) ? entry.data : [entry.data];\n    return;\n  }\n\n  entry.features = entry.data;\n\n  entry.setSource(entry.features);\n}\n\n/**\n@function hideLayer\n\n@description\nA custom hide [layer] method bound to the [layer] entry which will not update the mapp.hooks.\n*/\nfunction hideLayer() {\n  this.display = false;\n\n  // Remove OL layer from mapview.\n  this.mapview.Map.removeLayer(this.L);\n\n  // Execute hideCallbacks\n  this.hideCallbacks?.forEach((fn) => fn instanceof Function && fn(this));\n}\n", "/**\n## ui/locations/entries/link\n\nThe link entry module exports the default link_entry method to create link elements for the location view.\n\n@module /ui/locations/entries/link\n*/\n\n/**\n@function link_entry\n\n@description\nThis entry function returns an HTML element with a hyperlink to open in a new window. The link is labelled with configurable text and a material symbol for readability.\n\nThis element supports report object configuration with a custom template and optional url parameters.\n\nStyling options include altering icon name and its css class and also a placeholder for including other existing css classes on the element itself.\n\n@param {infoj-entry} entry type:link entry.\n@property {object} entry.url Target link, required.\n@property {object} [entry.params] Optional parameters to include in the url as encoded query string.\n@property {object} [entry.report] Optional report configuration if the link corresponds to a report. Using report requires `template` property with optional `label`.\n@property {string} [entry.report.template] Identifier for the document to display under the report link, required.\n@property {string} [entry.report.label] Optional custom label for the report link.\n@property {string} [entry.label] Text to display, defaults to generic link text.\n@property {string} [entry.data_id] Optional data_id for element identification.\n@property {string} [entry.link_class] Optional classList string applied to the link element, eg. `outlined`.\n@property {string} [entry.icon_class] Optional classList string appended to the `notranslate material-symbols-outlined` class for the icon element. \n@property {string} [entry.icon_name] Optional icon name from Material Icons `https://fonts.google.com/icons`. Defaults to `open_in_new` and sets to `description` for reports.\n\n@return {HTMLElement} <a> tag with inline content.\n*/\nexport default function link_entry(entry) {\n  // Ensure that params are set for link generation\n  entry.params ??= {};\n\n  if (entry.report) {\n    // Assign URL path for report.\n    entry.url ??= `${entry.location.layer.mapview.host}/view?`;\n\n    // Assign URL params for report.\n    Object.assign(entry.params, {\n      id: entry.location.id,\n      layer: entry.location.layer.key,\n      locale: entry.location.layer.mapview.locale.key,\n      template: entry.report.template,\n    });\n\n    // Assign entry.label for link text.\n    entry.label ??= `${entry.report.label || mapp.dictionary.report}`;\n    // Assign entry.icon_name to report icon if not defined.\n    entry.icon_name ??= 'description';\n  }\n\n  if (!entry.url) {\n    console.warn(`An entry.url must be defined for the URL path.`);\n    return;\n  }\n\n  // Construct href from URL + params.\n  const href = entry.url + mapp.utils.paramString(entry.params);\n\n  entry.data_id ??= 'link';\n  entry.label ??= `${mapp.dictionary.link}`;\n\n  entry.icon_name ??= 'open_in_new';\n  entry.icon_class ??= '';\n  const icon_class = `notranslate material-symbols-outlined ${entry.icon_class}`;\n\n  entry.link_class ??= '';\n  const link_class = `link-with-img ${entry.link_class}`;\n\n  const node = mapp.utils.html.node`<div class=\"val\">\n    <a \n      data-id=${entry.data_id}\n      target=\"_blank\" \n      class=${link_class}\n      href=${href}>\n      <span \n        style=${entry.icon_style || ''}\n        class=${icon_class}>${entry.icon_name}</span>\n      <span>${entry.label}</span>`;\n\n  return node;\n}\n", "/**\nExports the numeric entries method.\n\n@module /ui/locations/entries/numeric\n*/\n\n/**\n@function numeric\n\n@description\nReturns a numeric entry node for the location.view.\n\nThe string value displayed in the location view will be formatted according to the formatterParams.\n\nThe mapp.language property value will be assigned as default locale for localeString formatting.\n\nFormatting will be surpressed if the formatterParams are set to null.\n\n@param {infoj-entry} entry type:numeric or type:integer infoj-entry typedef object.\n@property {numeric} entry.value The entry value.\n@property {numeric} [entry.newValue] The new ntry value not yet stored.\n@property {Object} [entry.formatterParams] Configuration for the localeString number format.\n@property {String} [entry.suffix] Suffix appended to stringValue.\n@property {String} [entry.prefix] Prefix prepended to stringValue.\n@property {Object} [entry.edit] Editing config for entry.\n\n@returns {HTMLElement} Element to display a string of numeric entry value.\n*/\nexport default function numeric(entry) {\n  if (entry.edit) return edit(entry);\n\n  if (entry.value === null || isNaN(entry.value)) return;\n\n  mapp.utils.formatNumericValue(entry);\n\n  return mapp.utils.html.node`<div \n    class=\"val\"\n    style=${entry.css_val}\n    >${entry.stringValue}`;\n}\n\n/**\n@function edit\n\n@description\nReturns a numeric input for editing numeric or integer type entries.\n\nWill return a slider element if edit.range is true. A slider element can only be returned if the current value is valid.\n\nNumeric entry edits must be bound by min and max.\n\nDefaults for non big integer will be applied if missing.\n\n@param {infoj-entry} entry type:numeric or type:integer infoj-entry typedef object.\n@property {numeric} entry.value The entry value.\n@property {Object} entry.edit Editing config for entry, can be Boolean.\n\n@returns {HTMLElement} Input element to modify numeric entry value.\n*/\nfunction edit(entry) {\n  // Assign callback method to dispatch valChange event.\n  entry.edit.callback ??= () => {\n    entry.location.view?.dispatchEvent(\n      new CustomEvent('valChange', { detail: entry }),\n    );\n  };\n\n  // Set limits for editing.\n  entry.edit.min ??= entry.min || -2147483648;\n  entry.edit.max ??= entry.max || 2147483647;\n  entry.edit.step ??= entry.step || entry.type === 'integer' ? 1 : 0.1;\n\n  Object.assign(entry, entry.edit);\n\n  // A new value might be set as entry.default\n  const value = entry.value ?? entry.newValue;\n\n  // Range must be shown when value is 0 and in range.\n  if (\n    entry.edit.range &&\n    !isNaN(value) &&\n    value > entry.min &&\n    value < entry.max\n  ) {\n    return mapp.ui.elements.slider(entry);\n  }\n\n  return mapp.ui.elements.numericInput(entry);\n}\n", "export default (entry) => {\n  entry.pills ??= entry.value || [];\n\n  mapp.ui.elements.pills(entry);\n\n  return entry.container;\n};\n", "/**\n## ui/locations/entries/pin\n\nThe pin entry module exports the pin method as mapp.ui.locations.entries.pin()\n\nDictionary entries:\n- pin\n\n@requires /dictionary \n@requires /ui/elements/chkbox\n@requires /ol/extent/buffer\n\n@module /ui/locations/entries/pin\n*/\n\n/**\n@function pin\n\n@description\nPlaces a pin on the selected location on the map. A checkbox is supplied to turn the pin on and off.\n\nThe pin will be styled by the entry.style property if provided. Otherwise the location.pinStyle assigned by the locations [listview]{@link module:/ui/locations/listview~listview} method will be used. A location may not have a pinStyle if no listview has been configured for the mapview.\n\n@param {infoj-entry} entry type:pin entry.\n@property {location} entry.location The entry location.\n@property {array} entry.value An array containing entrys' co-ordinates.\n@property {string} [entry.label] Label for checkbox element.\n@property {boolean} [entry.display=true] The pin display flag.\n@property {string} [entry.srid] The srid of the pin.\n@property {integer} [entry.zIndex] The html layer on which the pin should display.\n@property {object} [entry.style] Style properties of the pin which may include a scale.\n\n@return {HTMLElement} Location pin and display checkbox.\n*/\nexport default function pin(entry) {\n  if (!Array.isArray(entry.value)) {\n    console.warn(`Entry type pin requires a value array.`);\n    return;\n  }\n\n  entry.srid ??= entry.location.layer.srid;\n\n  // Allow display to be false.\n  entry.display ??= entry.display === undefined;\n\n  entry.zIndex ??= Infinity;\n\n  entry.Style ??= entry.style\n    ? mapp.utils.style(entry.style)\n    : entry.location.pinStyle;\n\n  entry.show ??= show;\n  entry.hide ??= hide;\n  entry.getExtent ??= getExtent;\n\n  entry.geometry = {\n    coordinates: entry.value,\n    type: 'Point',\n  };\n\n  entry.display && entry.show();\n\n  entry.label ??= mapp.dictionary.pin;\n\n  entry.chkbox ??= mapp.ui.elements.chkbox({\n    checked: entry.display,\n    label: entry.label,\n    onchange: (checked) => {\n      checked ? entry.show() : entry.hide();\n    },\n  });\n\n  return entry.chkbox;\n}\n\n/**\n@function show\n@this infoj-entry\n\n@description\nCalls removeLayer method to remove layer from location before creating a new Openlayers layer which is pushed into the location.Layers array property.\n*/\nfunction show() {\n  if (this.disabled) return;\n\n  this.location.removeLayer(this);\n\n  this.display = true;\n\n  this.L = this.location.layer.mapview.geoJSON(this);\n\n  this.location.Layers.push(this);\n}\n\n/**\n@function hide\n@this infoj-entry\n\n@description\nSets the display property to false and calls the remove method.\n*/\nfunction hide() {\n  this.display = false;\n  this.location.removeLayer(this);\n}\n\n/**\n@function getExtent\n@this infoj-entry\n\n@description\nCalculates the extent of the pin. Applies a buffer if one has been supplied to the pin.\n\n@param {infoj-entry} entry type:pin entry.\n@property {boolean|number} [entry.buffer] a value to buffer the pin with or just true for a default of 200.\n@returns {Array} Array representing Openlayers extent.\n*/\nfunction getExtent() {\n  this.buffer ??= 0;\n\n  this.buffer = parseInt(this.buffer) || 200;\n\n  return ol.extent.buffer(this.L.getSource().getExtent(), this.buffer);\n}\n", "/**\n## /ui/locations/entries/ping\n\nThe ping module exports an entry method to test the ping utility.\n\n@module /ui/locations/entries/ping\n*/\n\n/**\n@function ping\n\n@description\nThe ping method creates a text field and initiates the ping utility with the entry object as params.\n\nThe ping callback method will update a textarea input with the response.\n\nThe ping will be cancelled by setting the callback to false.\n\n@param {infoj-entry} entry type:ping entry.\n\n@return {HTMLElement} The entry node containing a textarea input.\n*/\nexport default function ping(entry) {\n  if (!entry.textarea) {\n    entry.textarea = mapp.utils.html.node`<textarea\n      class=\"val\"\n      style=\"auto; min-height: 50px;\">`;\n\n    entry.callback ??= async (response, entry) => {\n      entry.textarea.value = response;\n    };\n\n    mapp.utils.ping(entry);\n\n    entry.location.removeCallbacks.push(() => {\n      entry.callback = false;\n    });\n  }\n\n  return entry.textarea;\n}\n", "/**\nThe query_button [location] entries module exports the query_button method as default.\n\n@requires /utils/queryParams\n\n@module /ui/locations/entries/query_button\n*/\n\n/**\n@function query_button\n\n@description\n## mapp.ui.locations.entries.query_button(entry)\nReturns a button element. The `query(entry)` method will be called by the button onclick event.\n\n```js\n{\n  \"label\": \"Snap to Postal Sector\",\n  \"type\": \"query_button\",\n  \"query\": \"catchment_statistics_snap_to_postal_sector\",\n  \"queryparams\": {\n    \"id\": true\n  },\n  \"alert\": \"Query has executed!\",\n  \"reload\": true,\n  \"dependents\": [\n    \"geom_3857\",\n    \"perimeter\",\n    \"area\"\n  ]\n}\n```\n\n@param {infoj-entry} entry type:query_button infoj entry.\n\n@returns {HTMLElement} Location view entry node.\n*/\n\nexport default function _query_button(entry) {\n  if (!entry.query) {\n    console.warn('You must provide a query to use \"type\": \"query_button\".');\n    return;\n  }\n\n  // If a label is provided, use it, otherwise use the default\n  entry.label ??= `Run query:${entry.query}`;\n\n  // Return button to update the entry.\n  return mapp.utils.html.node`\n    <button \n      class=\"flat wide bold\"\n      onclick=${() => query(entry)}>${entry.label}`;\n}\n\n/**\n@function query\n@async\n\n@description\nWill be called by the onclick event of the query_button element.\n\nThe `entry.location.view` will be disabled.\n\nRuns the `entry.query` template with the provided `entry.queryparams`.\n\nThe `entry.host` defaults to the entry.mapview.host concatenated with the `/api/query` path.\n\nThe location.layer will reload after the query response with the `entry.reload` flag.\n\nThe entry values of fields in the `entry.dependents` array will be synched after the query has been resolved.\n\nThe `entry.alert` message will be displayed after the query has been resolved.\n\nThe `entry.location.view` will be enabled by calling the `updateInfo` element event.\n\n@param {infoj-entry} entry type:query_button infoj entry.\n@property {string} entry.query Query template.\n@property {Object} [entry.queryparams] Parameter for query in template.\n@property {string} [entry.host] The host for the query.\n@property {string} [entry.alert] Alert message after the query has responded.\n@property {boolean} [entry.reload] Reload location.layer if true.\n@property {Array} [entry.dependents] Reload dependent entry.field values.\n*/\n\nasync function query(entry) {\n  // Warning for legacy config.\n  if (entry.updated_fields) {\n    console.warn(\n      'entry.updated_fields is deprecated, please use entry.dependents instead.',\n    );\n\n    // If entry.updated_fields, set to entry.dependents and warn\n    entry.dependents ??= entry.updated_fields;\n  }\n\n  // Disable location view.\n  entry.location.view.classList.add('disabled');\n\n  entry.queryparams ??= {};\n\n  entry.queryparams.template = entry.query;\n\n  // Stringify paramString from object.\n  const paramString = mapp.utils.paramString(mapp.utils.queryParams(entry));\n\n  entry.host ??= entry.location.layer.mapview.host + '/api/query';\n\n  // Run query to get data to update the entry on the db.\n  const response = await mapp.utils.xhr(`${entry.host}?${paramString}`);\n\n  if (response instanceof Error) {\n    mapp.ui.elements.alert({ text: mapp.dictionary.query_failed });\n\n    // Enable location view.\n    entry.location.view.classList.remove('disabled');\n\n    return;\n  }\n\n  entry.value = response;\n\n  entry.alert && mapp.ui.elements.alert({ text: entry.alert });\n\n  entry.reload && entry.location.layer.reload();\n\n  if (entry.dependents) {\n    // Reload the dependent fields\n    await entry.location.syncFields(entry.dependents);\n  }\n\n  // Updating the view will enable the view itself.\n  // No need to enable the button and view themselves.\n  entry.location.view.dispatchEvent(new Event('updateInfo'));\n\n  // Enable location view.\n  entry.location.view.classList.remove('disabled');\n}\n", "export default (entry) => {\n  const tabview = document.querySelector(`[data-id=${entry.target}]`);\n\n  // Assign border style based on the location view record (from list)\n  entry.tab_style = `border-bottom: 3px solid ${entry.location.style.strokeColor}`;\n\n  // Create tabview after dataview creation is complete.\n  tabview.dispatchEvent(\n    new CustomEvent('addTab', {\n      detail: entry,\n    }),\n  );\n\n  // Show the tab if display is true.\n  entry.display && entry.show();\n\n  return mapp.ui.elements.chkbox({\n    checked: !!entry.display,\n    label: entry.label,\n    onchange: (checked) => {\n      entry.display = checked;\n\n      // Show or remove tab according to the checked/display value.\n      entry.display ? entry.show() : entry.remove();\n    },\n  });\n};\n", "/**\n## ui/locations/entries/text\n\nThe locations entries text module exports the default text entry as mapp.ui.locations.entries.text(entry)\n\nDictionary entries:\n- loading\n- no_options_available\n\n@requires /dictionary \n\n@module /ui/locations/entries/text\n*/\n\n/**\n@function text\n\n@description\nThe text method will return the textedit function for editable entries or an HTML node with the formated field value.\n\nNon editable entries without a value will return void.\n\n@param {infoj-entry} entry type:geometry entry.\n@property {Object} entry.value geometry as JSON value.\n@property {Object} [entry.edit] configuration object for editing the value.\n\n@return {HTMLElement} elements for the location view.\n*/\n\nexport default function text(entry) {\n  // Short circuit if not editable without a value.\n  if (!entry.edit && !entry.value) return;\n\n  // Return inputs for editing.\n  if (entry.edit) return textedit(entry);\n\n  // Return value as text, including prefix and suffix.\n  return mapp.utils.html.node`\n    <div\n      class=\"val\"\n      style=${entry.css_val}>\n      ${entry.prefix}${entry.value}${entry.suffix}`;\n}\n\n/**\n@function textedit\n\n@description\nThe textedit method will return input elements for editable type:text entries.\n\nThe container populated by the textoptions method will be returned if an options array has been defined in the edit object.\n\nThe options array will be populated with distinct values from the data at rest if the length of the options array is naught.\n\nA text input is returned if no options are configured.\n\nThe oninput method for the text input will split the value as an array if an arraySeparator has been defined in the entry.edit{} property.\n\n@param {infoj-entry} entry type:geometry entry.\n@property {Object} entry.value geometry as JSON value.\n@property {Object} [entry.edit] configuration object for editing the value.\n\n@return {HTMLElement} elements for the location view.\n*/\n\nfunction textedit(entry) {\n  // If edit options are defined.\n  if (entry.edit.options) {\n    // Create container with loading text.\n    entry.container = mapp.utils.html.node`<div>${mapp.dictionary.loading}`;\n\n    // If options is an array and contains values, we can create a dropdown.\n    if (entry.edit.options.length) {\n      // Create dropdown from options.\n      textoptions(entry);\n    }\n    // If options is empty array, we need to query the table to populate it.\n    else {\n      // We can query a particular template or Query distinct field values from the layer table.\n      mapp.utils\n        .xhr(\n          `${entry.location.layer.mapview.host}/api/query?` +\n            mapp.utils.paramString({\n              field: entry.json_field || entry.jsonb_field || entry.field,\n              filter: entry.location.layer.filter?.current,\n              id: entry.location.id,\n              key: entry.jsonb_key || entry.json_key,\n              layer: entry.location.layer.key,\n              locale: entry.location.layer.mapview.locale.key,\n              table: entry.location.layer.tableCurrent(),\n              template:\n                entry.edit.query ||\n                (entry.jsonb_field || entry.json_field\n                  ? 'distinct_values_json'\n                  : 'distinct_values'),\n            }),\n        )\n        .then((response) => {\n          // If response is null, we can not create a dropdown, so we return a message.\n          if (response === null) {\n            entry.container.innerHTML = `${mapp.dictionary.no_options_available}`;\n            return;\n          }\n\n          // Return first value from object row as options array.\n          entry.edit.options = [response].flat().map((row) => {\n            return Object.values(row)[0];\n          });\n\n          // Create dropdown from options.\n          textoptions(entry);\n        });\n    }\n\n    // Return container.\n    return entry.container;\n  }\n\n  // Return text input if no options are defined (free text input).\n  return mapp.utils.html.node`\n    <input\n      type=\"text\"\n      maxlength=${entry.edit.maxlength}\n      value=\"${entry.newValue || entry.value || ''}\"\n      placeholder=\"${entry.edit.placeholder || ''}\"\n      onkeyup=${onInput}>`;\n\n  function onInput(e) {\n    // Split target value as array if an arraySeparator has been provided.\n    entry.newValue = entry.edit.arraySeparator\n      ? e.target.value.split(entry.edit.arraySeparator)\n      : e.target.value;\n\n    entry.location.view?.dispatchEvent(\n      new CustomEvent('valChange', { detail: entry }),\n    );\n  }\n}\n\n/**\n@function textoptions\n\n@description\nThe textoptions method will render a dropdown control for the edit.options[] array values into the entry.container.\n\n@param {infoj-entry} entry type:geometry entry.\n@property {Object} entry.value geometry as JSON value.\n@property {Object} [entry.edit] configuration object for editing the value.\n*/\nfunction textoptions(entry) {\n  if (entry.edit.radio) {\n    radio(entry);\n    return;\n  }\n\n  // Create array of objects for optionEntries.\n  const optionEntries = entry.edit.options.map((option) => ({\n    // Assign null if option is null.\n    option:\n      option === null\n        ? null\n        : // Assign string as option.\n          (typeof option === 'string' && option) ||\n          // Assign first value as option.\n          Object.values(option)[0],\n\n    // Assign null if option is null.\n    title:\n      option === null\n        ? null\n        : // Assign string as title.\n          (typeof option === 'string' && option) ||\n          // Assign first key as title.\n          Object.keys(option)[0],\n  }));\n\n  // Find title for the entry.value\n  const option = optionEntries.find((e) => e.option === entry.value);\n\n  const placeholder =\n    entry.value !== undefined ? entry.value : entry.edit.placeholder;\n\n  // Render dropdown.\n  mapp.utils.render(\n    entry.container,\n    mapp.ui.elements.dropdown({\n      callback: (e, _entry) => {\n        // Assign entry option as newValue.\n        entry.newValue = _entry.option;\n\n        // Check whether newValue is different from current value.\n        entry.location.view?.dispatchEvent(\n          new CustomEvent('valChange', {\n            detail: entry,\n          }),\n        );\n      },\n      entries: optionEntries,\n      // Set entries to optionEntries provided.\n      placeholder,\n      span: option?.title || entry.value,\n    }),\n  );\n}\n\nfunction radio(entry) {\n  // Create array of objects for optionEntries.\n  const stations = entry.edit.options.map((option) => {\n    const params = {\n      data_id: option,\n      name: entry.field,\n      label: option,\n      onchange: () => {\n        // find checked radio in the group\n        const checked_radio = stations.find((item) =>\n          item.querySelector('input[type=\"radio\"]:checked'),\n        );\n        // set new entry value from data-id\n        entry.newValue = checked_radio.querySelector(\n          'input[type=\"radio\"]',\n        ).dataset.id;\n        // send value change event\n        entry.location.view?.dispatchEvent(\n          new CustomEvent('valChange', { detail: entry }),\n        );\n      },\n    };\n    // create each radio\n    return mapp.ui.elements.radio(params);\n  });\n\n  if (entry.value) {\n    // if value exists find the radio to be checked\n    const current_radio = stations.find(\n      (item) =>\n        item.querySelector('input[type=\"radio\"]').dataset.id === entry.value,\n    );\n    // current value doesn't match any value in the list\n    if (current_radio)\n      current_radio.querySelector('input[type=\"radio\"]').checked = true;\n  }\n\n  // Render radio group\n  mapp.utils.render(entry.container, mapp.utils.html.node`${stations}`);\n}\n", "/**\n## /ui/locations/entries/textarea\n\nThe module exports the default textarea entry method.\n\n@module /ui/locations/entries/textarea\n*/\n\n/**\n@function textarea\n\n@description\nA textarea element will be returned if the entry is editable.\n\nThe textarea allows user to create and modify multiline string values.\n\n@param {infoj-entry} entry type:geometry entry.\n@property {Object} entry.value A multiline string.\n@property {Object} [entry.edit] configuration object for editing the value.\n\n@return {HTMLElement} elements for the location view.\n*/\nexport default function textarea(entry) {\n  let val = entry.type !== 'html' ? entry.value : '';\n\n  if (entry.edit) {\n    val = mapp.utils.html`\n    <textarea\n      style=\"auto; min-height: 50px;\"\n      maxlength=${entry.edit.maxlength}\n      placeholder=\"${entry.edit.placeholder || ''}\"\n      onfocus=${(e) => {\n        e.target.style.height = e.target.scrollHeight + 'px';\n      }}\n      onfocusout=${(e) => {\n        e.target.style.height = 'auto';\n      }}\n      onkeyup=${(e) => {\n        entry.newValue = e.target.value;\n        entry.location.view?.dispatchEvent(\n          new CustomEvent('valChange', {\n            detail: entry,\n          }),\n        );\n      }}\n      onkeydown=${(e) =>\n        setTimeout(() => {\n          e.target.style.height = 'auto';\n          e.target.style.height = e.target.scrollHeight + 'px';\n        }, 100)}>\n      ${entry.newValue || entry.value || ''}`;\n  }\n\n  entry.css_val ??= '';\n\n  const node = mapp.utils.html.node`\n  <div\n    class=\"val\"\n    style=\"${entry.css_val}\">${val}`;\n\n  if (!entry.edit && entry.type === 'html') {\n    node.innerHTML = entry.value || '';\n  }\n\n  return node;\n}\n", "/**\n## /ui/locations/entries/time\n\nThe module exports the default time entry method.\n\n@module /ui/locations/entries/time\n*/\n\n/**\n@function time\n\n@description\nThe entry method returns a formated numeric value. 10.43 > \"10:43\".\n\nIf editable an input type:time will be returned. The onchange event method of the input will parse a float value from the time string and dispatch the valChange event on the location view.\n\n@param {infoj-entry} entry type:geometry entry.\n@property {Object} entry.value A numeric time value.\n@property {Object} [entry.edit] configuration object for editing the value.\n\n@return {HTMLElement} elements for the location view.\n*/\nexport default function time(entry) {\n  let val;\n\n  let stringVal = entry.value?.toString().replace('.', ':');\n\n  stringVal =\n    (stringVal && stringVal.length < 3 && `${stringVal}:00`) || stringVal;\n\n  if (entry.edit) {\n    val = mapp.utils.html.node`\n      <input\n        type=\"time\"\n        value=${stringVal}\n        onchange=${(e) => {\n          entry.newValue = parseFloat(e.target.value.replace(':', '.'));\n\n          entry.location.view?.dispatchEvent(\n            new CustomEvent('valChange', {\n              detail: entry,\n            }),\n          );\n        }}>`;\n  } else {\n    val = stringVal;\n  }\n\n  entry.css_val ??= '';\n\n  const node = mapp.utils.html.node`\n    <div\n      class=\"val\"\n      style=\"${entry.css_val}\">\n      ${val}`;\n\n  return node;\n}\n", "/**\n## ui/locations/entries/title\n\nThe key entry module exports a default [location] entry method to process infoj `type:title` entries.\n\n@module /ui/locations/entries/title\n*/\n\n/**\nmapp.ui.locations.entries.title(entry)\n\nThe method returns just the title of the entry.\nYou can provide a tooltip (shown when hovering over the title).\nYou can provide a css style for the title (to style the title in a specific way).\n@example\n```json\n{\n  \"title\": \"This is a title\",\n  \"type\":\"title\",\n  \"tooltip\": \"This is a tooltip\",\n  \"css_title\": \"font-weight: 800\"\n}\n``` \n@function title\n@param {infoj-entry} entry\n@property {string} entry.title The title of the entry.\n@property {string} entry.tooltip The tooltip of the entry.\n@property {string} entry.css_title The css of the title.\n@return {HTMLElement} The title element.\n*/\n\nexport default function title(entry) {\n  return mapp.utils.html.node`\n        <div\n          class=\"label\"\n          style=${entry.css_title}\n          title=${entry.tooltip}>${entry.title}`;\n}\n", "/**\n## ui/locations/entries\n\nExports a collection of entry methods for location views.\n\n@requires /ui/locations/entries/boolean\n@requires /ui/locations/entries/cloudinary\n@requires /ui/locations/entries/dataview\n@requires /ui/locations/entries/date\n@requires /ui/locations/entries/geometry\n@requires /ui/locations/entries/json\n@requires /ui/locations/entries/key\n@requires /ui/locations/entries/layer\n@requires /ui/locations/entries/link\n@requires /ui/locations/entries/numeric\n@requires /ui/locations/entries/pills\n@requires /ui/locations/entries/pin\n@requires /ui/locations/entries/ping\n@requires /ui/locations/entries/query_button\n@requires /ui/locations/entries/tab\n@requires /ui/locations/entries/text\n@requires /ui/locations/entries/textarea\n@requires /ui/locations/entries/time\n@requires /ui/locations/entries/title\n\n@module /ui/locations/entries\n*/\n\n/**\n@global\n@typedef {Object} infoj-entry\nA infoj-entry describes a location property. Locations are configured as an array of JSON Object entries layer.infoj[].\n@property {string} key A unique identifier for the entry. Will be assigned from iteration index in infoj location method if not implicit.\n@property {location} location The entry location.\n@property {*} [value] The entry value.\n@property {string} [field] The database field in layer table which holds the entry data.\n@property {string} [fieldfx] A SQL statement to query the entry value in the location get request.\n@property {string} [title] The title to be displayed with the entry.value.\n@property {boolean} [inline] Flag whether the value should be displayed inline with the title.\n@property {object} [edit] Edit configuration for the entry.\n@property {string} [query] Query template.\n@property {Object} [queryparams] Parameter for query in template.\n@property {string} [label] Label for checkbox element.\n@property {boolean} [display] Entry display flag.\n*/\n\nimport boolean from './boolean.mjs';\n\nimport cloudinary from './cloudinary.mjs';\n\nimport dataview from './dataview.mjs';\n\nimport date from './date.mjs';\n\nimport geometry from './geometry.mjs';\n\nimport json from './json.mjs';\n\nimport key from './key.mjs';\n\nimport layer from './layer.mjs';\n\nimport link from './link.mjs';\n\nimport numeric from './numeric.mjs';\n\nimport pills from './pills.mjs';\n\nimport pin from './pin.mjs';\n\nimport ping from './ping.mjs';\n\nimport query_button from './query_button.mjs';\n\nimport tab from './tab.mjs';\n\nimport text from './text.mjs';\n\nimport textarea from './textarea.mjs';\n\nimport time from './time.mjs';\n\nimport title from './title.mjs';\n\n/**\n@function defaults\n@deprecated\n\n@description\nThe deprectaed defaults entry method was setting the and updating the mapp user to the entry field.\n\nThis method has been deprecated in favour of a more general plugin to set and update the user email and datetime.\n*/\n\nfunction defaults() {\n  console.warn(`The type:defaults entry method has been deprecated.`);\n}\n\n/**\n@function legacy_layer\n\n@description\nThe legacy_layer method maps the layer entry method to the deprecated vector_layer and mvt_clone methods.\n\nThe type:'layer' will be assigned, overwriting the 'mvt_clone' and 'vector_layer' types.\n\n`id` will be assigned as default for qID which is required for vector format layers.\n\nThe name is assigned from the label property.\n@param {infoj-entry} entry mvt_clone type entry. \n\n@return {Function} layer entry method.\n*/\nfunction legacy_layer(entry) {\n  console.warn(\n    `The type:${entry.type} entry method has been deprecated in favour of the type:layer entry method.`,\n  );\n\n  entry.type = 'layer';\n\n  entry.qID ??= 'id';\n\n  entry.name ??= entry.label;\n\n  return layer(entry);\n}\n\nexport default {\n  boolean,\n  dataview,\n  date,\n  datetime: date,\n  defaults,\n  documents: cloudinary,\n  geometry,\n  html: textarea,\n  image: cloudinary,\n  images: cloudinary,\n  integer: numeric,\n  json,\n  key,\n  layer,\n  link,\n  mvt_clone: legacy_layer,\n  numeric,\n  pills,\n  pin,\n  ping,\n  query_button,\n  report: link,\n  tab,\n  text,\n  textarea,\n  time,\n  title,\n  vector_layer: legacy_layer,\n};\n", "/**\n## ui/locations/infoj\n\nThe infoj module exports a default method to process the infoj entries of a location.\n\n@requires /ui/locations/entries\n@requires /utils/queryParams\n@requires /utils/paramString\n@requires /utils/xhr\n@requires /utils/merge\n\n@module /ui/locations/infoj\n*/\n\n/**\n@function infoj\n\n@description\nThe infoj methods iterates through the location's infoj [entries] array.\n\nmapp.ui.locations.entries{} methods matching the entry type keyvalue are called with the entry as argument.\n\nThe HTMLelements returned from a location entry method are appended to entry.listview which is appended to the location.view.\n\nThe infoj_order array argument provides an option to extend the location infoj_array with entries not stored in the location.layer.infoj array.\n\nThe infoj_order array may contain string entries which allow to order entries before processing. Ordered infoj_order string values are used to map infoj entries with matching key, field, or query values. Infoj entries which are not matched by infoj_order string values will be excluded from being processed for the creation of the location view.\n\n@param {Object} location A decorated location object.\n@param {array} infoj_order Optional array to order and expand the infoj array.\n@property {Object} location.layer A decorated layer object to which the location belongs.\n@property {Array} location.infoj Array of infoj-entry objects with values.\n@property {HTMLElement} location.view Location view HTMLElement.\n\n@return {HTMLElement} listview grid element with entry elements.\n*/\n\nlet groups;\nexport default function infoj(location, infoj_order) {\n  if (!location.infoj) return;\n\n  // Create a grid view div.\n  const listview = mapp.utils.html.node`<div class=\"location-view-grid\">`;\n\n  // Create object to hold view groups.\n  groups = {};\n\n  // The infoj_order may be assigned to the layer.\n  infoj_order ??= location?.layer?.infoj_order;\n\n  // infoj argument is provided as an array of strings to filter the location infoj entries.\n  const infoj = Array.isArray(infoj_order)\n    ? infoj_order.map(infoj_orderMap).filter((entry) => entry !== undefined)\n    : location.infoj;\n\n  /**\n  @function infoj_orderMap\n\n  @description\n  The infoj_order argument allows to order and filter the location.layer.infoj array.\n\n  The map function attempts to find and return an infoj-entry whose key, field, or query property values match the _entry string.\n\n  If typeof object the _entry itself will be returned. This allows for additional infoj-entry objects to be spliced into the infoj array.\n\n  @param {string|object} _entry\n  @returns {infoj-entry} Either the _entry object itself, a lookup entry from the location.layer.infoj array, or undefined.\n  */\n  function infoj_orderMap(_entry) {\n    if (typeof _entry === 'string') {\n      // Find infoj-entry with matching key, field, or query property.\n      const infoj_order_field = location.infoj.find((entry) =>\n        new Set([entry.key, entry.field, entry.query]).has(_entry),\n      );\n\n      if (!infoj_order_field) {\n        console.warn(\n          `infoj_order field: \"${_entry}\" not found in location.infoj. Please add entry.key, entry.field, or entry.query to the entry.`,\n        );\n      }\n\n      return infoj_order_field;\n    } else if (typeof _entry === 'object') {\n      _entry.location = location;\n\n      return _entry;\n    }\n  }\n\n  let keyIdx = 0;\n\n  // Iterate through info fields and add to info table.\n  for (const entry of infoj) {\n    entry.key ??= entry.field || keyIdx++;\n\n    // The location view entries should not be processed if the view is disabled.\n    if (location.view?.classList.contains('disabled')) break;\n\n    // Location view elements will appended to the entry.listview element.\n    entry.listview = listview;\n\n    // The default entry type is text.\n    entry.type ??= 'text';\n\n    if (entry.edit === true) {\n      entry.edit = {};\n    }\n\n    entryJSONB(entry);\n\n    entryObject(entry);\n\n    // Skip entry depending on flag and value.\n    if (entrySkip(entry)) continue;\n\n    entryNullValue(entry);\n\n    entryDefault(entry);\n\n    entryGroup(entry);\n\n    entryNode(entry);\n\n    entryTitle(entry);\n\n    if (entryQuery(entry)) continue;\n\n    // Check whether a method exists for the entry type.\n    if (!Object.hasOwn(mapp.ui.locations.entries, entry.type)) {\n      console.error(`entry.type:${entry.type} method not found.`);\n      continue;\n    }\n\n    // Execute the entry.type method providing the entry as only argument.\n    const el = mapp.ui.locations.entries[entry.type]?.(entry);\n\n    // Append any HTMLElement returned from the entry.type method to the entry.node element.\n    el && entry.node.append(el);\n\n    // create tooltip icon if configured\n    entryTooltipIcon(entry);\n  }\n\n  return listview;\n}\n\n/**\n@function entryJSONB\n\n@description\nThe entryJSONB(entry) method assign an entry.value from a jsonb object contained in the entry.value assigned by the location.get method.\n\nThe entry must have an JSON object value which is not null.\n\nThe entry.jsonb_field and entry.jsonb_key must be configured and found in the entry.value object.\n\n@param {infoj-entry} entry\n\n@property {string} entry.jsonb_field Lookup of field in jsonb value object.\n@property {string} entry.jsonb_key Lookup of key value in jsonb.field valye object.\n*/\nfunction entryJSONB(entry) {\n  if (!entry.jsonb_field) return;\n  if (!entry.jsonb_key) return;\n  if (entry.value === null) return;\n  if (typeof entry.value !== 'object') return;\n  if (!entry.value.jsonb) return;\n\n  entry.value = entry.value.jsonb[entry.jsonb_field][entry.jsonb_key];\n}\n\n/**\n@function entryObject\n\n@description\nThe entryObject(entry) method can be used to lookup another entry and assign or merge the found entry object value.\n\nA entry.json_key in combination with entry.json_field can be configured to assign a specific JSON key value to the entry.\n\n@param {infoj-entry} entry\n\n@property {string} entry.objectAssignFromField Lookup for json value entry for object assign.\n@property {string} entry.objectMergeFromField Lookup for json value entry for object merge.\n@property {string} entry.json_field Lookup for json value entry.\n@property {string} entry.json_key Required for json_field assignment.\n*/\nfunction entryObject(entry) {\n  // Cannot have both objectAssignFromField and objectMergeFromField set to true.\n  if (entry.objectAssignFromField && entry.objectMergeFromField) {\n    console.warn(\n      `${entry.key}: objectAssignFromField and objectMergeFromField cannot both be used on the same entry.`,\n    );\n    return;\n  }\n\n  const field =\n    entry.objectAssignFromField ||\n    entry.objectMergeFromField ||\n    entry.json_field;\n\n  // entry must have a lookup field\n  if (!field) return;\n\n  const fieldEntry = entry.location.infoj.find(\n    (_entry) => _entry.field === field,\n  );\n\n  // info must contain a matching fieldEntry\n  if (!fieldEntry) return;\n\n  // fieldEntry must have an object type value.\n  if (typeof fieldEntry.value !== 'object') return;\n\n  // Lookup for json value field entry\n  if (entry.json_field) {\n    if (!entry.json_key) {\n      console.warn('json_field requires entry.json_key to be specified');\n      return;\n    }\n\n    // The fieldEntry value may be null or undefined.\n    if (!fieldEntry.value) return;\n\n    entry.value = fieldEntry.value[entry.json_key];\n  }\n\n  if (entry.objectAssignFromField) {\n    Object.assign(entry, fieldEntry.value);\n  }\n\n  if (entry.objectMergeFromField) {\n    mapp.utils.merge(entry, fieldEntry.value);\n  }\n}\n\n/**\n@function entrySkip\n\n@description\nThe entrySkip(entry) methods checks whether a entry should be skipped from being processed in the iteration of infoj entries.\n\nSkipping may be conditional on the entry.value.\n\nEntries with falsy, null, or undefined values may be skipped if the entry is not editable.\n\nA layer.infoj_skip[] array can be configured to define which infoj entries should be skipped.\n\n@param {infoj-entry} entry\n\n@property {Object} entry.value\n@property {Object} entry.skipEntry Entry will always be skipped.\n@property {Object} entry.skipFalsyValue Entry with falsy value will be skipped.\n@property {Object} entry.skipUndefinedValue Entry with undefined value will be skipped.\n@property {Object} entry.skipNullValue - Entry with null value will be skipped.\n*/\nfunction entrySkip(entry) {\n  // Skip entry, no matter what.\n  if (entry.skipEntry) return true;\n\n  // Skip entries which are falsy if flagged.\n  if (entry.skipFalsyValue && !entry.value && !entry.edit) return true;\n\n  // Skip entries which are undefined if flagged.\n  if (\n    entry.skipUndefinedValue &&\n    typeof entry.value === 'undefined' &&\n    !entry.edit\n  )\n    return true;\n\n  // Skip entries which are null if flagged.\n  if (entry.skipNullValue && entry.value === null && !entry.edit) return true;\n}\n\n/**\n@function entryNullValue\n\n@description\nThe entryNullValue method will assigns the nullValue property value as entry.value for non editable entries only.\n\n@param {infoj-entry} entry\n@property {any} entry.nullValue Any JSON value; Must not be undefined.\n@property {Object} entry.edit Must be falsy.\n@property {any} entry.value\n*/\nfunction entryNullValue(entry) {\n  // Assign a default nullValue\n  if (entry.nullValue === undefined) return;\n\n  // The nullValue is only applied to non editable entries.\n  if (entry.edit) return;\n\n  // Assign nullValue to nullish entry.value.\n  entry.value ??= entry.nullValue;\n}\n\n/**\n@function entryDefault\n\n@description\nThe entryDefault method will assign the entry.default property value as entry.newValue on editable entries.\n\nThe valChange event of the entry.location.view HTMLElement will be called to indicate that the default value must be updated on the location.\n\n@param {infoj-entry} entry An infoj-entry typedef object.\n\n@property {Object} [entry.edit] The info-entry must have an edit config.\n@property {any} entry.default Any JSON value to be assigned as default newValue.\n@property {location} entry.location The location to which the entry belongs.\n@property {HTMLElement} location.view The location view to which the entry.listview / entry.node will be appended.\n*/\nfunction entryDefault(entry) {\n  // The entry.default must be defined.\n  if (entry.default === undefined) return;\n\n  if (!entry.edit) return;\n\n  entry.newValue = entry.default;\n\n  entry.location.view?.dispatchEvent(\n    new CustomEvent('valChange', {\n      detail: entry,\n    }),\n  );\n}\n\n/**\n@function entryGroup\n\n@description\nThe entryGroup(entry) method will create a new group for each unique entry.group string.\n\nEntry elements in the same group will be added to a group element drawer added to the entry[location].listview.\n\nThe group layout will be expanded by adding the expanded class to the group elements classList if the entry.expanded property is true.\n\n@param {infoj-entry} entry\n\n@property {string} entry.group The group key.\n@property {string} [entry.groupClassList] Group element classlist.\n@property {boolean} [entry.expanded] The 'expanded' class will be concatenated with group element classList.\n@property {HTMLElement} entry.listview The listview element will be returned from the infoj method and appended to the location.view.\n*/\nfunction entryGroup(entry) {\n  if (!entry.group) return;\n\n  // Create new group\n  if (!groups[entry.group]) {\n    groups[entry.group] = entry.listview.appendChild(\n      mapp.ui.elements.drawer({\n        class: `group ${entry.groupClassList || ''}`,\n        header: mapp.utils.html`\n          <h3>${entry.group}</h3>\n          <div class=\"notranslate material-symbols-outlined caret\"/>`,\n      }),\n    );\n  }\n\n  // The group will replace the entry listview to which elements will be appended.\n  entry.listview = groups[entry.group];\n}\n\n/**\n@function entryNode\n\n@description\nThe method assigns a <div> element with no children as entry.node and appends the HTMLElement to the entry.listview.\n\nThis allows entry methods to render into the entry.node after the infoj iteration has completed.\n\nA classList is assigned to the <div> element to represnt custom classes and layout (eg. inline).\n\n@param {infoj-entry} entry\n\n@property {string} entry.type Concatenate with entry.node classList.\n@property {string} [entry.class] Concatenate with entry.node classList.\n@property {boolean} [entry.inline] Add 'inline' to entry.node classList.\n@property {HTMLElement} entry.listview The listview element will be returned from the infoj method and appended to the location.view.\n*/\nfunction entryNode(entry) {\n  const classString = `contents ${entry.type} ${entry.class || ''} ${(entry.inline && 'inline') || ''}`;\n\n  entry.node = entry.listview.appendChild(mapp.utils.html.node`\n  <div\n    data-type=${entry.type}\n    class=${classString}>`);\n}\n\n/**\n@function entryTitle\n\n@description\nThe entryTitle methods will append a title element returned from mapp.ui.locations.entries.title(entry) to the entry.node if the entry.title is not falsy.\n\n@param {infoj-entry} entry\n\n@property {Object} entry.title The title value.\n@property {HTMLElement} entry.node The entry HTMLElement to be appended to the location.view element grid.\n*/\nfunction entryTitle(entry) {\n  if (!entry.title) return;\n\n  // Append title element to entry.node\n  entry.node.append(mapp.ui.locations.entries.title(entry));\n}\n\n/**\n@function entryQuery\n\n@description\nThe entryQuery() method checks whether a query should be executed to populate the entry.value.\n\nA query will be executed everytime with either the `run` or `queryCheck` entry property.\n\nA query will only be executed once with the `runOnce` entry property.\n\nThe infoj method for loop will continue if the entryQuery method returns true.\n\nThe queryCallback method will be assigned as default if undefined on the entry param.\n\nThe queryParams object will be processed by the queryParams utility method before a paramString is created for the query entry.url.\n\nThe query will be cancelled if the entry is provided to the XHR util before a previous query on the same entry object has been resolved.\n\nThe response and the entry will be provided as params to the queryCallback method once the XHR utility resolves the query.\n\nThe following json entry will be populated with the GeoJSON value from the geom_3857 field of the location.\n\n```json\n{\n  \"type\": \"json\",\n  \"query\": \"json_query\",\n  \"queryparams\": {\n    \"table\": true,\n    \"id\": true\n  },\n  \"runOnce\": true,\n  \"blocking\": true,\n  \"template\": {\n    \"key\": \"json_query\",\n    \"template\": \"SELECT ST_asGeoJSON(geom_3857) FROM ${table} WHERE glx_id = %{id}\",\n    \"value_only\": true\n  }\n}\n```\n\n@param {infoj-entry} entry\n\n@property {string} entry.query The query template.\n@property {string} entry.host The host for the XHR request.\n@property {string} entry.queryparams Parameter for the query.\n@property {boolean} entry.run Query should be immediate.\n@property {boolean} entry.queryCheck Query should be immediate.\n@property {function} entry.queryCallback The method to be executed with the query response as response argument.\n*/\nfunction entryQuery(entry) {\n  if (!entry.query) return;\n\n  // The run property does the same as the queryCheck property.\n  entry.queryCheck ??= entry.run;\n\n  entry.queryCallback ??= queryCallback;\n\n  // Check whether query returns data.\n  if (entry.runOnce || entry.queryCheck) {\n    // The query will only be run once not every time.\n    delete entry.runOnce;\n\n    // Assign location layer or mapp.host as fallback if not implicit.\n    entry.host ??= entry.location.layer?.mapview?.host || mapp.host;\n\n    const queryParams = mapp.utils.queryParams(entry);\n\n    const paramString = mapp.utils.paramString(queryParams);\n\n    entry.url = `${entry.host}/api/query?${paramString}`;\n\n    if (entry.blocking) {\n      entry.location.view?.classList.add('loading');\n    }\n\n    mapp.utils\n      .xhr(entry)\n      .then((response) => entry.queryCallback(response, entry));\n\n    return true;\n  } else if (entry.field && !entry.xhr) {\n    console.warn(\n      `field:\"${entry.field}\" has a query:\"${entry.query}\" which is not set to run, please add the run or runOnce flag to the entry.`,\n    );\n  }\n}\n\n/**\n@function queryCallback\n\n@description\nThe queryCallback method is assigned as default callback method for entries with a query property.\n\n@param {object} response The response from the entry.query\n@param {infoj-entry} entry\n*/\nfunction queryCallback(response, entry) {\n  if (entry.blocking) {\n    entry.location.view?.classList.remove('loading');\n  }\n\n  if (response) {\n    // Assign query response as entry value.\n    entry.value = entry.field ? response[entry.field] : response;\n  } else {\n    entry.value = entry.nullValue || null;\n  }\n\n  // Check whether entry should be skipped.\n  if (entrySkip(entry)) {\n    // Remove the entry.node from location view.\n    entry.node.remove();\n    return;\n  }\n\n  // Create element to be appended into empty entry.node\n  const el = mapp.ui.locations.entries[entry.type]?.(entry);\n\n  el && entry.node.appendChild(el);\n}\n\n/**\n@function entryTooltipIcon\n@description\nCreates and adds a tooltip element to a label_element.\n\nShortcircuits if the tooltipElement has already been created and added to the label_element.\n\n@param {infoj-entry} entry\n@property {string} entry.tooltip The content to be shown in a tooltip.\n*/\nfunction entryTooltipIcon(entry) {\n  if (!entry.tooltip) return;\n\n  // find container with class a label tag or title\n  const label_element =\n    entry.node.querySelector('label') || entry.node.querySelector('div.label');\n\n  if (!label_element) return;\n\n  // The tooltipElement already exists.\n  if (entry.tooltipElement) return;\n\n  entry.tooltipElement = mapp.ui.elements.tooltip({\n    content: entry.tooltip,\n  });\n\n  label_element.append(entry.tooltipElement);\n}\n", "/**\n## /ui/locations/listview\n\nThe listview module exports the listview method as mapp.ui.locations.listview()\n\nDictionary entries:\n- location_clear_all\n- location_listview_full\n\n@requires /dictionary\n\n@module /ui/locations/listview\n*/\n\n/**\n@global\n@typedef {Object} locale\nObject containing the details of the locale i.e. layer definitions, plugins, etc.\n\n@property {object} view A latitude and longitude used to determine the centre of the view\n@property {array} layers Array of `layers` to display in the listview.\n@property {object} [extent] Determines the size of the locale with using degrees east, west, etc.\n@property {string} [name] The name of the locale.\n@property {integer} [minZoom] limits the minimum zoom level of the mapview.\n@property {integer} [maxZoom] limits the maximum zoom level of the mapview.\n@property {string} [ScaleLine] sets the units for the scalebar.\n@property {object} [gazetteer] Configuration options for location lookups.\n@property {object} [roles] sets the roles and deines what they have access to in the locale.\n@property {object} [queryparams] params to be assigned to `layer.queryparams` and `entry.queryparams`\n@property {boolean} [locator] boolean flag for adding a locator to button column.\n@property {array} [plugins] A list of plugins to be loaded.\n@property {object} [svg_templates] A list of templates to be cached and used with {@link module:/utils/svgSymbols}\n@property {array} [listview_records] An array for the symbol and colour being assigned to `mapview.locations{}`.\n@property {layer} [layer] A master for all layers on the locale.\n*/\n\n// Default records for storing locations in locale.\nconst records = [\n  {\n    colour: '#2E6F9E',\n    symbol: 'A',\n  },\n  {\n    colour: '#EC602D',\n    symbol: 'B',\n  },\n  {\n    colour: '#5B8C5A',\n    symbol: 'C',\n  },\n  {\n    colour: '#B84444',\n    symbol: 'D',\n  },\n  {\n    colour: '#514E7E',\n    symbol: 'E',\n  },\n  {\n    colour: '#E7C547',\n    symbol: 'F',\n  },\n  {\n    colour: '#368F8B',\n    symbol: 'G',\n  },\n  {\n    colour: '#841C47',\n    symbol: 'H',\n  },\n  {\n    colour: '#61A2D1',\n    symbol: 'I',\n  },\n  {\n    colour: '#37327F',\n    symbol: 'J',\n  },\n];\n\n/**\n@function listview\n\n@description\nRetrieves the locations pinstyle from `locale.locations.pinStyle` and generates the pin\nAppends the clear all button the location view which removes all locations from the view.\n\nCreates a Proxy for `params.mapview.locations` which uses {@link module:/ui/locations/listview~setRecord} as its set method,\nfurther assigns a deleteProperty function which removes locations by removing the assigned hook from the record.\nThe deleteProperty function also calls {@link module:/ui/locations/listview~gazCheck}\n\n@param {object} params\n@property {mapview} params.mapview The mapview of the instance.\n@property {HTMLElement} params.target The target for the listview.\n*/\nexport default function listview(params) {\n  if (!params.mapview) {\n    console.warn(\n      'A mapview is required in the locations listview params argument.',\n    );\n  }\n\n  if (!params.target) {\n    console.warn(\n      'A target element is required in the locations listview params argument.',\n    );\n  }\n\n  const locale = params.mapview.locale;\n\n  locale.locations ??= {};\n\n  locale.locations.pinStyle ??= {\n    anchor: [0.5, 1],\n    scale: 3,\n    type: 'markerLetter',\n  };\n\n  locale.locations.style ??= {\n    fillColor: '#fff',\n    fillOpacity: 0.1,\n    strokeColor: '#fff',\n  };\n\n  //Assign default records or `listview_records` to the location\n  locale.locations.records ??=\n    locale.listview_records || structuredClone(records);\n\n  locale.locations.clearAll = params.target.appendChild(mapp.utils.html.node`\n    <button\n      style=\"display: none; width: 100%; text-align: right;\"\n      class=\"tab-display bold text-shadow\"\n      onclick=${(e) => {\n        // Remove all mapview locations\n        Object.values(params.mapview.locations).forEach((location) =>\n          location.remove(),\n        );\n      }}>\n      ${mapp.dictionary.location_clear_all}`);\n\n  locale.locations.noLocations = params.target.appendChild(\n    mapp.utils.html.node`<p class=\"no_locations\">\n                          ${mapp.dictionary.location_no_location_selected}</p>`,\n  );\n\n  // Create proxy for mapview.locations\n  params.mapview.locations = new Proxy(params.mapview.locations, {\n    deleteProperty: function (target, hook) {\n      // Proxy default\n      Reflect.deleteProperty(...arguments);\n\n      const record = locale.locations.records.find(\n        (record) => record.hook === hook,\n      );\n\n      record && delete record.hook;\n\n      setTimeout(() => gazCheck(locale), 300);\n\n      return true;\n    },\n    set: setRecord,\n  });\n\n  /**\n  @function setRecord\n\n  @description\n  Assign a record to selected location.\n  A maximum of ten records is available by default. Selecting more than the max will generate an alert.\n  Generates and applies the style of the location in the listview\n  Creates the OlStyle for the pin associated to the location\n\n  Triggers the event to add the location to view.\n  Prepends new locations to the listview, minimizing the other locations when a new one is selected\n\n  @param {location} location\n  */\n  function setRecord(target, key, location) {\n    // Find a free record for location.\n    const record = locale.locations.records.find((record) => !record.hook);\n\n    // No empty record found.\n    if (!record) {\n      mapp.ui.elements.alert({ text: mapp.dictionary.location_listview_full });\n      return true;\n    }\n\n    // Proxy default.\n    Reflect.set(...arguments);\n\n    // Set record hook from location.\n    record.hook = location.hook;\n\n    // Assign record to the location.\n    location.record = record;\n\n    location.style = structuredClone(locale.locations.style);\n\n    // Assign stroke and filleColor from record.\n    if (record.colour) {\n      location.style.strokeColor &&= record.colour;\n      location.style.fillColor &&= record.colour;\n    }\n\n    // Create OL Style object for pin icon.\n    location.pinStyle = mapp.utils.style({\n      icon: {\n        ...locale.locations.pinStyle,\n        color: location.style.strokeColor,\n        letter: record.symbol,\n      },\n    });\n\n    // Create location view.\n    mapp.ui.locations.view(location);\n\n    // Collapse all location view drawer in list.\n    Object.values(params.target.children).forEach((el) =>\n      el.classList.remove('expanded'),\n    );\n\n    // New location view should be inserted after clearAll but before first current location view.\n    params.target.insertBefore(\n      location.view,\n      locale.locations.clearAll.nextSibling,\n    );\n\n    // Send event after the location view has been added to the DOM.\n    location.view.dispatchEvent(new Event('addLocationView'));\n\n    // Show the clear all button.\n    locale.locations.clearAll.style.display = 'block';\n\n    //Hide no locations text;\n    locale.locations.noLocations.style.display = 'none';\n\n    // Click locations tab header.\n    document.querySelector('[data-id=locations]').click();\n\n    // Hide locations tab if no gazetteer input present.\n    document.querySelector('[data-id=locations]').style.display = 'block';\n\n    return !!location;\n  }\n}\n\n/**\n@function gazCheck\n\n@description\nHides the location view if a gazetteer is being interacted with.\nClears the value of the gazetteer input.\nControls whether the clear all button is shown by checking if any locations are selected.\n\n@param {locale} locale\n*/\nfunction gazCheck(locale) {\n  // clearAll should not be shown without locations to clear\n  if (!document.querySelectorAll('#locations > .location-view').length) {\n    // Activate the layers panel\n    document.querySelector('[data-id=layers]').click();\n\n    locale.locations.clearAll.style.display = 'none';\n\n    // Find gazetteer input.\n    const gazInput = document.querySelector('#locations input');\n\n    if (gazInput) {\n      // Clear the gazetteer input value.\n      gazInput.value = '';\n    } else {\n      // Hide locations tab if no gazetteer input present.\n      locale.locations.noLocations.style.display = 'block';\n    }\n  }\n}\n", "/**\n## /ui/locations/view\n\nThe module exports a default method to create a location view to be added to a locations listview.\n\nDictionary entries:\n- location_zoom\n- location_save\n- location_delete\n- location_remove\n- location_close_without_save\n- location_save_changes\n@requires /dictionary \n\n@module /ui/locations/view\n*/\n\n/**\n@function view\n\n@description\nThe view method creates a location view element group.\n\n@param {location} location A mapp location object.\n@property {Object} location.record A location is stored in a record object in the mapview.locations object.\n@property {Array} [location.removeCallbacks] An array of methods which will be executed when a location is removed.\n\n@returns {HTMLElement} The location.view element.\n*/\nexport default function view(location) {\n  location.removeCallbacks?.push(function () {\n    location.view.remove();\n  });\n\n  // Header with expander icon.\n  const header = [\n    mapp.utils.html`<h2>${location.record.symbol}`,\n    mapp.utils.html`<div class=\"notranslate material-symbols-outlined caret\"/>`,\n  ];\n\n  // Zoom to location bounds.\n  if (\n    location.infoj\n      .filter((entry) => new Set(['pin', 'geometry']).has(entry.type))\n      .some((entry) => !!entry.value)\n  ) {\n    header.push(mapp.utils.html`<button\n      title = ${mapp.dictionary.location_zoom}\n      class = \"notranslate material-symbols-outlined\"\n      onclick = ${() => location.flyTo()}>search`);\n  }\n\n  if (toggleLocationViewEdits(location)) {\n    // Toggling locationViewEdits are enabled.\n    header.push(location.editToggle);\n  }\n\n  // Update icon.\n  header.push(mapp.utils.html`<button\n    title=${mapp.dictionary.location_save}\n    class=\"btn-save notranslate material-symbols-outlined color-info\"\n    style=\"display: none;\"\n    onclick = ${() => {\n      location.view.classList.add('disabled');\n      location.update();\n    }}>cloud_upload`);\n\n  // The updateInfo event must be called after the editToggle callback.\n  location.updateCallbacks?.push(function () {\n    location.view.dispatchEvent(new Event('updateInfo'));\n  });\n\n  // Trash icon.\n  if (location.layer?.edit?.delete || location.layer?.deleteLocation) {\n    header.push(mapp.utils.html`<button\n      title=${mapp.dictionary.location_delete}\n      class=\"notranslate material-symbols-outlined color-danger\"\n      onclick = ${() => location.trash()}>delete`);\n  }\n\n  // Clear selection.\n  header.push(mapp.utils.html`<button\n    title=${mapp.dictionary.location_remove}\n    class=\"notranslate material-symbols-outlined\"\n    onclick=${location_remove}>close</button>`);\n\n  /**\n  @function location_remove\n  @async\n\n  @description\n  The method checks whether a location.infoj has some unsaved changes. A confirm dialog will be shown to confirm the location.remove() without saving changes.\n  */\n  async function location_remove() {\n    const changesUnsaved = location.infoj.some(\n      (entry) => typeof entry.newValue !== 'undefined',\n    );\n\n    if (changesUnsaved) {\n      const confirm = await mapp.ui.elements.confirm({\n        text: mapp.dictionary.location_close_without_save,\n      });\n\n      if (!confirm) return;\n    }\n\n    location.remove();\n  }\n\n  location.view = mapp.ui.elements.drawer({\n    class: 'location-view raised expanded',\n    header: header,\n  });\n\n  location.viewEntries = location.view.appendChild(\n    mapp.ui.locations.infoj(location),\n  );\n\n  // Assign location.record.colour as border to the location.view header.\n  location.view.querySelector('.header').style.borderBottom =\n    `3px solid ${location.record.colour}`;\n\n  // Add listener for custom valChange event.\n  location.view.addEventListener('valChange', valChange);\n\n  location.renderLocationView = renderLocationView;\n\n  location.view.addEventListener('render', () => location.renderLocationView());\n\n  location.view.addEventListener('updateInfo', () => {\n    // Location has toggle editing.\n    if (location.editToggle) {\n      location.editToggle.classList.remove('toggle-on');\n\n      // Remove edits from infoj entries.\n      location.removeEdits();\n    }\n\n    // Refresh dataviews\n    if (location.layer?.dataviews) {\n      Object.values(location.layer.dataviews).forEach((dv) => {\n        if (dv.display === true) {\n          dv.update();\n        }\n      });\n    }\n\n    location.renderLocationView();\n  });\n}\n\n/**\n@function toggleLocationViewEdits\n\n@description\nThe toggleLocationViewEdits checks whether the location.layer has the toggleLocationViewEdits flag.\n\nAt least one entry of the location must be editable.\n\nNew locations must always be editable.\n\nThe location.editToggle button element for the location view header is created.\n\n@param {location} location Mapp Location typedef\n\n@return {Boolean} Returns true if toggleLocationViewEdits should be possible.\n*/\nfunction toggleLocationViewEdits(location) {\n  if (!location.layer?.toggleLocationViewEdits) {\n    // Toggle has not been set for layer.\n    return false;\n  }\n\n  if (!location.infoj.some((entry) => entry.edit)) {\n    // The location has no editable entries.\n    return false;\n  }\n\n  // Remove edits if location is not new.\n  !location.new && location.removeEdits();\n\n  const classList = `notranslate material-symbols-outlined ${location.new ? 'toggle-on' : ''}`;\n\n  // Create edit toggle button.\n  location.editToggle = mapp.utils.html.node`<button\n    title=\"Enable edits\"\n    class=${classList}\n    onclick=${onClickEditToggle}>edit`;\n\n  return true;\n\n  /**\n  @function onClickEditToggle\n  @async\n\n  @description\n  The method awaits the location.confirmUpdate() method and will toggle the edit button if the response is not undefined.\n\n  The location edits are either removed or restored depending on the toggle of the button.\n\n  The location view must be rendered after the infoj entry edits are modified.\n  \n  @param {Event} e The location.editToggle onclick event.\n  */\n  async function onClickEditToggle(e) {\n    const confirmUpdate = await location.confirmUpdate();\n\n    if (confirmUpdate !== undefined) return;\n\n    if (e.target.classList.toggle('toggle-on')) {\n      location.restoreEdits();\n    } else {\n      location.removeEdits();\n    }\n    location.renderLocationView();\n  }\n}\n\n/**\n@function valChange\n\n@description\nThe valChange method is assigned to the valChange custom event listener of the location.view element.\n\nAn infoj-entry must be provided as detail when the valChange custom event is dispatched.\n\nThe valChange method will check whether an entry has a newValue which is different from the current value and assign a class to show the change on the input element.\n\nThe valChange event controls the display of the location.update button (.btn-save).\n\nThe update button will not be displayed if no entry has a newValue or if some entry is invalid.\n\n@param {Event} e A custom event from the location.view eventlistener.\n@property {infoj-entry} e.detail The detail passed to the valChange event must be an info-entry typedef.\n*/\nfunction valChange(e) {\n  const entry = e.detail;\n\n  // Get location from entry\n  const location = entry.location;\n\n  if (entry.valChangeMethod instanceof Function) {\n    // Execute a custom valChangeMethod.\n    entry.valChangeMethod(entry);\n    return;\n  }\n\n  if (entry.value != entry.newValue) {\n    // newValue is different from value.\n    entry.node?.classList.add('val-changed');\n  } else {\n    // newValue is the same as value.\n    delete entry.newValue;\n    entry.node?.classList.remove('val-changed');\n  }\n\n  if (location.infoj.some((entry) => entry.invalid)) {\n    // Hide save button if some location entry is invalid.\n    location.view.querySelector('.btn-save').style.display = 'none';\n    return;\n  }\n\n  // Hide upload button if no location entry has a newValue.\n  location.view.querySelector('.btn-save').style.display = location.infoj.some(\n    (entry) => typeof entry.newValue !== 'undefined',\n  )\n    ? 'inline-block'\n    : 'none';\n}\n\n/**\n@function renderLocationView\n\n@description\nThe renderLocationView method will remove all location.viewEntries and the `.disabled` class from the location.view before recreating the location.viewEntries and appending these to the location.view element.\n*/\nfunction renderLocationView() {\n  const location = this;\n\n  // Hides the upload icon.\n  location.view.querySelector('.btn-save').style.display = 'none';\n\n  // Remove location.viewEntries.\n  location.viewEntries.remove();\n\n  // Enables the location view node and child elements.\n  location.view.classList.remove('disabled');\n\n  // Recreate location.viewEntries.\n  location.viewEntries = location.view.appendChild(\n    mapp.ui.locations.infoj(location),\n  );\n}\n", "/**\n## ui/locations\n\nThe locations module compiles methods for the creation of location views.\n\n- view\n- listview\n- infoj\n- entries\n\n@module /ui/locations\n*/\n\nimport entries from './entries/_entries.mjs';\nimport infoj from './infoj.mjs';\nimport listview from './listview.mjs';\nimport view from './view.mjs';\n\nexport default {\n  entries,\n  infoj,\n  listview,\n  view,\n};\n", "/**\n## ui/Tabview\n\nThe Tabview module exports the Tabview decorator method.\n\n@module /ui/Tabview\n*/\n\n/**\n@global\n@typedef {Object} tabview\nA tabview object is an element to display tabs and their associated panels.\n@property {string} id\nUnique id provided as object property to be assigned as data-id to the tabview.node.\n@property {HTMLElement} node Required HTML element to hold the tabview tabs and panel elements.\n@property {HTMLElement} tabs HTML element to hold add tab elements.\n@property {HTMLElement} panel HTML element to display the panel element of the current active tab.\n@property {Function} addTab Method to add a tab to the tabview.\n*/\n\n/**\n@function Tabview\n\n@description\nThe Tabview decorator method will deocrate the tabview parameter argument as `typedef:tabview` and return the decorated tabview.\n\nThe tabview object has an addTab() method which can be called with through the `addTab` event listener added to the `tabview.node` HTMLElement.\n\n@param {Object} tabview Object to decorate.\n@property {HTMLElement} tabview.node Required HTML element to hold the tabview tabs and panel elements.\n\n@return {tabview} Decorated tabview typedef object.\n*/\n\nexport default function Tabview(tabview) {\n  if (!tabview.node) return;\n\n  tabview.tabs =\n    tabview.node.appendChild(mapp.utils.html.node`<div class=\"tabs\">`);\n\n  tabview.panel =\n    tabview.node.appendChild(mapp.utils.html.node`<div class=\"panel\">`);\n\n  // Set data attribute ID from element ID.\n  tabview.id && tabview.node.setAttribute('data-id', tabview.id);\n\n  tabview.addTab = addTab;\n\n  tabview.node.addEventListener('addTab', (e) => tabview.addTab(e.detail));\n\n  return tabview;\n}\n\n/**\n@function addTab\n\n@description\nThe addTab() method is bound to the tabview [this] object in the decorator.\n\nThe `tabview.addTab()` will decorate an entry object as a tabview tab. The method will return if the entry has already been decorated preventing the method to be accidentaly called twice with same param argument.\n\nThe tab element itself will be assigned as tab property to the entry.\n\nThe tab decorator will add callbacks for the entry location or layer to trigger the display of the tabview when the associated mapp object status is toggled.\n\nThe decorator method will add `show()` and `hide()` methods for the tab.\n\nThe tab comes with a close button which can be hidden with disableTabClose, this will also disable the middle click close\nif set to true.\n\n@param {Object} entry The entry object will be decorated as a tabview tab.\n@property {HTMLElement} entry.tab The entry object already has been added as a tab.\n@property {location} [entry.location] A location associated with the entry.\n@property {layer} [entry.layer] A layer associated with the entry.\n@property {string} [entry.label] The title to be displayed in the tab element.\n@property {HTMLElement} [entry.panel] The node element which will be displayed if the tab is active.\n@property {Boolean} [entry.disabled] A flag for enabling or disabling the tab.\n@property {Boolean} [entry.disableTabClose] A flag for hiding and disabling the close button shown on a tab.\n@property {Boolean} [entry.hideTabClose] A flag for hiding the close button on the tab.\n*/\nfunction addTab(entry) {\n  // The entry already has a tab, and is not flagged as dynamic.\n  if (entry.tab && !entry.dynamic) return;\n\n  const tabview = this;\n\n  //Hide disable tab closing if the layer.dataviews has hide true\n  if (entry.layer?.dataviews?.[entry.key]) {\n    entry.disableTabClose ??= entry.layer.dataviews.hide;\n  }\n\n  entry.activate ??= activateTab;\n\n  if (entry.location) {\n    // The tabview should be removed if the location is removed.\n    entry.location.removeCallbacks.push(() => entry.remove());\n  } else if (entry.layer) {\n    // Show tab when layer is displayed.\n    entry.layer.showCallbacks.push(() => {\n      // Entry must have display flag.\n      entry.display && entry.show();\n    });\n\n    // Hide tab when layer is hidden.\n    entry.layer.hideCallbacks.push(() => {\n      entry.remove();\n    });\n  }\n\n  entry.label ??= entry.title || entry.key || 'Tab';\n\n  entry.tab_btn = mapp.utils.html.node`<button\n    onclick=${showTab}>${entry.label}`;\n\n  const showCloseBtn = !entry.disableTabClose && !entry.hideTabClose;\n\n  const closeBtn = mapp.utils.html`<button \n    class=\"notranslate material-symbols-outlined close_tab\"\n    onclick=${(e) => {\n      //Prevent the tab click event from firing.\n      e.stopPropagation();\n      return removeTab();\n    }}>close`;\n\n  entry.tab = mapp.utils.html.node`<div class=\"tab\">\n    <div \n      class=\"header\" \n      style=\"${entry.tab_style || ''}\"\n      .inert=${entry.disabled}\n      onmousedown=${(e) => {\n        //Close tab on middle click\n        if ((e.which === 2 || e.button === 4) && !entry.disableTabClose)\n          return removeTab();\n      }} \n      onclick=${(e) => {\n        //Clicking on the header calls the buton\n        entry.tab_btn.dispatchEvent(new Event('click'));\n      }}>\n      ${entry.tab_btn}\n      ${showCloseBtn ? closeBtn : ''}`;\n\n  entry.disabled && entry.tab.style.setProperty('opacity', 0.3);\n\n  entry.class ??= '';\n  const panelClass = `panel ${entry.class}`;\n\n  entry.panel ??=\n    entry.target ||\n    mapp.utils.html.node`\n    <div class=${panelClass}>`;\n\n  entry.show = showTab;\n\n  entry.remove = removeTab;\n\n  // Must override dataview hide method.\n  entry.hide = removeTab;\n\n  /**\n  @function activateTab\n\n  @description\n  The activateTab method is debounced for tabs being shown/added to a tabview. A tab may be a dataview object which requires to be created/updated within the context of the tab.\n\n  The dataview may have an associated toolbar [btnRow element] which must be displayed.\n  */\n  function activateTab() {\n    if (entry.create === undefined) {\n      entry.create ??= function () {\n        mapp.ui.utils[entry.dataview]?.create(entry);\n      };\n\n      entry.create();\n    } else if (entry.dynamic) {\n      entry.create();\n    }\n\n    // Dataviews with the dynamic flag will always update.\n    if (!entry.data || entry.dynamic) {\n      entry.update?.();\n    }\n\n    //Show toolbar buttons if there are any\n    entry.btnRow?.style.setProperty('display', 'flex');\n  }\n\n  /**\n  @function showTab\n\n  @description\n  The showTab() method will be assigned as `entry.show()` method to a decorated tabview tab. The method is associated with the tab element click event which activates a tab. The '.active` class will be added to the tab element classList.\n\n  The showTab method is debounced by 500ms to execute only for the last tab to be added when multiple tabs are added in quick succession.\n  */\n  function showTab() {\n    // Render entry.panel into tabview.panel\n    mapp.utils.render(tabview.panel, entry.panel);\n\n    // Remove the active class from all tabs.\n    tabview.tabs.childNodes.forEach((tab) => tab.classList.remove('active'));\n\n    // Add the tab element to tabs container if the tab element has no parent yet.\n    !entry.tab.parentElement && tabview.tabs.append(entry.tab);\n\n    // Make the tab active by assigning class.\n    entry.tab.classList.add('active');\n\n    // The activate event should be delayed with a timeout.\n    // This prevents each tab to activate when multiple tabs are added in quick succession.\n    tabview.timer && window.clearTimeout(tabview.timer);\n\n    tabview.timer = window.setTimeout(() => entry.activate(), 500);\n\n    if (tabview.showTab instanceof Function) {\n      // Execute tabview method to show a tab.\n      tabview.showTab();\n    }\n  }\n\n  /**\n  @function removeTab\n\n  @description\n  The removeTab() method will be assigned as `entry.remove()` as well as `entry.hide()` methods to a decorated tabview tab.\n\n  A tab may be a dataview which has it's own show method, but not a remove method.\n\n  The method iterates through all sibling tab elements to activate the next tab if a tab is removed.\n\n  Tabs can closed while not active, if an active tab exists nothing will be clicked.\n\n  The removeLastTab() method of the tabview will be executed if the last tab object is removed from a tabview.\n  */\n  function removeTab() {\n    // A tab without parent element cannot be in the tab bar.\n    if (!entry.tab.parentElement) return;\n\n    // Find a sibling of the entry.\n    const sibling =\n      entry.tab.nextElementSibling || entry.tab.previousElementSibling;\n\n    const entry_parent = entry.tab.parentElement;\n    // Remove the tab element from tab bar.\n    entry.tab.remove();\n\n    //Uncheck checkbox on the entry\n    if (entry.chkbox) entry.chkbox.querySelector('input').checked = false;\n\n    //Do nothing if there is an active sibling\n    if (entry_parent.querySelector('.tab.active')) return;\n\n    // Activate the sibling.\n    if (sibling) {\n      return sibling.querySelector('.header').click();\n    }\n\n    // The tab has no siblings.\n    tabview.removeLastTab?.();\n  }\n}\n", "/**\n# /ui/utils/cssColourTheme\n\nThe cssColourTheme utility module method allows to override the default mapp colour theme.\n\n### primary `#003d57`\nThe primary colour provides identity to a theme and should be strong and significantly different to the base colour. This colour will be used for labelling interactive buttons, links and symbols. It can be also be used as background for headers and labels.\n\n### base `#f2f2f2`\nThe base colour is the document body background and the background for all element base elements which should not standout from the background. Dialogs should have the base background for elements to work in either a dialog or in the body of an application view document.\n\n### base-secondary `#f7f7f7`\nThe secondary base colour should slightly accentuate items rendered relative to the elements with a base background.\n\n### base-tertiary `#fafafa`\nThe tertiary base colour should slightly accentuate items rendered relative to the elements with a secondary base background.\n\n### font `#3f3f3f`\nThe default colour for font characters and icons.\n\n### font-mid `#858585`\nThe font colour should sit between the default and the contrasting font colour.\n\n### font-contrast `#dddddd`\nThe font colour must be contrasting to the default font colour to work on a background.\n\n### border `#dddddd`\nThe default colour for all element borders and box-shadows.\n\n### active `#d57120`\nThe active colour is applied where an active class requires a colour change to indicate that an element is active.\n\n### hover `#939faa`\nThe hover colour is applied to element backgrounds in a state of hover.\n\n### changed `#ffffa7`\nThe changed colour is applied to element backgrounds with a class representing a changed state.\n\n### info `#0b6f50`\nThe info colour is a prominent colour indicating information, confirmation, availability, valid state. It is applied to a symbol in order to attract attention.\n\n### danger `#a21309`\nThe danger colour is a strong colour indicating error, invalid data, irreversible actions, logout. Applied to a symbol in order to indicate an important action.\n\n\n@module /ui/utils/cssColourTheme\n*/\n\nexport const themes = {\n  dark: {\n    active: '#e18335',\n    base: '#222222',\n    'base-secondary': '#555555',\n    'base-tertiary': '#444444',\n    border: '#666666',\n    changed: '#666600',\n    danger: '#ef5350',\n    font: '#f2f2f2',\n    'font-contrast': '#3f3f3f',\n    'font-mid': '#CCCCCC',\n    primary: '#DAD095',\n  },\n};\n\n/**\n@function setTheme\n@description\nThe setTheme method receives an object of colour variables.\n\nThe key identifies the colour variable `--color-[key]`.\n\nThe property value defines the colour variable value.\n\nThe method removes the currentTheme colour variables before assigning the colourTheme variables as currentTheme.\n\n@param {Object} colourTheme The colourTheme to be applied.\n*/\nlet currentTheme = {};\nexport function setTheme(colourTheme) {\n  const root = document.querySelector(':root');\n\n  for (const [key, value] of Object.entries(currentTheme)) {\n    root.style.removeProperty(`--color-${key}`, `${value}`);\n  }\n\n  currentTheme = colourTheme;\n\n  for (const [key, value] of Object.entries(currentTheme)) {\n    root.style.setProperty(`--color-${key}`, `${value}`);\n  }\n}\n", "/**\n## /ui/utils/dataview\n\nThe dataview ui utils provide access to a method which creates a toolbar for dataviews.\n\nToolbar method defined in the mapp.ui.utils.dataview.toolbar object are accessible for dataview types.\n\n@requires /ui/elements/jsoneditor\n@requires /ui/elements/dialog\n\n@module /ui/utils/dataview\n*/\n\nconst dataview = {\n  mapChange,\n  Toolbar,\n  toolbar: {\n    update,\n    viewport,\n  },\n};\n\nexport default dataview;\n\n/**\n@function Toolbar\n\n@description\nThe Toolbar method will create a HTML Element container with target elements for toolbar elements and the dataview itself.\n\n@param {dataview} _this Dataview object.\n@property {Object} _this.toolbar Configuration object for a toolbar supporting the dataview.\n@property {string} _this.dataview The type of dataview\n@property {HTMLElement} _this.target Target element in which the dataview is rendered.\n@property {HTMLElement} [_this.panel] A panel element to be displayed in a tab[view].\n*/\nfunction Toolbar(_this) {\n  // A toolbar config object is required.\n  if (!_this.toolbar) return;\n\n  // A custom toolbar method has been assigned to the dataview.\n  if (typeof _this.toolbar === 'function') {\n    _this.toolbar();\n  }\n\n  // Target for the dataview.\n  const target = mapp.utils.html.node`<div class=\"dataview-target\">`;\n\n  const toolbarElements = Object.keys(_this.toolbar)\n    .map((key) => {\n      // Check first if a dataview specific toolbar method exists.\n      if (Object.hasOwn(mapp.ui.utils[_this.dataview]?.toolbar, key)) {\n        return mapp.ui.utils[_this.dataview]?.toolbar[key]?.(_this);\n        // Otherwise check if a generic toolbar method exists.\n      } else if (Object.hasOwn(mapp.ui.utils.dataview.toolbar, key)) {\n        return mapp.ui.utils.dataview.toolbar[key](_this);\n      }\n    })\n    .filter((item) => !!item);\n\n  // Create an element for the toolbar buttons\n  _this.btnRow = mapp.utils.html\n    .node`<div class=\"btn-row\">${toolbarElements}</div>`;\n\n  // By default btnRow is hidden\n  _this.btnRow.style.setProperty('display', 'none');\n\n  // The panel will be assigned in a tabview.\n  _this.panel = _this.target.appendChild(mapp.utils.html.node`\n      <div class=\"flex-col\">\n        ${_this.btnRow}\n        ${target}`);\n\n  // Assign dataview target as target.\n  _this.target = target;\n}\n\n/**\n@function mapChange\n\n@description\nThe mapChange method assigns an event listener for the custom changeEnd event of the dataview.layer mapview.\n\nThe mapChange property can be a function which is executed if the 'changeEnd' event is triggered. \n\nOtherwise the dataview.update() method will be executed.\n\nThe event method will shortcircuit if the dataview object is tabview tab without the `.active` class.\n\n@param {Object} _this Dataview object.\n@property {Object} [_this.mapChange] A boolean flag or function.\n@property {layer} _this.layer A layer associated with a dataview.\n@property {mapview} layer.mapview The layer mapview.\n*/\nfunction mapChange(_this) {\n  // The dataview should not update with a mapchange event.\n  if (!_this.mapChange) return;\n\n  // A decorated layer must be associated to the dataview.\n  if (!_this.layer?.mapview) return;\n\n  _this.layer.changeEndCallbacks.push(() => {\n    if (!_this.display) return;\n    // Only update dataview if corresponding layer is visible.\n    if (!_this.layer.display) return;\n\n    // Only update dataview in tab if active.\n    if (_this.tab && !_this.tab.classList.contains('active')) return;\n\n    // Execute mapChange if defined as custom function.\n    if (typeof _this.mapChange === 'function') {\n      _this.mapChange();\n    } else {\n      _this.update();\n    }\n  });\n}\n\n/**\n@function update\n\n@description\nThe update [toolbar] method will return a button element for the dataview toolbar.\n\nThe button will toggle a dialog for dataview update.\n\n@param {dataview} dataview Dataview object.\n*/\nfunction update(dataview) {\n  dataview.toolbar.update.button = mapp.utils.html.node`<button \n    onclick=${() => {\n      const toogle = dataview.toolbar.update.button.classList.toggle('active');\n      if (toogle) {\n        updateDialog(dataview);\n      } else {\n        dataview.toolbar.update.dialog.close();\n      }\n    }}>\n    Update`;\n\n  return dataview.toolbar.update.button;\n}\n\n/**\n@function updateDialog\n\n@description\nThe updateDialog method will present a jsonEditor element in a dialog.\n\nThe jsonEditor toolbar will provide methods to update the dataview or set the dataview data from the JSON content of the jsonEditor element.\n\n@param {dataview} dataview Dataview object.\n*/\nasync function updateDialog(dataview) {\n  const content = mapp.utils.html.node`<div>`;\n\n  const jsonContent = {\n    data: dataview.data,\n    query: dataview.query,\n    queryparams: dataview.queryparams,\n  };\n\n  const jsoneditor = await mapp.ui.elements.jsoneditor({\n    props: {\n      content: {\n        text: JSON.stringify(jsonContent),\n      },\n      mode: 'text',\n      onRenderMenu: renderUpdateMenu,\n    },\n    target: content,\n  });\n\n  dataview.toolbar.update.dialog = {\n    closeBtn: true,\n    content,\n    header: 'Dataview Update',\n    onClose: (e) => {\n      dataview.toolbar.update.button.classList.remove('active');\n    },\n    target: document.getElementById('Map'),\n  };\n\n  mapp.ui.elements.dialog(dataview.toolbar.update.dialog);\n\n  // Create a custom menu for the userLayer jsoneditor control.\n  function renderUpdateMenu(items) {\n    // Push button to add layer to mapview layers.\n    items.push({\n      className: 'notranslate material-symbols-outlined-important',\n      onClick: updateDataview,\n      text: 'sync',\n      title: 'Update Dataview Query',\n      type: 'button',\n    });\n\n    items.push({\n      className: 'notranslate material-symbols-outlined-important',\n      onClick: setDataview,\n      text: 'data_object',\n      title: 'Set Dataview Data',\n      type: 'button',\n    });\n\n    return items\n      .filter((item) => item.text !== 'table')\n      .filter((item) => item.text !== 'tree')\n      .filter((item) => item.type !== 'separator')\n      .filter((item) => item.className !== 'jse-undo')\n      .filter((item) => item.className !== 'jse-redo')\n      .filter((item) => item.className !== 'jse-search')\n      .filter((item) => item.className !== 'jse-contextmenu')\n      .filter((item) => item.className !== 'jse-sort')\n      .filter((item) => item.className !== 'jse-transform');\n  }\n\n  function updateDataview() {\n    const content = jsoneditor.get();\n\n    const json = JSON.parse(content.text);\n\n    Object.assign(dataview, json);\n\n    dataview.update();\n  }\n\n  function setDataview() {\n    const content = jsoneditor.get();\n\n    const json = JSON.parse(content.text);\n\n    dataview.setData(json.data);\n  }\n}\n\n/**\n@function viewport\n@description\nThe viewport method returns a button element which will toggle the boolean dataview.viewport flag.\nThe viewport of an associated dataview.mapview will be provided as param for requests to the dataview query.\nData returned from a query with the ${viewport} parameter should be limited to records where the geometry field intersects the viewport.\n@param {Object} dataview The dataview object\n@returns {HTMLElement} A button element to toggle the dataview.viewport value.\n*/\nfunction viewport(dataview) {\n  const classList = ['flat', dataview.viewport ? 'active' : ''].join(' ');\n\n  return mapp.utils.html`<button\n    class=${classList}\n    onclick=${(e) => {\n      const toggle = e.target.classList.toggle('active');\n      dataview.viewport = toggle;\n      dataview.update();\n    }}>${mapp.dictionary.tabulator_viewport}`;\n}\n", "/**\n### mapp.ui.elements.dataviewDialog()\n\nExports the dialog method as mapp.ui.elements.dataviewDialog()\n\n@module /ui/elements/dataviewDialog\n@requires /ui/elements/dialog\n*/\n\n/**\n@function dataviewDialog\n\n@description\nCreates a dialog which can hold dataviews: charts and tables.\n\nThe dialog is resizable and allows for a width and height param config.\n\nAssigns a `dataview_dialog` object to the dataview which holds the created dialog.\n\n```\n{\n  \"target\": \"dialog\"\n  \"dialog_css\": {\n    \"width\": 300,\n    \"height\": 400,\n    \"minHeight\": 350,\n    \"minWidth\": 250,\n  }\n  ...\n}\n\n@param {Object} dataview The dialog configuration object.\n@property {HTMLElement} dataview.chkbox Checkbox that controls whether the dataview is displayed or not.\n@property {String} dataview.key Key identifier of the chart/table.\n@property {String} dataview.label Label to be used as the dialog header.\n@property {Object} [dataview.dialog_css] An object with and a height and a width.\n@property {Integer} [dialog_css.width=300] The dialog css width in px.\n@property {Integer} [dialog_css.height=200] The dialog css height in px.\n@property {Integer} [dialog_css.minWidth=300] The dialog css minWidth in px.\n@property {Integer} [dialog_css.minHeight=200] The dialog css minHeight in px.\n@property {String} [dialog_css.resize='both'] The dialog css resize property.\n*/\nexport default function dataviewDialog(dataview) {\n  if (dataview.target !== 'dialog') return;\n\n  dataview.dataview_dialog = {};\n\n  const dialog_style = `\n    width: ${dataview.dialog_css?.width || '300'}px;\n    height: ${dataview.dialog_css?.height || '200'}px;\n    min-width: ${dataview.dialog_css?.minWidth || '300'}px;\n    min-height: ${dataview.dialog_css?.minHeight || '200'}px;\n    resize: ${dataview.dialog_css?.resize || 'both'};\n    overflow: hidden !important`;\n\n  Object.assign(dataview.dataview_dialog, {\n    header: mapp.utils.html.node`<h1> ${dataview.label}`,\n    data_id: `${dataview.key}-dataviews-dialog`,\n    target: document.getElementById('Map'),\n    height: 'auto',\n    left: '5%',\n    top: '0.5em',\n    class: 'box-shadow tabview',\n    css_style: dialog_style,\n    containedCentre: true,\n    contained: true,\n    headerDrag: true,\n    closeBtn: true,\n    onClose: () => {\n      if (dataview.chkbox)\n        dataview.chkbox.querySelector('input').checked = false;\n    },\n  });\n\n  mapp.ui.elements.dialog(dataview.dataview_dialog);\n\n  //Mimic the css of the tabview to get similar user experience.\n  const content_panel = dataview.dataview_dialog.node.querySelector('.content');\n\n  content_panel.classList.add('panel');\n\n  dataview.target = content_panel;\n\n  //Close the dialog at first\n  dataview.dataview_dialog.dialog.close();\n\n  dataview.show = () => {\n    //Update the datview to show the data\n    dataview.update();\n\n    //Display the toolbar if there is one\n    // The panel is not shown by default\n    dataview.toolbar &&\n      dataview.dataview_dialog.node\n        .querySelector('.btn-row')\n        .style.removeProperty('display');\n\n    //Charts need to be direct children of the dialog so they can be resized,\n    //when the dialog is resized.\n    if (dataview.chart) {\n      dataview.dataview_dialog.node.appendChild(\n        dataview.target.querySelector('canvas'),\n      );\n\n      dataview.dataview_dialog.node.removeChild(dataview.target);\n    }\n\n    dataview.dataview_dialog.dialog.show();\n  };\n\n  dataview.hide = () => {\n    dataview.dataview_dialog.dialog.close();\n  };\n\n  //Close the dialog if the location is removed.\n  dataview.location?.removeCallbacks?.push?.(() =>\n    dataview.dataview_dialog.dialog.close(),\n  );\n}\n", "/**\n## /ui/utils/histogram\n\nThe histogram utility module exports the histogram object with a create method to generate a histogram dataview.\n\n// Definition of a histogram dataview within layer\n```json\n\"dataviews\": {\n  \"Histogram\": {\n    \"dataview\": \"histogram\",\n    \"viewport\": true,\n    \"options\": {\n      \"title\": \"My Histogram Title\",\n      \"caption\": \"My histogram caption\",\n      \"height\": 200,\n      \"tooltip\": true,\n      \"ylabel\": \"this is vertical label\",\n      \"xlabel\": \"this is horizontal label\"\n    },\n    \"queryparams\": {\n      \"field\": \"population\",\n      \"table\": \"network_location\",\n      \"buckets\": 6, // optional, defaults to 7\n      \"decimals\": 1 // optional, default to 0\n    }\n  }\n}\n```\n\n@module /ui/utils/histogram\n*/\n\nconst histogram = {\n  create,\n};\n\nexport default histogram;\n\n/*\n\n*/\n\n/**\n@function create\n\n@description\nInitial creation of histogram. The function requests data based on defined query settings and creates histogram visual element.\n\n@param {Object} params Histogram configuration object.\n@property {HTMLElement} params.target Target element for the histogram node.\n@property {Boolean} params.viewport Applies filtering by map current viewport, disabled by default.\n@property {Boolean} params.mapChange Applies filtering by map current viewport on each map change end event, disabled by default. Used for layer based histograms.\n@property {String} [params.query='histogram'] Histogram query requires `table` and `field` passed in queryparams object. The default query supports other 2 parameters: `buckets` which defaults to 7 and represents count of histogram buckets aparts from 2 edge buckets therefore a default histogram has a total of 9 buckets. The other parameter is `decimals` defaulting to zero.\n@property {Object} [params.queryparams] Parameter for histogram query request.\n@property {Object} [params.options] Stores chart optional settings.\n@property {Object} [params.formatterParams] Configuration object for number formatting.\n@property {Boolean} [options.tooltip] Defaults to false. If enabled each bucket will have a tooltip with bucket properties.\n@property {Number} [options.width] Width in pixels for histogram container.\n@property {Number} [options.height] Height in pixels for histogram container.\n@property {String} [options.title] Title to display above.\n@property {String} [options.caption] Caption to display below.\n@property {String} [options.ylabel] Label for vertical axis.\n@property {String} [options.xlabel] Label for horizontal axis.\n@property {String} [options.columnGap] Gap between bars in pixels. Defaults to 10px. Use this property to alter bar thickness and spacing.\n*/\nasync function create(params) {\n  params.query ??= 'histogram';\n\n  params.options ??= {};\n\n  const columnGap = `column-gap: ${params.options.columnGap || 10}px`;\n\n  params.node = mapp.utils.html\n    .node`<div class=\"histogram\" style=${columnGap}>`;\n\n  if (params.options.width) {\n    params.node.style.width = `${params.options.width}px`;\n  }\n\n  if (params.options.height) {\n    params.node.style.height = `${params.options.height}px`;\n  }\n\n  if (params.options.title) {\n    params.target.append(\n      mapp.utils.html.node`<h3 class=\"histogram-title\">${params.options.title}`,\n    );\n  }\n\n  params.setData = setData;\n\n  params.target.append(params.node);\n\n  if (params.options.xlabel) {\n    params.xlabel = mapp.utils.html\n      .node`<div class=\"histogram-xlabel\">${params.options.xlabel}`;\n\n    if (params.options.width) {\n      params.xlabel.style.width = `${params.options.width}px`;\n    }\n\n    params.target.append(params.xlabel);\n  }\n\n  if (params.options.caption) {\n    params.caption = mapp.utils.html\n      .node`<span class=\"histogram-caption\">${params.options.caption}`;\n    params.target.append(params.caption);\n  }\n}\n\n/**\n@function setData\n\n@description\nThe dataview setData method is called by the dataview update method. The data must be provided as an array of bucket object.\n\n```json\n{\n    \"count\": 68,\n    \"bucket\": 0,\n    \"bucket_min\": \"0\",\n    \"bucket_max\": \"143\"\n},\n{\n    \"count\": 1166,\n    \"bucket\": 1,\n    \"bucket_min\": \"143\",\n    \"bucket_max\": \"286\"\n},\n{\n    \"count\": 1571,\n    \"bucket\": 2,\n    \"bucket_min\": \"286\",\n    \"bucket_max\": \"429\"\n}\n```\n@param {Array} data The histogram data.\n*/\nfunction setData(data) {\n  this.data = data;\n\n  createHistogramBuckets(this);\n}\n\n/**\n@function createHistogramBuckets\n\n@description\nThe method generates an array of bucket elements from the data buckets. The elements are rendered into the histogram node.\n@param {Object} params Histogram configuration object.\n*/\nfunction createHistogramBuckets(params) {\n  if (!Array.isArray(params.data)) {\n    mapp.utils.render(params.node, mapp.utils.html`<div>`);\n    return;\n  }\n\n  const maxBucketHeight = Math.max(...params.data.map((item) => item.count));\n\n  params.options.height ??= 100;\n\n  const bucketElements = params.data.map((bucket) => {\n    const style = `height: ${Math.round((params.options.height * bucket.count) / maxBucketHeight)}px`;\n\n    let tooltip = '';\n    if (params.options.tooltip) {\n      tooltip = mapp.utils.html`<div class=\"bucket-info\">\n        <span><b>Count</b> ${mapp.utils.formatNumericValue({ value: bucket.count, ...params })}</span><br>\n        <span><b>Min</b> ${mapp.utils.formatNumericValue({ value: bucket.bucket_min, ...params })}</span><br>\n        <span><b>Max</b> ${mapp.utils.formatNumericValue({ value: bucket.bucket_max, ...params })}</span>`;\n    }\n\n    return mapp.utils.html`<div\n      class=\"bucket\"\n      data-bucket=${bucket.bucket}\n      data-count=${bucket.count}\n      data-bucket-min=${bucket.bucket_min}\n      data-bucket-max=${bucket.bucket_max}\n      style=${style}>\n      ${tooltip}`;\n  });\n\n  const ylabel = params.options.ylabel\n    ? mapp.utils.html`<div class=\"ylabel\">${params.options.ylabel}`\n    : '';\n\n  mapp.utils.render(params.node, mapp.utils.html`${ylabel}${bucketElements}`);\n}\n", "/**\n## ui/utils/idleLogout\n\n@module /ui/utils/idleLogout\n*/\n\nconst idle = {\n  idle: 600,\n};\n\n/**\n@function idleLogout\n\n@description\nA function for logging out inactive users. Inactivity is determined by no action occuring on the view within a certain amount of time.\n\nThe host and the amount of seconds can be specified in the params:\n\n```\n  {\n    idle: 600,\n    host: example.com\n  }\n```\n\n-Idle is the duration in seconds\n-Host the calling url\n\nThe logout is achieved by deleting the session cookie.\n\n@param {Object} params configuration options for the the idle state.\n@property {Number} [params.idle] The length of time in seconds that establishes the idle state.\n@property {String} [params.host] The url host to be logged out of.\n\n*/\nexport default function idleLogout(params) {\n  Object.assign(idle, params);\n\n  if (idle.idle === 0) return;\n\n  // Define window events that reset the lock timeout.\n  window.onload = resetTimer;\n  window.onmousemove = resetTimer;\n  window.onmousedown = resetTimer;\n  window.ontouchstart = resetTimer;\n  window.onclick = resetTimer;\n  window.onkeypress = resetTimer;\n  resetTimer();\n  renewToken();\n}\n\n/**\n@function resetTimer\n\n@description\nfunction for resetting the timeout in instances where an action occurs on the view.\n*/\nfunction resetTimer() {\n  if (idle.locked) return;\n\n  idle.timeout && clearTimeout(idle.timeout);\n\n  idle.timeout = setTimeout(lock, idle.idle * 1000);\n}\n\n/**\n@function lock\n\n@description\nFunction which logs the user out of the view by deleting the cookie and reloading the location.\n*/\nfunction lock() {\n  idle.locked = true;\n\n  // Do not renew cookie when interface is locked.\n  idle.renew && clearTimeout(idle.renew);\n\n  // Destroy cookie.\n  const params = { url: `${idle.host}/api/user/cookie?destroy=true` };\n\n  // Reload location once cookie has been removed.\n  params.onLoad = (e) => location.reload();\n\n  mapp.utils.xhr(params);\n}\n\n/**\n@function renewToken\n\n@description\nFunction for getting a new token if some action has taken place on the view.\n*/\nfunction renewToken() {\n  // Renew token after idle minus 20 seconds.\n  idle.renew = setTimeout(cookie, (idle.idle - 20) * 1000);\n}\n\n/**\n@function cookie\n\n@description\nTimeout function for renewing the access token used in {@link module:/ui/utils/idleLogout~renewToken}.\n*/\nfunction cookie() {\n  const params = { url: `${idle.host}/api/user/cookie?renew=true` };\n\n  params.onLoad = (e) => {\n    // Lock interface if cookie renewal fails.\n    if (e.target.status === 401) return lock();\n\n    // Re-call method to renew token.\n    renewToken();\n  };\n\n  mapp.utils.xhr(params);\n}\n", "/**\n## ui/utils/imagePreview\n\n@module /ui/utils/imagePreview\n*/\n\n/**\n@function imagePreview\n\n@description\nThe imagePreview utility method can be assigned to an image element onclick.\n\n@param {Object} e Image element click event. \n*/\nexport default function imagePreview(e) {\n  const previewElement = mapp.utils.html.node`\n  <div class=\"interface-mask\">\n    <div\n      class=\"bg-image\" \n      style=${`background-image:url(${e.target.src})`}>\n    <button \n      class=\"btn-close notranslate material-symbols-outlined\"\n      onclick=${(e) => e.target.closest('.interface-mask').remove()}>close</button>`;\n\n  document.body.append(previewElement);\n}\n", "/**\n## /ui/utils/jsonDataview\n\nThe jsonDataview module exports as default an object with a create method for JSON dataviews.\n\n@requires /utils/textFile\n@requires /utils/copyToClipboard\n\n@module /ui/utils/jsonDataview\n*/\n\nexport default {\n  create,\n  toolbar: {\n    copyToClipboard,\n    csvupload,\n    jsonfile,\n    sqlinsert,\n  },\n};\n\n/**\n@function create\n@async\n\n@description\nThe create [json] dataview method sets default props for the creation of a jsoneditor dataview element.\n\nThe setData method is assign to set the json content of the jsoneditor element.\n\nThe setData method will be called if data is provided with the dataview object.\n\n@param {dataview} dataview Dataview object.\n@property {object} dataview.data A JSON data object to be assigned as data to the Json dataview.\n@property {object} dataview.props Custom properties for the jsoneditor element.\n*/\nasync function create(dataview) {\n  dataview.props ??= {\n    mainMenuBar: false,\n    mode: 'text',\n    readOnly: true,\n  };\n\n  dataview.jsoneditor = await mapp.ui.elements.jsoneditor(dataview);\n\n  dataview.setData = setData;\n\n  if (dataview.data) {\n    dataview.setData(dataview.data);\n  }\n}\n\n/**\n@function setData\n\n@description\nThe [json] dataview setData method calls the set method of the dataview.jsoneditor control to set the data as json content.\n\n@param {Object} data JSON data.\n*/\nfunction setData(data) {\n  this.data = data;\n\n  const content = {\n    json: data,\n  };\n\n  this.jsoneditor.set(content);\n}\n\n/**\n@function jsonfile\n@description\nThe button method creates a button element. \n\nThe button will call the textFile utility method to create a json file download.\n\n@param {dataview} dataview Dataview object.\n\n@returns {HTMLElement} Returns the button element.\n*/\nfunction jsonfile(dataview) {\n  dataview.title ??= dataview.label || 'Unknown';\n\n  const button = mapp.utils.html.node`<button onclick=${() => {\n    const textFile = {\n      filename: `${dataview.title}.json`,\n      text: JSON.stringify(dataview.data, null, 2),\n      type: 'application/json',\n    };\n\n    mapp.utils.textFile(textFile);\n  }}>Download</button>`;\n\n  return button;\n}\n\n/**\n@function copyToClipboard\n@description\nStringifies the dataview data and writes the data to the clipboard.\n\n@param {dataview} dataview Dataview object.\n\n@returns {HTMLElement} Returns the button element.\n*/\nfunction copyToClipboard(dataview) {\n  const button = mapp.utils.html.node`<button onclick=${() => {\n    const text = JSON.stringify(dataview.data, null, 2);\n\n    mapp.utils.copyToClipboard(text);\n  }}>Copy to Clipboard</button>`;\n\n  return button;\n}\n\n/**\n@function csvupload\n@description\nThe toolbar method returns an file input element which accepts csv files.\n\nThe onchange event of the input element triggers the mapp.utils.csvUpload() method.\n\n@param {dataview} dataview Dataview object.\n\n@returns {HTMLElement} Returns the button element.\n*/\nfunction csvupload(dataview) {\n  dataview.toolbar.csvupload.label ??= 'CSV Upload';\n\n  dataview.toolbar.csvupload.input = mapp.utils.html.node`<input \n      type=file class=\"flat bold wide\"\n      accept=\".csv\"\n      onchange=${async (e) => {\n        if (!e.target.files[0]) return;\n\n        dataview.toolbar.csvupload.file = e.target.files[0];\n\n        const response = await mapp.utils.csvUpload(\n          dataview.toolbar.csvupload.file,\n          dataview.toolbar.csvupload,\n        );\n\n        // Check if any of the uploaded results are errors.\n        // This is required as response can be an array of results or a single result.\n        // A single result may be returned as an error if missing queryparams.\n        // A response of an array of results is returned if the csv upload is chunked into multiple requests.\n        let errors;\n        if (Array.isArray(response))\n          errors = response.filter((result) => result instanceof Error);\n        else if (response instanceof Error) errors = [response];\n\n        // If there are errors, show an alert with all the error messages.\n        if (errors?.length) {\n          mapp.ui.elements.alert({\n            title: 'CSV Upload',\n            text: `Upload of CSV records has failed:\\n\\n${errors.map((err) => err.message).join('\\n')}`,\n          });\n          return;\n        }\n\n        dataview.setData(response);\n      }}>`;\n\n  return dataview.toolbar.csvupload.input;\n}\n\n/**\n@function sqlinsert\n@description\nThe sqlinsert toolbar function makes the JSONEditor writable. The text content will be passed as POST body to the query defined in the sqlinsert configuration.\n\n```json\n\"toolbar\": {\n  \"sqlinsert\": {\n    \"layer_template\": \"scratch\",\n    \"template\": \"sql_table_insert\",\n    \"table\": \"sql_insert\"\n  }\n}\n```\n\nThe default sql_table_insert query module can be used to securely load a JSON body into a SQL table.\n\n@param {dataview} dataview Dataview object.\n\n@returns {HTMLElement} Returns the button element.\n*/\nfunction sqlinsert(dataview) {\n  dataview.props = {\n    mainMenuBar: false,\n    mode: 'text',\n  };\n\n  const button = mapp.utils.html.node`<button onclick=${() => {\n    const content = dataview.jsoneditor.get();\n\n    // The jsoneditor is empty.\n    if (content.text === '') return;\n\n    const paramString = mapp.utils.paramString(dataview.toolbar.sqlinsert);\n\n    const url = `${mapp.host}/api/query?${paramString}`;\n\n    return mapp.utils.xhr({\n      body: content.text,\n      method: 'POST',\n      url,\n    });\n  }}>SQL Insert</button>`;\n\n  return button;\n}\n", "/**\n## /ui/utils/layerJSE\nThe module exports a default method to create a JSONEditor for JSON layer operations.\n\n@requires /ui/elements/jsoneditor\n\n@module /ui/utils/layerJSE\n*/\n\n/**\n@function layerJSE\n@description\nThe method calls upon the jsoneditor element method to create a JSE instance with a custom render menu.\n\n@param {HTMLElement} target The render target for the JSE element.\n@param {object} content The JSE content\n@param {object} btn A button to add to the menu in the renderMenu method.\n*/\nexport default async function layerJSE(target, content, btn) {\n  // Use the content as target for the jsoneditor control.\n  const jsoneditor = await mapp.ui.elements.jsoneditor({\n    props: {\n      onRenderMenu: (items) => renderMenu(items, btn),\n      content,\n      mode: 'text',\n    },\n    target,\n  });\n\n  return jsoneditor;\n}\n\n/**\n@function renderMenu\n@description\nThe renderMenu method filters out most default menu elements and pushes a btn into the menu.\n*/\nfunction renderMenu(items, btn) {\n  items.push(btn);\n\n  return items\n    .filter((item) => item.text !== 'text')\n    .filter((item) => item.text !== 'tree')\n    .filter((item) => item.text !== 'table')\n    .filter((item) => item.type !== 'separator')\n    .filter((item) => item.className !== 'jse-undo')\n    .filter((item) => item.className !== 'jse-redo')\n    .filter((item) => item.className !== 'jse-search')\n    .filter((item) => item.className !== 'jse-contextmenu')\n    .filter((item) => item.className !== 'jse-sort')\n    .filter((item) => item.className !== 'jse-transform');\n}\n", "/**\nExports the default locationCount utility method as mapp.ui.utils.locationCount().\n\n@module ui/utils/locationCount\n*/\n\n/**\n@function locationCount\n\n@description\nReturns a number representing the amount of locations that pass the filter.\n\n@param {layer} layer\n@property {String} layer.key The layers' identifier.\n@property {Object} layer.filter The filter currently active on the layer.\n@property {Object} layer.mapview The mapview associated to the layer.\n@property {Object} [layer.queryparams] The query parameters that are being used on the layer.\n\n@returns {Integer} The number of locations that pass the filter.\n*/\nexport default async function locationCount(layer) {\n  //Whether or not to use the viewport in the query\n  const options = {\n    layer: layer,\n    queryparams: {},\n  };\n\n  options.viewport = layer.filter?.viewport || layer.queryparams?.viewport;\n\n  const params = mapp.utils.queryParams(options);\n\n  const paramString = mapp.utils.paramString({\n    ...params,\n    filter: layer.filter?.current,\n    layer: layer.key,\n    table: layer.tableCurrent(),\n    qID: layer.qID,\n    template: 'location_count',\n  });\n\n  const feature_count = await mapp.utils.xhr(\n    `${layer.mapview.host}/api/query?${paramString}`,\n  );\n\n  return feature_count;\n}\n", "/**\n## ui/utils/resizeHandler\n\nThe resizeHandler module exports the resizeHandler function .\n\nThe resizeHandler orchestrates how the view reqcts when a resize element is used.\n\n@module /ui/utils/resizeHandler\n*/\n\n//This will be used on doubleClickClose to set the view back to a default size.\nconst defaultGrids = {};\n\n//Setup default minimum sizes\n//And name the different css properties required to resize on a given axis.\n//Resizing a height requires gridTemplateRows, whereas width requires gridTemplateColumns.\nconst page = {\n  X: {\n    min: 75,\n    lockSize: 200,\n    grid: 'gridTemplateColumns',\n  },\n  Y: {\n    min: 0,\n    lockSize: 50,\n    grid: 'gridTemplateRows',\n  },\n  gridTemplate: {\n    X: 'auto',\n    Z: '10px',\n    Y: 'auto',\n  },\n};\n\n/**\n@function resizeEventHandler\n\n@description\nThe resizeHandler adds event listeners for mouseup/down and mousemouce events to perform the resizing of affected panels.\n\n@param {Object} params Configuration options for the resizeHandler.\n@property {function} params.resizeEvent The function that dictates what happens during resizing.\n@property {HTMLElement} params.target the resize element.\n@property {string} [params.axis=X] The axis along which the resizing is to occur.\n@property {boolean} [params.doubleClickClose] Whether double clicking the handler collapses the panel.\n*/\nexport default function resizeHandler(params) {\n  //Bind the params to the functions so they can be referenced within.\n  params.resizeEvent ??= resizeEventHandler.bind(params);\n  params.stopResize = stopResize.bind(params);\n  params.axis ??= 'X';\n\n  if (params.doubleClickClose)\n    params.target.ondblclick = (e) => collapseTarget(e, params);\n\n  params.target.addEventListener('mousedown', (e) => {\n    e.preventDefault();\n    document.body.style.cursor = 'grabbing';\n    globalThis.addEventListener('mousemove', params.resizeEvent);\n    globalThis.addEventListener('mouseup', params.stopResize);\n  });\n\n  params.target.addEventListener(\n    'touchstart',\n    (e) => {\n      e.preventDefault();\n      globalThis.addEventListener('touchmove', params.resizeEvent);\n      globalThis.addEventListener('touchend', params.stopResize);\n    },\n    {\n      passive: true,\n    },\n  );\n\n  //determine starting sizes of the view.\n  //These are used to revert to a default on double click close.\n  defaultGrids.gridTemplateColumns = getComputedStyle(\n    document.body,\n  ).gridTemplateColumns;\n\n  defaultGrids.gridTemplateRows = getComputedStyle(\n    document.body,\n  ).gridTemplateRows;\n}\n\n/**\n@function resizeEventHandler\n\n@description\nResizes elements attached to the resize handler by adjusting the grid template attributes of the document body.\n\n@param {event} e The resize event.\n*/\nfunction resizeEventHandler(e) {\n  const axis = this.axis;\n\n  //Determine the height and with of the attached elements.\n  page.X.size = e.touches?.[0]?.pageX || e.pageX;\n  page.Y.size = globalThis.innerHeight - (e.touches?.[0]?.pageY || e.pageY);\n\n  const pageAxis = page[axis];\n\n  //If the size of the container is below a defined minimum, hide the container\n  //By setting the relevant grid template variable to 0px.\n  if (pageAxis.size < pageAxis.min) {\n    page.gridTemplate[axis] = '0px';\n    document.body.style[pageAxis.grid] = Object.values(page.gridTemplate).join(\n      ' ',\n    );\n    return;\n  }\n\n  //If the size is below the locksize return.\n  //This is the minimum height or width of the element.\n  if (pageAxis.size < pageAxis.lockSize) {\n    return;\n  }\n\n  // Half width snap.\n  if (axis === 'X') {\n    if (page.X.size > globalThis.innerWidth / 2)\n      page.X.size = globalThis.innerWidth / 2;\n  }\n\n  // Keep the height within 10 of the window height.\n  if (axis === 'Y') {\n    if (page.Y.size > globalThis.innerHeight - 10)\n      page.Y.size = globalThis.innerHeight;\n\n    OL.style.marginTop = `-${page.Y.size / 2}px`;\n  }\n\n  page.gridTemplate[axis] = `${pageAxis.size}px`;\n\n  //Set the gridTemplateColumns/Rows to the new size.\n  document.body.style[pageAxis.grid] = Object.values(page.gridTemplate).join(\n    ' ',\n  );\n\n  //Reset the grid template variables.\n  page.gridTemplate = {\n    X: 'auto',\n    Z: '10px',\n    Y: 'auto',\n  };\n}\n\n/**\n@function collapseTarget\n\n@description\nReduces the size of the target to 0 if it is expanded or sets the target to a calculated default if it is collapsed.\n\n@param {event} e The resize event.\n@param {Object} params Configuration for the resizeHandler.\n@property {string} params.axis The axis along which the element should be adjusted.\n*/\nfunction collapseTarget(e, params) {\n  //Determine the height and width of the container\n  page.X.size = e.touches?.[0]?.pageX || e.pageX;\n  page.Y.size = globalThis.innerHeight - (e.touches?.[0]?.pageY || e.pageY);\n\n  //If the height is below the minimum, restore it to the default.\n  if (page[params.axis].size < page[params.axis].min) {\n    document.body.style[page[params.axis].grid] =\n      defaultGrids[page[params.axis].grid];\n\n    return;\n  }\n\n  //Hide the element by setting the relevant param to 0px.\n  page.gridTemplate[params.axis] = '0px';\n\n  document.body.style[page[params.axis].grid] = Object.values(\n    page.gridTemplate,\n  ).join(' ');\n\n  //Restote gridTemplate defaults\n  page.gridTemplate = {\n    X: 'auto',\n    Z: '10px',\n    Y: 'auto',\n  };\n}\n\n/** Remove resize events.\n@function stopResize\nRemoves resizing Events and restores the cursor\n*/\nfunction stopResize() {\n  //Restore the cursor and remove event listeners.\n  document.body.style.cursor = 'auto';\n  globalThis.removeEventListener('mousemove', this.resizeEvent);\n  globalThis.removeEventListener('touchmove', this.resizeEvent);\n  globalThis.removeEventListener('mouseup', this.stopResize);\n  globalThis.removeEventListener('touchend', this.stopResize);\n}\n", "/**\n## ui/utils\n\nThe MAPP UI utils exports legacy methods to warn that plugins are required for the use of third party dataview libraries eg. Tabulator and Chart[js].\n\nThe idleLogout, imagePreview, resizeHandler utility methods are imported and added to the ui.utils{} object.\n\n@requires /ui/utils/cssColourTheme\n@requires /ui/utils/dataview\n@requires /ui/utils/dataviewDialog\n@requires /ui/utils/histogram\n@requires /ui/utils/idleLogout\n@requires /ui/utils/imagePreview\n@requires /ui/utils/jsonDataview\n@requires /ui/utils/layerJSE\n@requires /ui/utils/locationCount\n@requires /ui/utils/resizeHandler\n\n@module /ui/utils\n*/\n\nimport * as cssColour from './cssColourTheme.mjs';\nimport dataview from './dataview.mjs';\nimport dataviewDialog from './dataviewDialog.mjs';\nimport histogram from './histogram.mjs';\nimport idleLogout from './idleLogout.mjs';\nimport imagePreview from './imagePreview.mjs';\nimport jsonDataview from './jsonDataview.mjs';\nimport layerJSE from './layerJSE.mjs';\nimport locationCount from './locationCount.mjs';\nimport resizeHandler from './resizeHandler.mjs';\n\nexport default {\n  cssColour,\n  dataview,\n  dataviewDialog,\n  histogram,\n  idleLogout,\n  imagePreview,\n  Json: jsonDataview,\n  layerJSE,\n  locationCount,\n  resizeHandler,\n};\n", "/**\n## MAPP/UI\n\nThe primary module for the MAPP/UI API will import other MAPP/UI modules and assign itself to the `window.ui{}` object.\n\nThe `ui{}` object will be assigned to the global `mapp{}` object if loaded prior to the execution of the ui module script.\n\nThe `ui.mjs` module is used as entry point for the esbuild process to bundle the MAPP/UI API.\n\n@requires /ui/elements\n@requires /ui/locations\n@requires /ui/layers\n@requires /ui/utils\n\n@module ui\n*/\n\nimport Dataview from './ui/Dataview.mjs';\nimport elements from './ui/elements/_elements.mjs';\nimport Gazetteer from './ui/Gazetteer.mjs';\nimport layers from './ui/layers/_layers.mjs';\nimport locations from './ui/locations/_locations.mjs';\nimport Tabview from './ui/Tabview.mjs';\nimport utils from './ui/utils/_utils.mjs';\n\nconst ui = {\n  Dataview,\n  elements,\n  Gazetteer,\n  layers,\n  locations,\n  Tabview,\n  utils,\n};\n\nglobalThis.ui = ui;\nglobalThis.mapp ??= {};\n\nmapp.ui = ui;\n"],
  "mappings": "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",
  "names": ["Dataview", "_this", "checkDataview", "checked", "updateDataview", "show", "hide", "params", "paramString", "response", "alert", "params", "e", "btnPanel_default", "params", "e", "card", "params", "e", "chkbox", "params", "e", "confirm", "params", "resolve", "reject", "btn_true", "e", "btn_false", "contextMenu_default", "draw", "modify", "menu", "control", "params", "addControl", "onClick", "e", "el", "dialog", "show", "e", "closeDialog", "handleStartEvent", "adjustDialogPosition", "eventsMap", "moveEvent", "endEvent", "shiftEvent", "stopShift", "mapWidth", "mapHeight", "dialogWidth", "dialogHeight", "maxLeft", "maxTop", "leftShift", "topShift", "shiftContained", "shiftContainedCentre", "drawer", "params", "onClick", "beforeElement", "popoutDialog", "el", "e", "drawing_default", "circle", "circle_2pt", "drawOnclick", "line", "locator", "point", "polygon", "rectangle", "layer", "interaction", "updateCallback", "confirmUpdate", "btn", "feature", "helpDialog", "e", "v", "option", "config", "coordinates", "entry", "setUnits", "content", "pos", "location", "coords", "dropdown", "params", "entry", "pillsElement", "searchInput", "selectOnChange", "optionElements", "selectedTitles", "placeholderText", "selectReset", "e", "selectedIndex", "placeholderTitles", "option", "val", "pills", "index", "listId", "placeholder", "onSearchInput", "datalist", "help_dialog", "helpDialog", "params", "createJSONEditor", "params", "mod", "methods", "hover", "hovers", "icon_scaling", "label", "labels", "opacitySlider", "panel", "theme", "themes", "layerStyle_default", "layer", "content", "key", "element", "checked", "entries", "e", "entry", "display", "zoomLabel", "z", "callback", "stylePanel", "placeholder", "options", "val", "xmlSerializer", "legendIcon", "style", "legendIcons", "createIconFromArray", "createIconFromInlineStyle", "createPolygonSymbol", "createLineSymbol", "canvas", "toLoad", "onImgLoad", "vectorContext", "icon", "legendScale", "imageStyle", "img", "iconUrl", "inlineStyle", "path", "backgroundImage", "loginForm", "params", "classList", "userInput", "check", "disabledSpan", "passwordInput", "loginBtn", "numericInput", "params", "numericChecks", "value", "style", "e", "oninput", "pills", "component", "add", "remove", "pill", "val", "e", "child", "radio", "params", "header", "e", "registerForm", "params", "classList", "userInput", "check", "passwordInput", "passwordRetypeInput", "invalidInfo", "agreement_checkbox", "registerBtn", "searchbox", "component", "e", "slider", "params", "numericInput", "e", "onRangeInput", "val", "slider_ab", "params", "minInputParams", "numericChecks", "minNumericInput", "maxInputParams", "maxNumericInput", "value", "minmaxClasslist", "minLabel", "maxLabel", "element", "e", "onRangeInput", "val", "themeLegendSwitch", "allSwitches", "disabledSwitches", "switch_", "toast", "params", "resolve", "closeBtn", "hide_toast", "actions", "action", "e", "logo", "container", "tooltip", "params", "userLocale", "params", "mapview", "saveLocale", "listLocales", "removeLocale", "locale_name", "locales", "list", "locale", "removeBtn", "e", "href", "elements_default", "alert", "btnPanel_default", "card", "chkbox", "confirm", "contextMenu_default", "control", "dialog", "drawer", "drawing_default", "dropdown", "helpDialog", "createJSONEditor", "layerStyle_default", "legendIcon", "loginForm", "numericInput", "pills", "radio", "registerForm", "searchbox", "slider", "slider_ab", "themeLegendSwitch", "toast", "tooltip", "userLocale", "Gazetteer_default", "gazetteer", "search", "e", "ll", "n", "lat", "lng", "filterMethods", "applyFilter", "filter_boolean", "filter_date", "filter_in", "filter_numeric", "filter_text", "filter_null", "removeFilter", "resetFilter", "generateMinMax", "filters_default", "timeout", "layer", "filter", "deleteFilter", "newCard", "e", "booleanFilter", "checked", "nullFilter", "queryParams", "paramString", "response", "min", "max", "entry", "affix", "val", "histogram", "changeEnd", "filter_current", "record", "chkSet", "dropdown", "options", "searchbox_filter", "pillComponent", "pills", "searchbox", "pattern", "filtered", "i", "chkBoxes", "idx", "inputAfter", "onClose", "inputBefore", "basicTheme", "layer", "theme", "legendIcon", "createLegend", "cat", "theme", "layer", "params", "catLegendIcon", "icon", "classList", "cat_label", "label", "e", "catToggle", "filterRemove", "filter", "f", "filterAdd", "distributedLegend", "displayStyle", "clusterLegend", "themeParser", "categorizedTheme", "layer", "themeParser", "theme", "cat", "createLegend", "clusterLegend", "distributedLegend", "distributedTheme", "layer", "themeParser", "theme", "cat", "createLegend", "clusterLegend", "distributedLegend", "graduatedTheme", "layer", "theme", "switchAll", "catElements", "cat", "catClass", "catIcon", "labelClassList", "e", "catToggle", "classList", "style", "legends_default", "basicTheme", "categorizedTheme", "distributedTheme", "graduatedTheme", "listview", "params", "add", "createGroup", "layer", "group", "e", "chkVisibleLayer", "addLayerToGroup", "metaNode", "dataviews", "layer", "content", "key", "dataview", "populateTabview", "drawPanel", "layer", "elements", "key", "node", "content", "filterPanel", "layer", "multi_filter", "listFilter", "e", "options", "filter", "updatePanel", "filterDialog", "filterByType", "list", "entry", "slider", "feature_count", "value", "openDialog", "gazetteer_default", "layer", "gazetteer", "jsonEditor", "layer", "button", "jsonLayer", "content", "updateBtn", "updateLayer", "jse", "layerJSON", "meta", "layer", "reports", "layer", "reportLinks", "key", "report", "href", "stylePanel", "layer", "content", "header", "panels_default", "dataviews", "drawPanel", "filterPanel", "gazetteer_default", "jsonEditor", "meta", "reports", "stylePanel", "layerView", "layer", "viewConfig", "header", "changeEnd", "key", "panel", "a", "b", "chk", "method", "el", "nestedElements", "drawer", "viewHeader_default", "zoomToFilteredExtentBtn", "zoomBtn", "popoutBtn", "displayToggle", "layer", "btnStyle", "e", "zoomToFilteredExtentBtn_changeEnd", "zoomToRange", "zoomBtn_changeEnd", "minZoom", "entry", "maxZoom", "view", "btnClass", "layers_default", "filters_default", "legends_default", "listview", "panels_default", "layerView", "viewHeader_default", "boolean", "entry", "checked", "iconName", "types", "documents", "image", "images", "cloudinary_default", "entry", "trashBtn", "e", "trash", "upload", "drap_and_drop_zone", "docs", "doc", "title", "drag_and_drop_zone", "reader", "file", "onload", "docLoad", "newImage", "img", "imgOnload", "canvas", "public_id", "signedUrl", "getSignedUrl", "data", "response", "errorMessage", "responseJson", "updateLocation", "date", "stamp", "file_type", "errorDetail", "confirm_message", "valueSet", "params", "paramString", "dataview", "entry", "assignTargetFromString", "location_class", "date_default", "date", "entry", "timestamp", "value", "e", "val", "geometry", "entry", "show", "hide", "getExtent", "modify", "checked", "draw", "edit", "icon", "chkbox", "deleteGeometry", "deleteUpdate", "renderLocationView", "helpDialog", "Feature", "feature", "updateCallback", "key", "el", "json", "entry", "node", "renderMenu", "items", "item", "onChange", "content", "previousContent", "changeStatus", "key", "entry", "classList", "e", "layer", "entry", "checkData", "assignLocaleLayer", "decorateLayer", "filtered", "key", "obj", "showLayer", "hideLayer", "checked", "queryParams", "paramString", "featureData", "fn", "featureID", "link_entry", "entry", "href", "icon_class", "link_class", "numeric", "entry", "edit", "value", "pills_default", "entry", "pin", "entry", "show", "hide", "getExtent", "checked", "ping", "entry", "response", "_query_button", "entry", "query", "paramString", "response", "tab_default", "entry", "tabview", "checked", "text", "entry", "textedit", "textoptions", "response", "row", "onInput", "e", "radio", "optionEntries", "option", "placeholder", "_entry", "stations", "params", "checked_radio", "item", "current_radio", "textarea", "entry", "val", "e", "node", "time", "entry", "val", "stringVal", "e", "title", "entry", "defaults", "legacy_layer", "entry", "layer", "entries_default", "boolean", "dataview", "date_default", "cloudinary_default", "geometry", "textarea", "numeric", "json", "key", "link_entry", "pills_default", "pin", "ping", "_query_button", "tab_default", "text", "time", "title", "groups", "infoj", "location", "infoj_order", "listview", "infoj_orderMap", "entry", "_entry", "infoj_order_field", "keyIdx", "entryJSONB", "entryObject", "entrySkip", "entryNullValue", "entryDefault", "entryGroup", "entryNode", "entryTitle", "entryQuery", "el", "entryTooltipIcon", "field", "fieldEntry", "classString", "queryCallback", "queryParams", "paramString", "response", "label_element", "records", "listview", "params", "locale", "e", "location", "target", "hook", "record", "gazCheck", "setRecord", "key", "el", "gazInput", "view", "location", "header", "entry", "toggleLocationViewEdits", "location_remove", "valChange", "renderLocationView", "dv", "classList", "onClickEditToggle", "e", "locations_default", "entries_default", "infoj", "listview", "view", "Tabview", "tabview", "addTab", "e", "entry", "activateTab", "showTab", "showCloseBtn", "closeBtn", "removeTab", "panelClass", "tab", "sibling", "entry_parent", "cssColourTheme_exports", "__export", "setTheme", "themes", "currentTheme", "colourTheme", "root", "key", "value", "dataview", "mapChange", "Toolbar", "update", "viewport", "dataview_default", "_this", "target", "toolbarElements", "key", "item", "updateDialog", "content", "jsonContent", "jsoneditor", "renderUpdateMenu", "e", "items", "updateDataview", "setDataview", "json", "classList", "toggle", "dataviewDialog", "dataview", "dialog_style", "content_panel", "histogram", "create", "histogram_default", "params", "columnGap", "setData", "data", "createHistogramBuckets", "maxBucketHeight", "item", "bucketElements", "bucket", "style", "tooltip", "ylabel", "idle", "idleLogout", "params", "resetTimer", "renewToken", "lock", "e", "cookie", "imagePreview", "previewElement", "e", "jsonDataview_default", "create", "copyToClipboard", "csvupload", "jsonfile", "sqlinsert", "dataview", "setData", "data", "content", "textFile", "text", "e", "response", "errors", "result", "err", "paramString", "url", "layerJSE", "target", "content", "btn", "items", "renderMenu", "item", "locationCount", "layer", "options", "params", "paramString", "defaultGrids", "page", "resizeHandler", "params", "resizeEventHandler", "stopResize", "e", "collapseTarget", "axis", "pageAxis", "utils_default", "cssColourTheme_exports", "dataview_default", "dataviewDialog", "histogram_default", "idleLogout", "imagePreview", "jsonDataview_default", "layerJSE", "locationCount", "resizeHandler", "ui", "Dataview", "elements_default", "Gazetteer_default", "layers_default", "locations_default", "Tabview", "utils_default"]
}

{
  "version": 3,
  "sources": ["../../../node_modules/@webreflection/mapset/esm/index.js", "../../../node_modules/@webreflection/uparser/esm/index.js", "../../../node_modules/@webreflection/uwire/esm/index.js", "../../../node_modules/uarray/esm/index.js", "../../../node_modules/uhandlers/esm/index.js", "../../../node_modules/udomdiff/esm/index.js", "../../../node_modules/uhtml/esm/utils.js", "../../../node_modules/uhtml/esm/handlers.js", "../../../node_modules/uhtml/esm/rabbit.js", "../../../node_modules/uhtml/esm/index.js", "../../../lib/utils/clone.mjs", "../../../lib/utils/csvDownload.mjs", "../../../lib/utils/convert.mjs", "../../../lib/utils/copyToClipboard.mjs", "../../../lib/utils/dataURLtoBlob.mjs", "../../../lib/utils/hexa.mjs", "../../../lib/utils/featureFormats.mjs", "../../../lib/utils/loadPlugins.mjs", "../../../lib/utils/getCurrentPosition.mjs", "../../../lib/utils/merge.mjs", "../../../lib/utils/paramString.mjs", "../../../lib/utils/promiseAll.mjs", "../../../lib/utils/queryParams.mjs", "../../../lib/utils/style.mjs", "../../../lib/utils/svgSymbols.mjs", "../../../lib/utils/gazetteer.mjs", "../../../lib/utils/verticeGeoms.mjs", "../../../lib/utils/xhr.mjs", "../../../lib/utils/_utils.mjs", "../../../lib/hooks.mjs", "../../../lib/dictionaries/en.mjs", "../../../lib/dictionaries/de.mjs", "../../../lib/dictionaries/fr.mjs", "../../../lib/dictionaries/pl.mjs", "../../../lib/dictionaries/ja.mjs", "../../../lib/dictionaries/ko.mjs", "../../../lib/dictionaries/cn.mjs", "../../../lib/dictionaries/_dictionaries.mjs", "../../../lib/layer/decorate.mjs", "../../../lib/layer/format/mbtiles.mjs", "../../../lib/layer/format/maplibre.mjs", "../../../lib/layer/format/tiles.mjs", "../../../lib/layer/format/mvt.mjs", "../../../lib/layer/format/vector.mjs", "../../../lib/layer/format/_format.mjs", "../../../lib/layer/fade.mjs", "../../../lib/layer/featureHover.mjs", "../../../lib/layer/featureFilter.mjs", "../../../lib/layer/Style.mjs", "../../../lib/layer/themes/categorized.mjs", "../../../lib/layer/themes/distributed.mjs", "../../../lib/layer/themes/graduated.mjs", "../../../lib/layer/_layer.mjs", "../../../lib/location/decorate.mjs", "../../../lib/location/get.mjs", "../../../lib/location/nnearest.mjs", "../../../lib/location/_location.mjs", "../../../lib/mapview/addLayer.mjs", "../../../lib/mapview/fitView.mjs", "../../../lib/mapview/getBounds.mjs", "../../../lib/mapview/geoJSON.mjs", "../../../lib/mapview/infotip.mjs", "../../../lib/mapview/locate.mjs", "../../../lib/mapview/popup.mjs", "../../../lib/mapview/allFeatures.mjs", "../../../lib/mapview/interactions/highlight.mjs", "../../../lib/mapview/interactions/draw.mjs", "../../../lib/mapview/interactions/modify.mjs", "../../../lib/mapview/interactions/zoom.mjs", "../../../lib/mapview/interactions/snap.mjs", "../../../lib/mapview/_mapview.mjs", "../../../lib/plugins.mjs", "../../../lib/mapp.mjs"],
  "sourcesContent": ["export class MapSet extends Map {\n  set(key, value) {\n    super.set(key, value);\n    return value;\n  }\n}\n\nexport class WeakMapSet extends WeakMap {\n  set(key, value) {\n    super.set(key, value);\n    return value;\n  }\n}\n", "/*! (c) Andrea Giammarchi - ISC */\nconst empty = /^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;\nconst elements = /<([a-z]+[a-z0-9:._-]*)([^>]*?)(\\/?)>/g;\nconst attributes = /([^\\s\\\\>\"'=]+)\\s*=\\s*(['\"]?)\\x01/g;\nconst holes = /[\\x01\\x02]/g;\n\n// \\x01 Node.ELEMENT_NODE\n// \\x02 Node.ATTRIBUTE_NODE\n\n/**\n * Given a template, find holes as both nodes and attributes and\n * return a string with holes as either comment nodes or named attributes.\n * @param {string[]} template a template literal tag array\n * @param {string} prefix prefix to use per each comment/attribute\n * @param {boolean} svg enforces self-closing tags\n * @returns {string} X/HTML with prefixed comments or attributes\n */\nexport default (template, prefix, svg) => {\n  let i = 0;\n  return template\n          .join('\\x01')\n          .trim()\n          .replace(\n            elements,\n            (_, name, attrs, selfClosing) => {\n              let ml = name + attrs.replace(attributes, '\\x02=$2$1').trimEnd();\n              if (selfClosing.length)\n                ml += (svg || empty.test(name)) ? ' /' : ('></' + name);\n              return '<' + ml + '>';\n            }\n          )\n          .replace(\n            holes,\n            hole => hole === '\\x01' ?\n              ('<!--' + prefix + i++ + '-->') :\n              (prefix + i++)\n          );\n};\n", "const ELEMENT_NODE = 1;\nconst nodeType = 111;\n\nconst remove = ({firstChild, lastChild}) => {\n  const range = document.createRange();\n  range.setStartAfter(firstChild);\n  range.setEndAfter(lastChild);\n  range.deleteContents();\n  return firstChild;\n};\n\nexport const diffable = (node, operation) => node.nodeType === nodeType ?\n  ((1 / operation) < 0 ?\n    (operation ? remove(node) : node.lastChild) :\n    (operation ? node.valueOf() : node.firstChild)) :\n  node\n;\n\nexport const persistent = fragment => {\n  const {firstChild, lastChild} = fragment;\n  if (firstChild === lastChild)\n    return lastChild || fragment;\n  const {childNodes} = fragment;\n  const nodes = [...childNodes];\n  return {\n    ELEMENT_NODE,\n    nodeType,\n    firstChild,\n    lastChild,\n    valueOf() {\n      if (childNodes.length !== nodes.length)\n        fragment.append(...nodes);\n      return fragment;\n    }\n  };\n};\n", "const {isArray} = Array;\nconst {indexOf, slice} = [];\n\nexport {isArray, indexOf, slice};\n", "import {isArray} from 'uarray';\n\n// flag for foreign checks (slower path, fast by default)\nlet useForeign = false;\n\nexport class Foreign {\n  constructor(handler, value) {\n    useForeign = true;\n    this._ = (...args) => handler(...args, value);\n  }\n}\n\nexport const foreign = (handler, value) => new Foreign(handler, value);\n\nexport const aria = node => values => {\n  for (const key in values) {\n    const name = key === 'role' ? key : `aria-${key}`;\n    const value = values[key];\n    if (value == null)\n      node.removeAttribute(name);\n    else\n      node.setAttribute(name, value);\n  }\n};\n\nconst getValue = value => value == null ? value : value.valueOf();\n\nexport const attribute = (node, name) => {\n  let oldValue, orphan = true;\n  const attributeNode = document.createAttributeNS(null, name);\n  return newValue => {\n    const value = useForeign && (newValue instanceof Foreign) ?\n                  newValue._(node, name) : getValue(newValue);\n    if (oldValue !== value) {\n      if ((oldValue = value) == null) {\n        if (!orphan) {\n          node.removeAttributeNode(attributeNode);\n          orphan = true;\n        }\n      }\n      else {\n        attributeNode.value = value;\n        if (orphan) {\n          node.setAttributeNodeNS(attributeNode);\n          orphan = false;\n        }\n      }\n    }\n  };\n};\n\nexport const boolean = (node, key, oldValue) => newValue => {\n  const value = !!getValue(newValue);\n  if (oldValue !== value) {\n    // when IE won't be around anymore ...\n    // node.toggleAttribute(key, oldValue = !!value);\n    if ((oldValue = value))\n      node.setAttribute(key, '');\n    else\n      node.removeAttribute(key);\n  }\n};\n\nexport const data = ({dataset}) => values => {\n  for (const key in values) {\n    const value = values[key];\n    if (value == null)\n      delete dataset[key];\n    else\n      dataset[key] = value;\n  }\n};\n\nexport const event = (node, name) => {\n  let oldValue, lower, type = name.slice(2);\n  if (!(name in node) && (lower = name.toLowerCase()) in node)\n    type = lower.slice(2);\n  return newValue => {\n    const info = isArray(newValue) ? newValue : [newValue, false];\n    if (oldValue !== info[0]) {\n      if (oldValue)\n        node.removeEventListener(type, oldValue, info[1]);\n      if (oldValue = info[0])\n        node.addEventListener(type, oldValue, info[1]);\n    }\n  };\n};\n\nexport const ref = node => {\n  let oldValue;\n  return value => {\n    if (oldValue !== value) {\n      oldValue = value;\n      if (typeof value === 'function')\n        value(node);\n      else\n        value.current = node;\n    }\n  };\n};\n\nexport const setter = (node, key) => key === 'dataset' ?\n  data(node) :\n  value => {\n    node[key] = value;\n  };\n\nexport const text = node => {\n  let oldValue;\n  return newValue => {\n    const value = getValue(newValue);\n    if (oldValue != value) {\n      oldValue = value;\n      node.textContent = value == null ? '' : value;\n    }\n  };\n};\n", "/**\n * ISC License\n *\n * Copyright (c) 2020, Andrea Giammarchi, @WebReflection\n *\n * Permission to use, copy, modify, and/or distribute this software for any\n * purpose with or without fee is hereby granted, provided that the above\n * copyright notice and this permission notice appear in all copies.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n * REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n * AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n * INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\n * LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE\n * OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\n * PERFORMANCE OF THIS SOFTWARE.\n */\n\n/**\n * @param {Node} parentNode The container where children live\n * @param {Node[]} a The list of current/live children\n * @param {Node[]} b The list of future children\n * @param {(entry: Node, action: number) => Node} get\n * The callback invoked per each entry related DOM operation.\n * @param {Node} [before] The optional node used as anchor to insert before.\n * @returns {Node[]} The same list of future children.\n */\nexport default (parentNode, a, b, get, before) => {\n  const bLength = b.length;\n  let aEnd = a.length;\n  let bEnd = bLength;\n  let aStart = 0;\n  let bStart = 0;\n  let map = null;\n  while (aStart < aEnd || bStart < bEnd) {\n    // append head, tail, or nodes in between: fast path\n    if (aEnd === aStart) {\n      // we could be in a situation where the rest of nodes that\n      // need to be added are not at the end, and in such case\n      // the node to `insertBefore`, if the index is more than 0\n      // must be retrieved, otherwise it's gonna be the first item.\n      const node = bEnd < bLength ?\n        (bStart ?\n          (get(b[bStart - 1], -0).nextSibling) :\n          get(b[bEnd - bStart], 0)) :\n        before;\n      while (bStart < bEnd)\n        parentNode.insertBefore(get(b[bStart++], 1), node);\n    }\n    // remove head or tail: fast path\n    else if (bEnd === bStart) {\n      while (aStart < aEnd) {\n        // remove the node only if it's unknown or not live\n        if (!map || !map.has(a[aStart]))\n          parentNode.removeChild(get(a[aStart], -1));\n        aStart++;\n      }\n    }\n    // same node: fast path\n    else if (a[aStart] === b[bStart]) {\n      aStart++;\n      bStart++;\n    }\n    // same tail: fast path\n    else if (a[aEnd - 1] === b[bEnd - 1]) {\n      aEnd--;\n      bEnd--;\n    }\n    // The once here single last swap \"fast path\" has been removed in v1.1.0\n    // https://github.com/WebReflection/udomdiff/blob/single-final-swap/esm/index.js#L69-L85\n    // reverse swap: also fast path\n    else if (\n      a[aStart] === b[bEnd - 1] &&\n      b[bStart] === a[aEnd - 1]\n    ) {\n      // this is a \"shrink\" operation that could happen in these cases:\n      // [1, 2, 3, 4, 5]\n      // [1, 4, 3, 2, 5]\n      // or asymmetric too\n      // [1, 2, 3, 4, 5]\n      // [1, 2, 3, 5, 6, 4]\n      const node = get(a[--aEnd], -1).nextSibling;\n      parentNode.insertBefore(\n        get(b[bStart++], 1),\n        get(a[aStart++], -1).nextSibling\n      );\n      parentNode.insertBefore(get(b[--bEnd], 1), node);\n      // mark the future index as identical (yeah, it's dirty, but cheap \uD83D\uDC4D)\n      // The main reason to do this, is that when a[aEnd] will be reached,\n      // the loop will likely be on the fast path, as identical to b[bEnd].\n      // In the best case scenario, the next loop will skip the tail,\n      // but in the worst one, this node will be considered as already\n      // processed, bailing out pretty quickly from the map index check\n      a[aEnd] = b[bEnd];\n    }\n    // map based fallback, \"slow\" path\n    else {\n      // the map requires an O(bEnd - bStart) operation once\n      // to store all future nodes indexes for later purposes.\n      // In the worst case scenario, this is a full O(N) cost,\n      // and such scenario happens at least when all nodes are different,\n      // but also if both first and last items of the lists are different\n      if (!map) {\n        map = new Map;\n        let i = bStart;\n        while (i < bEnd)\n          map.set(b[i], i++);\n      }\n      // if it's a future node, hence it needs some handling\n      if (map.has(a[aStart])) {\n        // grab the index of such node, 'cause it might have been processed\n        const index = map.get(a[aStart]);\n        // if it's not already processed, look on demand for the next LCS\n        if (bStart < index && index < bEnd) {\n          let i = aStart;\n          // counts the amount of nodes that are the same in the future\n          let sequence = 1;\n          while (++i < aEnd && i < bEnd && map.get(a[i]) === (index + sequence))\n            sequence++;\n          // effort decision here: if the sequence is longer than replaces\n          // needed to reach such sequence, which would brings again this loop\n          // to the fast path, prepend the difference before a sequence,\n          // and move only the future list index forward, so that aStart\n          // and bStart will be aligned again, hence on the fast path.\n          // An example considering aStart and bStart are both 0:\n          // a: [1, 2, 3, 4]\n          // b: [7, 1, 2, 3, 6]\n          // this would place 7 before 1 and, from that time on, 1, 2, and 3\n          // will be processed at zero cost\n          if (sequence > (index - bStart)) {\n            const node = get(a[aStart], 0);\n            while (bStart < index)\n              parentNode.insertBefore(get(b[bStart++], 1), node);\n          }\n          // if the effort wasn't good enough, fallback to a replace,\n          // moving both source and target indexes forward, hoping that some\n          // similar node will be found later on, to go back to the fast path\n          else {\n            parentNode.replaceChild(\n              get(b[bStart++], 1),\n              get(a[aStart++], -1)\n            );\n          }\n        }\n        // otherwise move the source forward, 'cause there's nothing to do\n        else\n          aStart++;\n      }\n      // this node has no meaning in the future list, so it's more than safe\n      // to remove it, and check the next live node out instead, meaning\n      // that only the live list index should be forwarded\n      else\n        parentNode.removeChild(get(a[aStart++], -1));\n    }\n  }\n  return b;\n};\n", "const {isArray, prototype} = Array;\nconst {indexOf} = prototype;\n\nexport {isArray, indexOf};\n\nconst {\n  createDocumentFragment,\n  createElement,\n  createElementNS,\n  createTextNode,\n  createTreeWalker,\n  importNode\n} = new Proxy({}, {\n  get: (_, method) => document[method].bind(document)\n});\n\nexport {createTextNode, createTreeWalker, importNode};\n\nconst createHTML = html => {\n  const template = createElement('template');\n  template.innerHTML = html;\n  return template.content;\n};\n\nlet xml;\nconst createSVG = svg => {\n  if (!xml) xml = createElementNS('http://www.w3.org/2000/svg', 'svg');\n  xml.innerHTML = svg;\n  const content = createDocumentFragment();\n  content.append(...xml.childNodes);\n  return content;\n};\n\nexport const createContent = (text, svg) => svg ?\n                              createSVG(text) : createHTML(text);\n", "import {diffable} from '@webreflection/uwire';\n\nimport {aria, attribute, boolean, event, ref, setter, text} from 'uhandlers';\nimport udomdiff from 'udomdiff';\n\nimport {isArray, createTextNode} from './utils.js';\n\n// from a generic path, retrieves the exact targeted node\nconst reducePath = ({childNodes}, i) => childNodes[i];\n\n// this helper avoid code bloat around handleAnything() callback\nconst diff = (comment, oldNodes, newNodes) => udomdiff(\n  comment.parentNode,\n  // TODO: there is a possible edge case where a node has been\n  //       removed manually, or it was a keyed one, attached\n  //       to a shared reference between renders.\n  //       In this case udomdiff might fail at removing such node\n  //       as its parent won't be the expected one.\n  //       The best way to avoid this issue is to filter oldNodes\n  //       in search of those not live, or not in the current parent\n  //       anymore, but this would require both a change to uwire,\n  //       exposing a parentNode from the firstChild, as example,\n  //       but also a filter per each diff that should exclude nodes\n  //       that are not in there, penalizing performance quite a lot.\n  //       As this has been also a potential issue with domdiff,\n  //       and both lighterhtml and hyperHTML might fail with this\n  //       very specific edge case, I might as well document this possible\n  //       \"diffing shenanigan\" and call it a day.\n  oldNodes,\n  newNodes,\n  diffable,\n  comment\n);\n\n// if an interpolation represents a comment, the whole\n// diffing will be related to such comment.\n// This helper is in charge of understanding how the new\n// content for such interpolation/hole should be updated\nconst handleAnything = comment => {\n  let oldValue, text, nodes = [];\n  const anyContent = newValue => {\n    switch (typeof newValue) {\n      // primitives are handled as text content\n      case 'string':\n      case 'number':\n      case 'boolean':\n        if (oldValue !== newValue) {\n          oldValue = newValue;\n          if (!text)\n            text = createTextNode('');\n          text.data = newValue;\n          nodes = diff(comment, nodes, [text]);\n        }\n        break;\n      // null, and undefined are used to cleanup previous content\n      case 'object':\n      case 'undefined':\n        if (newValue == null) {\n          if (oldValue != newValue) {\n            oldValue = newValue;\n            nodes = diff(comment, nodes, []);\n          }\n          break;\n        }\n        // arrays and nodes have a special treatment\n        if (isArray(newValue)) {\n          oldValue = newValue;\n          // arrays can be used to cleanup, if empty\n          if (newValue.length === 0)\n            nodes = diff(comment, nodes, []);\n          // or diffed, if these contains nodes or \"wires\"\n          else if (typeof newValue[0] === 'object')\n            nodes = diff(comment, nodes, newValue);\n          // in all other cases the content is stringified as is\n          else\n            anyContent(String(newValue));\n          break;\n        }\n        // if the new value is a DOM node, or a wire, and it's\n        // different from the one already live, then it's diffed.\n        // if the node is a fragment, it's appended once via its childNodes\n        // There is no `else` here, meaning if the content\n        // is not expected one, nothing happens, as easy as that.\n        if (oldValue !== newValue) {\n          if ('ELEMENT_NODE' in newValue) {\n            oldValue = newValue;\n            nodes = diff(\n              comment,\n              nodes,\n              newValue.nodeType === 11 ?\n                [...newValue.childNodes] :\n                [newValue]\n            );\n          }\n          else {\n            const value = newValue.valueOf();\n            if (value !== newValue)\n              anyContent(value);\n          }\n        }\n        break;\n      case 'function':\n        anyContent(newValue(comment));\n        break;\n    }\n  };\n  return anyContent;\n};\n\n// attributes can be:\n//  * ref=${...}      for hooks and other purposes\n//  * aria=${...}     for aria attributes\n//  * ?boolean=${...} for boolean attributes\n//  * .dataset=${...} for dataset related attributes\n//  * .setter=${...}  for Custom Elements setters or nodes with setters\n//                    such as buttons, details, options, select, etc\n//  * @event=${...}   to explicitly handle event listeners\n//  * onevent=${...}  to automatically handle event listeners\n//  * generic=${...}  to handle an attribute just like an attribute\nconst handleAttribute = (node, name/*, svg*/) => {\n  switch (name[0]) {\n    case '?': return boolean(node, name.slice(1), false);\n    case '.': return setter(node, name.slice(1));\n    case '@': return event(node, 'on' + name.slice(1));\n    case 'o': if (name[1] === 'n') return event(node, name);\n  }\n\n  switch (name) {\n    case 'ref': return ref(node);\n    case 'aria': return aria(node);\n  }\n\n  return attribute(node, name/*, svg*/);\n};\n\n// each mapped update carries the update type and its path\n// the type is either node, attribute, or text, while\n// the path is how to retrieve the related node to update.\n// In the attribute case, the attribute name is also carried along.\nexport function handlers(options) {\n  const {type, path} = options;\n  const node = path.reduceRight(reducePath, this);\n  return type === 'node' ?\n    handleAnything(node) :\n    (type === 'attr' ?\n      handleAttribute(node, options.name/*, options.svg*/) :\n      text(node));\n};\n", "import {WeakMapSet} from '@webreflection/mapset';\nimport instrument from '@webreflection/uparser';\nimport {persistent} from '@webreflection/uwire';\n\nimport {handlers} from './handlers.js';\nimport {isArray, indexOf, createContent, createTreeWalker, importNode} from './utils.js';\n\n// from a fragment container, create an array of indexes\n// related to its child nodes, so that it's possible\n// to retrieve later on exact node via reducePath\nconst createPath = node => {\n  const path = [];\n  let {parentNode} = node;\n  while (parentNode) {\n    path.push(indexOf.call(parentNode.childNodes, node));\n    node = parentNode;\n    ({parentNode} = node);\n  }\n  return path;\n};\n\n// the prefix is used to identify either comments, attributes, or nodes\n// that contain the related unique id. In the attribute cases\n// is\u00B5X=\"attribute-name\" will be used to map current X update to that\n// attribute name, while comments will be like <!--is\u00B5X-->, to map\n// the update to that specific comment node, hence its parent.\n// style and textarea will have <!--is\u00B5X--> text content, and are handled\n// directly through text-only updates.\nconst prefix = 'is\u00B5';\n\n// Template Literals are unique per scope and static, meaning a template\n// should be parsed once, and once only, as it will always represent the same\n// content, within the exact same amount of updates each time.\n// This cache relates each template to its unique content and updates.\nconst cache = new WeakMapSet;\n\n// a RegExp that helps checking nodes that cannot contain comments\nconst textOnly = /^(?:textarea|script|style|title|plaintext|xmp)$/;\n\nexport const createCache = () => ({\n  stack: [],    // each template gets a stack for each interpolation \"hole\"\n\n  entry: null,  // each entry contains details, such as:\n                //  * the template that is representing\n                //  * the type of node it represents (html or svg)\n                //  * the content fragment with all nodes\n                //  * the list of updates per each node (template holes)\n                //  * the \"wired\" node or fragment that will get updates\n                // if the template or type are different from the previous one\n                // the entry gets re-created each time\n\n  wire: null    // each rendered node represent some wired content and\n                // this reference to the latest one. If different, the node\n                // will be cleaned up and the new \"wire\" will be appended\n});\n\n// the entry stored in the rendered node cache, and per each \"hole\"\nconst createEntry = (type, template) => {\n  const {content, updates} = mapUpdates(type, template);\n  return {type, template, content, updates, wire: null};\n};\n\n// a template is instrumented to be able to retrieve where updates are needed.\n// Each unique template becomes a fragment, cloned once per each other\n// operation based on the same template, i.e. data => html`<p>${data}</p>`\nconst mapTemplate = (type, template) => {\n  const svg = type === 'svg';\n  const text = instrument(template, prefix, svg);\n  const content = createContent(text, svg);\n  // once instrumented and reproduced as fragment, it's crawled\n  // to find out where each update is in the fragment tree\n  const tw = createTreeWalker(content, 1 | 128);\n  const nodes = [];\n  const length = template.length - 1;\n  let i = 0;\n  // updates are searched via unique names, linearly increased across the tree\n  // <div is\u00B50=\"attr\" is\u00B51=\"other\"><!--is\u00B52--><style><!--is\u00B53--</style></div>\n  let search = `${prefix}${i}`;\n  while (i < length) {\n    const node = tw.nextNode();\n    // if not all updates are bound but there's nothing else to crawl\n    // it means that there is something wrong with the template.\n    if (!node)\n      throw `bad template: ${text}`;\n    // if the current node is a comment, and it contains is\u00B5X\n    // it means the update should take care of any content\n    if (node.nodeType === 8) {\n      // The only comments to be considered are those\n      // which content is exactly the same as the searched one.\n      if (node.data === search) {\n        nodes.push({type: 'node', path: createPath(node)});\n        search = `${prefix}${++i}`;\n      }\n    }\n    else {\n      // if the node is not a comment, loop through all its attributes\n      // named is\u00B5X and relate attribute updates to this node and the\n      // attribute name, retrieved through node.getAttribute(\"is\u00B5X\")\n      // the is\u00B5X attribute will be removed as irrelevant for the layout\n      // let svg = -1;\n      while (node.hasAttribute(search)) {\n        nodes.push({\n          type: 'attr',\n          path: createPath(node),\n          name: node.getAttribute(search)\n        });\n        node.removeAttribute(search);\n        search = `${prefix}${++i}`;\n      }\n      // if the node was a style, textarea, or others, check its content\n      // and if it is <!--is\u00B5X--> then update tex-only this node\n      if (\n        textOnly.test(node.localName) &&\n        node.textContent.trim() === `<!--${search}-->`\n      ){\n        node.textContent = '';\n        nodes.push({type: 'text', path: createPath(node)});\n        search = `${prefix}${++i}`;\n      }\n    }\n  }\n  // once all nodes to update, or their attributes, are known, the content\n  // will be cloned in the future to represent the template, and all updates\n  // related to such content retrieved right away without needing to re-crawl\n  // the exact same template, and its content, more than once.\n  return {content, nodes};\n};\n\n// if a template is unknown, perform the previous mapping, otherwise grab\n// its details such as the fragment with all nodes, and updates info.\nconst mapUpdates = (type, template) => {\n  const {content, nodes} = (\n    cache.get(template) ||\n    cache.set(template, mapTemplate(type, template))\n  );\n  // clone deeply the fragment\n  const fragment = importNode(content, true);\n  // and relate an update handler per each node that needs one\n  const updates = nodes.map(handlers, fragment);\n  // return the fragment and all updates to use within its nodes\n  return {content: fragment, updates};\n};\n\n// as html and svg can be nested calls, but no parent node is known\n// until rendered somewhere, the unroll operation is needed to\n// discover what to do with each interpolation, which will result\n// into an update operation.\nexport const unroll = (info, {type, template, values}) => {\n  // interpolations can contain holes and arrays, so these need\n  // to be recursively discovered\n  const length = unrollValues(info, values);\n  let {entry} = info;\n  // if the cache entry is either null or different from the template\n  // and the type this unroll should resolve, create a new entry\n  // assigning a new content fragment and the list of updates.\n  if (!entry || (entry.template !== template || entry.type !== type))\n    info.entry = (entry = createEntry(type, template));\n  const {content, updates, wire} = entry;\n  // even if the fragment and its nodes is not live yet,\n  // it is already possible to update via interpolations values.\n  for (let i = 0; i < length; i++)\n    updates[i](values[i]);\n  // if the entry was new, or representing a different template or type,\n  // create a new persistent entity to use during diffing.\n  // This is simply a DOM node, when the template has a single container,\n  // as in `<p></p>`, or a \"wire\" in `<p></p><p></p>` and similar cases.\n  return wire || (entry.wire = persistent(content));\n};\n\n// the stack retains, per each interpolation value, the cache\n// related to each interpolation value, or null, if the render\n// was conditional and the value is not special (Array or Hole)\nconst unrollValues = ({stack}, values) => {\n  const {length} = values;\n  for (let i = 0; i < length; i++) {\n    const hole = values[i];\n    // each Hole gets unrolled and re-assigned as value\n    // so that domdiff will deal with a node/wire, not with a hole\n    if (hole instanceof Hole)\n      values[i] = unroll(\n        stack[i] || (stack[i] = createCache()),\n        hole\n      );\n    // arrays are recursively resolved so that each entry will contain\n    // also a DOM node or a wire, hence it can be diffed if/when needed\n    else if (isArray(hole))\n      unrollValues(stack[i] || (stack[i] = createCache()), hole);\n    // if the value is nothing special, the stack doesn't need to retain data\n    // this is useful also to cleanup previously retained data, if the value\n    // was a Hole, or an Array, but not anymore, i.e.:\n    // const update = content => html`<div>${content}</div>`;\n    // update(listOfItems); update(null); update(html`hole`)\n    else\n      stack[i] = null;\n  }\n  if (length < stack.length)\n    stack.splice(length);\n  return length;\n};\n\n/**\n * Holds all details wrappers needed to render the content further on.\n * @constructor\n * @param {string} type The hole type, either `html` or `svg`.\n * @param {string[]} template The template literals used to the define the content.\n * @param {Array} values Zero, one, or more interpolated values to render.\n */\nexport class Hole {\n  constructor(type, template, values) {\n    this.type = type;\n    this.template = template;\n    this.values = values;\n  }\n};\n", "import {MapSet, WeakMapSet} from '@webreflection/mapset';\n\nimport {Hole, createCache, unroll} from './rabbit.js';\n\n// both `html` and `svg` template literal tags are polluted\n// with a `for(ref[, id])` and a `node` tag too\nconst tag = type => {\n  // both `html` and `svg` tags have their own cache\n  const keyed = new WeakMapSet;\n  // keyed operations always re-use the same cache and unroll\n  // the template and its interpolations right away\n  const fixed = cache => (template, ...values) => unroll(\n    cache,\n    {type, template, values}\n  );\n  return Object.assign(\n    // non keyed operations are recognized as instance of Hole\n    // during the \"unroll\", recursively resolved and updated\n    (template, ...values) => new Hole(type, template, values),\n    {\n      // keyed operations need a reference object, usually the parent node\n      // which is showing keyed results, and optionally a unique id per each\n      // related node, handy with JSON results and mutable list of objects\n      // that usually carry a unique identifier\n      for(ref, id) {\n        const memo = keyed.get(ref) || keyed.set(ref, new MapSet);\n        return memo.get(id) || memo.set(id, fixed(createCache()));\n      },\n      // it is possible to create one-off content out of the box via node tag\n      // this might return the single created node, or a fragment with all\n      // nodes present at the root level and, of course, their child nodes\n      node: (template, ...values) => unroll(createCache(), new Hole(type, template, values)).valueOf()\n    }\n  );\n};\n\n// each rendered node gets its own cache\nconst cache = new WeakMapSet;\n\n// rendering means understanding what `html` or `svg` tags returned\n// and it relates a specific node to its own unique cache.\n// Each time the content to render changes, the node is cleaned up\n// and the new new content is appended, and if such content is a Hole\n// then it's \"unrolled\" to resolve all its inner nodes.\nconst render = (where, what) => {\n  const hole = typeof what === 'function' ? what() : what;\n  const info = cache.get(where) || cache.set(where, createCache());\n  const wire = hole instanceof Hole ? unroll(info, hole) : hole;\n  if (wire !== info.wire) {\n    info.wire = wire;\n    // valueOf() simply returns the node itself, but in case it was a \"wire\"\n    // it will eventually re-append all nodes to its fragment so that such\n    // fragment can be re-appended many times in a meaningful way\n    // (wires are basically persistent fragments facades with special behavior)\n    where.replaceChildren(wire.valueOf());\n  }\n  return where;\n};\n\nconst html = tag('html');\nconst svg = tag('svg');\n\nexport {Hole, render, html, svg};\n", "export default function clone(target, map = new WeakMap()) {\n\n  // Return the value if target is not an object or null\n  if (target === null\n    || typeof target !== 'object'\n    || typeof target === 'function'\n    || target instanceof HTMLElement) {\n    return target\n  }\n\n  // Check whether target is an array.\n  let cloneTarget = Array.isArray(target) ? [] : {};\n\n  // Use WeakMap to prevent circular references.\n  if (map.get(target)) {\n    return map.get(target);\n  }\n  map.set(target, cloneTarget);\n\n  for (const key in target) {\n    cloneTarget[key] = clone(target[key], map);\n  }\n\n  return cloneTarget;\n};", "export default function csvDownload(arr, params = {}) {\n\n    if (!Array.isArray(arr)) {\n        console.warn('Array argument for csvDownload must be an array')\n        return;\n    }\n\n    const rows = arr.map(record => {\n\n        return Object.values(record).join(',')\n    })\n\n    const blob = new Blob([rows.join('\\r\\n')], { type: 'text/csv;charset=utf-8;' })\n\n    const link = document.createElement('a')\n\n    link.download = `${params.title || 'file'}.csv`\n    link.href = URL.createObjectURL(blob)\n    link.dataset.downloadurl = ['csv', link.download, link.href].join(':')\n    link.style.display = 'none'\n    document.body.append(link)\n    link.click()\n    link.remove()\n}", "let promise, convert;\n\nasync function moduleImport() {\n\n  if (!promise) promise = new Promise(async resolve => {\n\n    import('https://cdn.skypack.dev/convert@4')\n      .then(mod => resolve(convert = mod.convert))\n\n  })\n\n  await promise\n}\n\nexport default async (value, params) => {\n\n  await moduleImport()\n\n  value = parseFloat(value)\n\n  if (params.units && params.convertTo) {\n\n    value = convert(value, params.units).to(params.convertTo);\n  }\n\n  value = value.toFixed(params.decimals || 0)\n\n  value = value.toLocaleString(params.locale || 'en-GB')\n\n  return `${params.prefix || ''}${value}${params.suffix || ''}`\n}", "// Create temporary textarea to copy string to clipboard.\nexport function copyToClipboard(str) {\n\n  let textArea = document.body.appendChild(mapp.utils.html.node`\n    <textarea style=\"visibility=none;\">`);\n  \n  textArea.value = str;\n  textArea.select();\n  document.execCommand('copy');\n  textArea.remove();\n\n}", "export function dataURLtoBlob(dataURL) {\n\n  if (dataURL.indexOf(';base64,') == -1) {\n    let\n      parts = dataURL.split(','),\n      contentType = parts[0].split(':')[1],\n      raw = parts[1];\n  \n    return new Blob([raw], { type: contentType });\n  }\n  \n  let\n    parts = dataURL.split(';base64,'),\n    contentType = parts[0].split(':')[1],\n    raw = window.atob(parts[1]),\n    uInt8Array = new Uint8Array(raw.length);\n  \n  for (let i = 0; i < raw.length; ++i) {\n    uInt8Array[i] = raw.charCodeAt(i);\n  }\n  \n  return new Blob([uInt8Array], { type: contentType });\n}", "export default (hex, transparency) => {\n  if (isNaN(transparency)) return hex;\n\n  if (hex.length === 7) return hex + (transparency && parseInt(transparency * 255).toString(16) || '00');\n\n  if (hex.length === 4) return hex + parseInt(transparency * 15).toString(16);\n\n  return hex;\n}\n", "function initializeFieldStats(layer) {\n    if (layer.style?.theme?.field_stats) {\n        layer.style.theme.updated = true;\n        layer.style.theme.field_stats[layer.style.theme.field] = {\n            values: []\n        };\n    }\n}\n\nexport function geojson(layer, features) {\n\n    const formatGeojson = new ol.format.GeoJSON\n\n    initializeFieldStats(layer);\n\n    return features.map((feature) => {\n\n        const properties = feature.properties\n\n        if (layer.style?.theme?.field_stats) {\n\n            layer.style.theme.field_stats[layer.style.theme.field].values.push(parseFloat(properties[layer.style.theme.field]));\n        }\n\n        return new ol.Feature({\n            id: feature.id,\n            geometry: formatGeojson.readGeometry(feature.geometry, {\n                dataProjection: 'EPSG:' + layer.srid,\n                featureProjection: 'EPSG:' + layer.mapview.srid,\n            }),\n            properties\n        })\n\n    })\n}\n\nexport function wkt(layer, features) {\n\n    const formatWKT = new ol.format.WKT\n\n    initializeFieldStats(layer);\n\n    return features.map((feature) => {\n\n        const properties = {}\n\n        // Assign field key and value to properties object\n        layer.params.fields?.forEach((field, i) => {\n\n            if (layer.style?.theme?.field_stats?.[field]) {\n\n                layer.style?.theme?.field_stats?.[field].values.push(parseFloat(feature[i + 2]));\n            }\n\n            properties[field] = feature[i + 2]\n        })\n\n        // Return feature from geometry with properties.\n        return new ol.Feature({\n            id: feature.shift(),\n            geometry: formatWKT.readGeometry(feature.shift(), {\n                dataProjection: 'EPSG:' + layer.srid,\n                featureProjection: 'EPSG:' + layer.mapview.srid,\n            }),\n            properties\n        })\n\n    })\n\n}\n\nexport function cluster(layer, features) {\n\n    layer.max_size = 1\n\n    return features.map((vals, i) => {\n\n        const geometry = new ol.geom.Point(vals.shift())\n\n        const count = vals.shift()\n\n        layer.max_size = layer.max_size > count ? layer.max_size: count;\n\n        const id = vals.shift()\n\n        const properties = {count}\n        \n        layer.params.fields.forEach((field, i) => {\n            properties[field] = vals[i]\n        })\n\n        return new ol.Feature({\n            id,\n            geometry,\n            ...properties\n        })\n\n    })\n\n}\n", "export default plugins => {\n\n  if (!Array.isArray(plugins)) return;\n  \n  return new Promise(resolveAll=>{\n\n    const promises = plugins.map(\n      plugin => \n        new Promise((resolve, reject) => \n          import(plugin)\n          .then(mod=> {\n            resolve(mod)\n          })\n          .catch(()=> {\n            reject()\n          })))\n\n    Promise\n      .allSettled(promises)\n      .then(()=>{\n        resolveAll()\n      })\n      .catch(err=>{\n        console.error(err)\n        resolveAll()\n      })\n\n  })\n}", "export default function (callback, options = {\n  //enableHighAccuracy: false,\n  //timeout: 3000,\n  //maximumAge: 0\n}) {\n\n  navigator.geolocation.getCurrentPosition(\n    callback,\n    err => console.error(err),\n    options)\n\n}", "export default function mergeDeep(target, ...sources) {\n\n  // No sources to merge.\n  if (!sources.length) {\n    return target;\n  }\n\n  // Shift first source out of sources array.\n  const source = sources.shift();\n\n  // target & source are both objects.\n  if (isObject(target) && isObject(source)) {\n\n    const proto = Object.getPrototypeOf(target)\n\n    // Iterate over object keys in source.\n    for (const key in source) {\n\n      // Key must not be in target object prototype.\n      if (proto[key]) {\n        console.warn(`Prototype polution detected for key: ${key}`)\n        continue;\n      }\n\n      if (source[key] === null) {\n        target[key] = null;\n\n      } else if (isObject(source[key])) {\n\n        // Target key must be an object.\n        target[key] ??= {}\n\n        // Call recursive merge for target key object.\n        mergeDeep(target[key], source[key]);\n\n      } else {\n\n        // source[key] is neither null nor object.\n        target[key] = source[key]\n      }\n    }\n  }\n\n  return mergeDeep(target, ...sources);\n}\n\nfunction isObject(item) {\n\n  // item is an HTMLElement \n  if (item instanceof HTMLElement) {\n    console.warn(item)\n    return false;\n  }\n\n  // item is an array.\n  if (Array.isArray(item)) return false;\n\n  if (typeof item === 'object') return true;\n}", "// Create param string for XHR request.\nexport default params => Object.entries(params)\n  .filter(entry => entry[1] === 0 || !!entry[1])\n  .filter(entry => entry[1] !== '{}')\n\n  // Filter out zero length array and objects with empty object values.\n  .filter(entry => typeof entry[1] !== 'object'\n    || entry[1].length\n    || Object.values(entry[1]).some(val => typeof val === 'object' && Object.keys(val).length))\n\n  .map(entry => {\n\n    // if (Array.isArray(entry[1])) {\n\n    //   return entry[1].map(val => `${entry[0]}=${val}`).join('&')\n    // }\n\n    // Stringify non array objects.\n    if (typeof entry[1] === 'object' && !Array.isArray(entry[1])) {\n\n      entry[1] = JSON.stringify(entry[1])\n\n    }\n\n    return encodeURI(`${entry[0]}=${entry[1]}`)\n\n  }).join('&')", "export default promises => new Promise((resolveAll, rejectAll) => {\n\n  Promise\n    .all(promises)\n    .then(resolveAll)\n    .catch(error => {\n      console.error(error)\n      rejectAll(error)\n    })\n\n})", "export default _this => {\n\n  // If queryparams is not an object, return.\n  if (typeof _this.queryparams !== 'object') {\n    console.warn('queryparams must be an object')\n    return;\n  };\n\n  // The layer queryparam must be true to support viewport params.\n  _this.queryparams.layer = _this.queryparams.layer || _this.viewport\n\n  // Assign table name from layer\n  const tableCurrent = _this.location?.layer?.tableCurrent() || _this.layer?.tableCurrent()\n\n  // If table is set to true, use the current table name from the layer, otherwise use the table name from the queryparams.\n  const table = _this.queryparams.table === true ? tableCurrent : _this.queryparams.table;\n\n  _this.queryparams.table &&= table;\n\n  // Get bounds from mapview.\n  const bounds = _this.viewport && _this.layer.mapview.getBounds();\n\n  // Get center from mapview.\n  const center = _this.queryparams.center && ol.proj.transform(\n    _this.layer.mapview.Map.getView().getCenter(),\n    `EPSG:${_this.layer.mapview.srid}`,\n    `EPSG:4326`)\n\n  return {\n\n    // Spread the queryparams object.\n    ..._this.queryparams,\n\n    // Queries will fail if the template can not be accessed in workspace.\n    template: encodeURIComponent(_this.query),\n\n    // Layer filter can only be applied if the layer is provided as reference to a layer object in the layers list.\n    filter: _this.queryparams.filter ? _this.layer.filter?.current : undefined,\n\n    // Locale param is only required for layer lookups.\n    locale: _this.queryparams.layer ? _this.layer.mapview.locale.key : undefined,\n\n    // Layer param is only required for layer lookups.\n    layer: _this.queryparams.layer ? _this.layer.key : undefined,\n\n    // ID will be taken if a location object is provided with the params.\n    id: _this.queryparams.id ? _this.location?.id : undefined,\n\n    // lat lng must be explicit or the center flag param must be set.\n    lat: center && center[1],\n    lng: center && center[0],\n\n    // z will be generated if the z flag is set in the params.\n    z: _this.queryparams?.z && _this.layer.mapview.Map.getView().getZoom(),\n\n    // Viewport will only be generated if the viewport flag is set on the params.\n    viewport: bounds && [bounds.west, bounds.south, bounds.east, bounds.north, _this.layer.mapview.srid],\n\n    // The fieldValues array entries should not be part of the url params.\n    fieldValues: undefined\n  }\n}", "export default (style, feature) => {\n\n  if (!style) return;\n\n  // Array for OL Style objects.\n  const Styles = []\n\n  // The style object must always be processed as an array.\n  style = Array.isArray(style) ? style : [style]\n\n  // Iterate through style array.\n  style.forEach(style => {\n\n    // Only process icon for features if they are point geometries.\n    if (style.icon) {\n\n      // icon styles must always be processed as an array.\n      style.icon = Array.isArray(style.icon) ? style.icon : [style.icon]\n\n      // Iterate through icon style array.\n      style.icon.forEach(icon => {\n\n        // Calculate scale for icon render.\n        let scale = icon.scale || style.scale || 1\n        scale *= style.clusterScale || 1\n        scale *= style.zoomInScale || 1\n        scale *= style.zoomOutScale || 1\n        scale *= style.highlightScale || 1\n\n        // Create icon url from svgSymbols method if not defined as url or svg source.\n        icon.url = icon.url || icon.svg || mapp.utils.svgSymbols[icon.type||'dot'](icon, feature)\n\n        if (!icon.url) return;\n\n        // Push OL icon Style into Styles array.\n        Styles.push(new ol.style.Style({\n          image: new ol.style.Icon({\n            src: icon.url,\n            crossOrigin: 'anonymous',\n            scale: scale,\n            anchor: icon.anchor || [0.5, 0.5],\n          }),\n          zIndex: style.zIndex\n        }))\n      })\n\n    } \n    \n    if (style.fillColor || style.strokeColor) {\n\n      // Create OL fill.\n      let fill = style.fillColor && new ol.style.Fill({\n        color: mapp.utils.hexa(style.fillColor, style.fillOpacity)\n      })\n\n      // Create OL stroke.\n      let stroke = style.strokeColor && new ol.style.Stroke({\n        color: mapp.utils.hexa(style.strokeColor, style.strokeOpacity),\n        width: parseFloat(style.strokeWidth || 1)\n      })\n\n      // Push OL vector Style into Styles array.\n      Styles.push(new ol.style.Style({ fill, stroke }))\n    }\n\n    // Create label style if label text is not undefined.\n    if (typeof style.label?.text !== 'undefined') {\n\n      const text = new ol.style.Text({\n        font: style.label.font || '12px sans-serif',\n        text: String(style.label.text),\n        overflow: style.label.overflow,\n        offsetY: style.label.offsetY,\n        offsetX: style.label.offsetX,\n        stroke: style.label.strokeColor && new ol.style.Stroke({\n          color: style.label.strokeColor,\n          width: style.label.strokeWidth || 1\n        }),\n        fill: new ol.style.Fill({\n          color: style.label.fillColor || '#000'\n        })\n      })\n\n      // Push OL text Style into Styles array.\n      Styles.push(new ol.style.Style({ text, zIndex: style.zIndex }))\n    }\n\n  })\n\n  // Set Styles object to cache style.\n  feature?.set?.('Styles', Styles, true)\n  \n  return Styles\n}", "import { svg } from 'uhtml'\n\nconst xmlSerializer = new XMLSerializer()\n\nconst memoizedIcons = {\n  dot: new Map()\n}\n\nexport function dot(style) {\n\n  let lookup = Object.values({\n    fillColor: style.fillColor\n  }).reduce((a, b) => a + b)\n  \n  if (memoizedIcons.dot.has(lookup)) return memoizedIcons.dot.get(lookup)\n\n  let icon = svg.node`\n    <svg width=24 height=24 viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>\n      <circle cx=13 cy=13 r=10 fill='#333'></circle>\n      <circle cx=12 cy=12 r=10 fill=${style.fillColor || '#fff'}></circle>`\n\n  icon = `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n\n  memoizedIcons.dot.set(lookup, icon)\n\n  return icon\n}\n\nexport function target(style) {\n\n  const icon = svg.node`\n    <svg width=24 height=24 viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>\n      <circle cx=13 cy=13 fill='#333' r=10 opacity=0.4></circle>\n      <circle cx=12 cy=12 r=10 fill=${style.fillColor || '#FFF'}>`\n\n  style.layers && Object.entries(style.layers).forEach(layer => {\n\n    icon.appendChild(svg.node`<circle cx=12 cy=12 r=${parseFloat(layer[0]) * 10} fill=${layer[1]}>`)\n  })\n\n  return `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n}\n\nexport function triangle(style) {\n\n  const icon = svg.node`\n    <svg width=24 height=24 viewBox='${`0 0 24 24`}' xmlns='http://www.w3.org/2000/svg'>\n      <polygon\n        points=\"12,4.68 2,22 22,22\" \n        fill=\"#333\" stroke=\"#333\" opacity=0.4 stroke-opacity=0.4 stroke-width=3\n        stroke-linejoin=\"round\"/>`\n\n  icon.appendChild(svg.node`\n    <polygon\n      fill=${style.fillColor || '#FFF'} stroke=${style.fillColor || '#FFF'} stroke-width=2\n      points=\"12,4.68 2,22 22,22\"  stroke-linejoin=\"round\"/>`)\n\n  style.layers && Object.entries(style.layers).forEach(layer => {\n\n    function x(val, scale) {\n      return 12 + (val - 12) * scale\n    }\n\n    function y(val, scale) {\n      return 16 + (val - 16) * scale\n    }\n\n    let points = `${x(12, layer[0])},${y(4.68, layer[0])} ${x(2, layer[0])}, ${y(22, layer[0])} ${x(22, layer[0])}, ${y(22, layer[0])}`\n\n    icon.appendChild(svg.node`\n      <polygon\n        points=\"${points}\"\n        fill=${layer[1]}\n        stroke=${layer[1] || '#FFF'}\n        stroke-width=1\n        stroke-linejoin=\"round\"/>`)\n  })\n\n  return `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n}\n\nexport function square(style) {\n\n  const icon = svg.node`\n    <svg width=24 height=24 viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>\n      <rect fill='#333' opacity=0.3 width=20 height=20 x=2 y=2 rx=1></rect>\n      <rect fill=${style.fillColor || '#FFF'} width=20 height=20 x=0 y=0 rx=1></rect>`\n\n  style.layers && Object.entries(style.layers).forEach(layer => {\n\n    icon.appendChild(svg.node`\n      <rect fill=${layer[1]}\n        width=${parseFloat(layer[0]) * 20}\n        height=${parseFloat(layer[0]) * 20}\n        x=${10*(1-parseFloat(layer[0]))}\n        y=${10*(1-parseFloat(layer[0]))} rx=${parseFloat(layer[0])}></rect>`)\n  })\n\n  return `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n}\n\nexport function diamond(style) {\n\n  const icon = svg.node`\n    <svg width=24 height=24 viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>\n      <polygon\n        fill='#333'\n        opacity=0.3\n        points=\"12 0, 24 12, 12 24, 0 12\"></polygon>\n      <polygon\n        fill=${style.fillColor || '#FFF'}\n        points=\"12 0, 24 12, 12 24, 0 12\"></polygon>`\n\n  function s(val, scale) {\n    return 12 + (val - 12) * scale\n  }\n\n  style.layers && Object.entries(style.layers).forEach(layer => {\n    \n    let points = `${s(12, layer[0])} ${s(0, layer[0])},${s(24, layer[0])} ${s(12, layer[0])},${s(12, layer[0])} ${s(24, layer[0])}, ${s(0, layer[0])} ${s(12, layer[0])}`\n\n    icon.appendChild(svg.node`\n      <polygon\n        fill=${layer[1] || '#FFF'}\n        points=\"${points}\"></polygon>`)\n  })\n\n  return `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n}\n\nexport function semiCircle(style) {\n\n  const icon = svg.node`\n    <svg width=30 height=30 viewBox='0 0 20 24' xmlns='http://www.w3.org/2000/svg'>\n      <defs>\n        <clipPath id=\"cut-off-shade\">\n          <rect x=\"0\" y=\"0\" width=\"24\" height=\"11\"/>\n        </clipPath>\n        <clipPath id=\"cut-off\">\n          <rect x=\"0\" y=\"0\" width=\"24\" height=\"10\"/>\n        </clipPath>\n      </defs>\n      <circle cx=\"11\" cy=\"10\" r=\"10\" clip-path=\"url(#cut-off-shade)\" fill=\"#333\" opacity=0.4></circle>\n      <circle cx=10 cy=10 r=10 fill=${style.fillColor || '#FFF'} clip-path=\"url(#cut-off-shade)\">`\n\n  style.layers && Object.entries(style.layers).forEach(layer => {\n    \n    icon.appendChild(svg.node`\n      <circle cx=10 cy=10 r=${parseFloat(layer[0]) * 10} fill=${layer[1]} clip-path=\"url(#cut-off-shade)\">`)\n\n  })\n\n  return `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n}\n\nexport function markerLetter(style) {\n\n  const icon = svg.node`\n    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path fill=\"${style.color}\"\n        d=\"M 12 1.969 C 7.878 1.969 4.813 5.239 4.813 9.328 C 4.813 10.554 5.222 12.189 6.244 14.028 C 8.289 17.504 12 22 12 22 C 12 22 16.055 17.504 18.099 14.028 C 19.122 12.189 19.341 10.963 19.341 9.328 C 19.341 5.239 16.054 1.969 12 1.969 Z\"/>\n      <circle cx=\"12.17192400568182\" cy=\"8.918683238636365\" r=\"5.109789772727275\" fill=\"rgb(255, 255, 255)\"/>\n      <text x=\"12\" y=\"12\" style=\"text-anchor: middle; font-weight: 600; font-size: 9px; font-family: sans-serif; fill: rgb(85, 85, 85);\">\n      ${style.letter}`\n\n  return `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n}\n\nexport function markerColor(style) {\n\n  const icon = svg.node`\n    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path style=\"opacity: 0.5;\" fill=\"${style.colorMarker}\"\n        d=\"M 10.797 1.238 C 6.308 1.238 2.716 4.83 2.716 9.32 C 2.716 11.116 3.165 12.463 4.287 14.483 C 6.532 18.3 9.952 23.234 9.952 23.234 C 9.952 23.234 15.063 18.3 17.308 14.483 C 18.43 12.463 18.879 11.116 18.879 9.32 C 18.879 4.83 15.287 1.238 10.797 1.238 Z\"/>\n      <path fill=\"${style.colorMarker}\"\n        d=\"M 10 1.238 C 5.51 1.238 2.144 4.83 2.144 9.32 C 2.144 10.667 2.593 12.463 3.716 14.483 C 5.961 18.3 10 23.238 10 23.238 C 10 23.238 14.491 18.3 16.736 14.483 C 17.859 12.463 18.1 11.116 18.1 9.32 C 18.1 4.83 14.49 1.238 10 1.238 Z\"/>\n      <circle cx=\"10.226\" cy=\"8.871\" r=\"5.612\" opacity=\"0.8\" fill=\"rgb(255, 255, 255)\"/>\n      <circle cx=\"10.226\" cy=\"8.871\" r=\"2.806\" opacity=\"0.8\" fill=\"${style.colorDot}\"/>`\n\n  return `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n}\n\nexport function circle(style) {\n\n  const icon = svg.node`\n    <svg width=24 height=24 viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'>\n      <circle cx=16 cy=16 r=10\n        stroke=\"${style.strokeColor || '#333'}\"\n        stroke-width=\"${style.strokeWidth || 1}\"\n        fill=\"#ffffff33\">`\n\n  return `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n}\n\n// Assign template method to svgSymbols.\nexport function template(icon) {\n\n  // Get svgString from svgSymbol.templates.\n  let svgString = mapp.utils.svgSymbols.templates?.[icon.template]\n\n  // Return undefined if svgString not found in templates.\n  if (!svgString) return;\n\n  // Iterate through the icon.substitute entries.\n  if (typeof icon.substitute === 'object') {\n\n    Object.entries(icon.substitute).forEach((entry) => {\n\n      // Replace substitute key with values.\n      svgString = svgString.replaceAll(entry[0], entry[1]);\n    });\n  }\n\n  // Return encoded string.\n  return `data:image/svg+xml,${encodeURIComponent(svgString)}`;\n}", "export function datasets(term, gazetteer) {\n\n    if (!gazetteer.provider) {\n\n        // The default gazetteer config is for a dataset search.\n        gazetteer.qterm && search(gazetteer)\n    }\n\n    // Search additional datasets.\n    gazetteer.datasets?.forEach(search)\n\n    function search(dataset) {\n\n        let layer = gazetteer.mapview.layers[gazetteer.layer || dataset.layer]\n\n        // Skip if layer defined in datasets is not added to the mapview\n        if (!layer) {\n\n            console.warn('No layer definition for gazetteer search.')\n            return;\n        }\n\n        // Skip if layer table is not defined and no table is defined in dataset or gazetteer.\n        if (!layer.table && !dataset.table && !gazetteer.table) {\n\n            console.warn('No table definition for gazetteer search.')\n            return;\n        };\n        \n        // Abort current dataset query. Onload will not be called.\n        dataset.xhr?.abort()\n\n        dataset.xhr = new XMLHttpRequest()\n\n        dataset.xhr.open('GET', gazetteer.mapview.host + '/api/query/gaz_query?' +\n            mapp.utils.paramString({\n                label: dataset.qterm,\n                qterm: dataset.qterm,\n                qID: layer.qID,\n                locale: gazetteer.mapview.locale.key,\n                layer: layer.key,\n                filter: layer.filter?.current,\n                table: dataset.table || gazetteer.table || layer.table,\n                wildcard: '*',\n                term: `${dataset.leading_wildcard ? '*' : ''}${term}*`,\n                limit: dataset.limit || gazetteer.limit || 10\n            }))\n\n        dataset.xhr.setRequestHeader('Content-Type', 'application/json')\n        dataset.xhr.responseType = 'json'\n        dataset.xhr.onload = e => {\n\n            // The gazetteer input may have been cleared prior to the onload event.\n            if (!gazetteer.input.value.length) return;\n\n            if (e.target.status >= 300) return;\n            \n            // No results\n            if (!e.target.response) {\n                gazetteer.list.append(mapp.utils.html.node`\n                    <li>\n                        <span class=\"label\">${dataset.title || layer.name}</span>\n                        <span>${mapp.dictionary.no_results}</span>`)\n                return;\n            }\n\n            // Ensure that response if a flat array.\n            [e.target.response].flat().forEach(row => {\n\n                gazetteer.list.append(mapp.utils.html.node`\n                    <li\n                        onclick=${e => {\n\n                            if (gazetteer.callback) return gazetteer.callback(row, gazetteer);\n\n                            mapp.location.get({\n                                layer,\n                                id: row.id\n                            }).then(loc => loc && loc.flyTo(gazetteer.maxZoom || dataset.maxZoom))\n\n                        }}>\n                        <span class=\"label\">${dataset.title || layer.name}</span>\n                        <span>${row.label}</span>`)\n            })\n\n        }\n\n        dataset.xhr.send()\n\n    }\n}\n\nexport function getLocation(location, gazetteer) {\n\n    if (typeof gazetteer.callback === 'function') {\n        gazetteer.callback(location)\n        return;\n    }\n\n    Object.assign(location, {\n        layer: {\n            mapview: gazetteer.mapview\n        },\n        Layers: [],\n        hook: location.label\n    })\n\n    const infoj = [\n        {\n            title: location.label,\n            value: location.source,\n            inline: true\n        },\n        {\n            type: 'pin',\n            value: [location.lng, location.lat],\n            srid: '4326',\n            class: 'display-none',\n            location\n        }\n    ]\n\n    if (gazetteer.streetview) {\n\n        gazetteer.streetview.key && infoj.push({\n            type: 'streetview',\n            key: gazetteer.streetview.key,\n            location\n        })\n\n    }   \n\n    mapp.location.decorate(Object.assign(location, { infoj }))\n\n    gazetteer.mapview.locations[location.hook] = location\n\n    location.flyTo(gazetteer.maxZoom)\n}", "export default feature => {\n\n  const geometry = feature.getGeometry()\n\n  if (geometry.getType() === 'Point') return new ol.geom.Point(geometry.getCoordinates())\n\n  let coords = geometry.getCoordinates()\n\n  let depth = getDepth(coords)\n\n  // Line string will have a depth of 2.\n  if (depth === 2) {\n    return new ol.geom.MultiPoint(coords)\n  }\n\n  // Coords with a depth of more than 3 indicate multi geoms.\n  coords = depth > 3 ? coords.flat(2) : coords[0]\n\n  return new ol.geom.MultiPoint(coords)\n}\n\nfunction getDepth(arr) {\n  return Array.isArray(arr) ?\n    1 + Math.max(0, ...arr.map(getDepth)) :\n    0;\n}", "const requestMap = new Map()\n\nexport default params => new Promise((resolve, reject) => {\n\n  if (!params) return reject()\n\n  params = typeof params === 'string' ? { url: params } : params\n\n  // Check whether a request with the same params has already been resolved.\n  if (params.cache && requestMap.has(params)) return resolve(requestMap.get(params))\n\n  const xhr = new XMLHttpRequest()\n\n  xhr.open(params.method || 'GET', params.url)\n\n  // Use requestHeader: null to prevent assignment of requestHeader.\n  if (params.requestHeader !== null) {\n\n    const requestHeader = {\n      'Content-Type': 'application/json'\n    }\n  \n    Object.assign(requestHeader, params.requestHeader || {})\n  \n    Object.entries(requestHeader).forEach(entry=>xhr.setRequestHeader(...entry))\n  }\n\n  xhr.responseType = params.responseType || 'json'\n\n  xhr.onload = e => {\n\n    if (e.target.status >= 400) {\n      reject(new Error(e.target.status))\n      return;\n    }\n\n    // Cache the response in the requestMap\n    params.cache && requestMap.set(params, e.target.response)\n\n    resolve(params.resolveTarget ? e.target : e.target.response)\n    \n  }\n\n  // xhr.onerror = err => {\n  //   console.error(err)\n  //   reject(err);\n  // };\n\n  xhr.send(params.body)\n\n})", "// import from node modules\nimport {render, html, svg} from 'uhtml'\n\nconst areSetsEqual = (a, b) => a.size === b.size && [...a].every(value => b.has(value))\n\n// local import\nimport clone from './clone.mjs'\n\nimport csvDownload from './csvDownload.mjs'\n\nconst compose = (...fns) => {\n  return arg => fns.reduce((acc, fn) => {\n    return fn(acc);\n  }, arg)\n}\n\n// Import ol script through scrit tag in promise.\nconst olScript = async() => await new Promise(async resolve => {\n\n  const script = document.createElement('script')\n\n  script.type = 'application/javascript'\n\n  script.src = 'https://cdn.jsdelivr.net/npm/ol@v8.1.0/dist/ol.js'\n\n  script.onload = resolve\n\n  document.head.append(script)\n\n  console.warn('Openlayers library loaded from script tag.')\n})\n\nimport convert from './convert.mjs'\n\nimport {copyToClipboard} from './copyToClipboard.mjs'\n\nimport {dataURLtoBlob} from './dataURLtoBlob.mjs'\n\nimport {default as hexa} from './hexa.mjs'\n\nimport * as featureFormats from './featureFormats.mjs'\n\nimport loadPlugins from './loadPlugins.mjs'\n\nimport getCurrentPosition from './getCurrentPosition.mjs'\n\nimport merge from './merge.mjs'\n\nimport paramString from './paramString.mjs'\n\nimport promiseAll from './promiseAll.mjs'\n\nimport queryParams from './queryParams.mjs'\n\nimport style from './style.mjs'\n\nimport * as svgSymbols from './svgSymbols.mjs'\n\nimport * as gazetteer from './gazetteer.mjs'\n\nimport {default as verticeGeoms} from './verticeGeoms.mjs'\n\nimport xhr from './xhr.mjs'\n\nexport default {\n  render,\n  html,\n  svg,\n  convert,\n  areSetsEqual,\n  clone,\n  compose,\n  copyToClipboard,\n  csvDownload,\n  dataURLtoBlob,\n  featureFormats,\n  gazetteer,\n  getCurrentPosition,\n  hexa,\n  loadPlugins,\n  merge,\n  olScript,\n  paramString,\n  promiseAll,\n  queryParams,\n  style,\n  svgSymbols,\n  verticeGeoms,\n  xhr,\n}", "const hooks = {\n  current: {\n    layers: [],\n    locations: [],\n  },\n  set,\n  parse,\n  remove,\n  removeAll,\n  push,\n  filter,\n}\n\nexport default hooks;\n\nfunction parse() {\n  \n  const url = new URL(window.location.href);\n\n  // Iterate over the search parameters\n  for (const [key, value] of url.searchParams.entries()) {\n    // string 'false' should be boolean false\n    if (value === 'false') {\n      hooks.current[key] = false;\n      continue;\n    }\n    // string 'true' should be boolean true\n    if (value === 'true') {\n      hooks.current[key] = true;\n      continue;\n    }\n    // layers and locations should always be arrays\n    if (key === 'locations' || key === 'layers') {\n      hooks.current[key] = decodeURIComponent(value).split(',');\n      continue;\n    }\n\n    hooks.current[key] = value.includes(',') ? decodeURIComponent(value).split(',') : value;\n  }\n\n  // Strip token from url\n  if (hooks.current.token) {\n    url.searchParams.delete('token');\n    window.history.replaceState({}, document.title, url.toString());\n    delete hooks.current.token;\n  }\n}\n\n\n// Add kvp hook to mapp.hooks.current and URI.\nfunction set(_hooks) {\n\n  Object.assign(hooks.current, _hooks)\n\n  pushState()\n}\n\n// Remove hook from mapp.hooks.current and URI.\nfunction remove(key) {\n\n  if (Array.isArray(hooks.current[key])) {\n\n    hooks.current[key].length = 0\n\n  } else {\n\n    delete hooks.current[key]\n  }\n\n  pushState()\n}\n\n// Remove all hooks.\nfunction removeAll() {\n\n  Object.keys(hooks.current).forEach(key => remove(key))\n\n  pushState()\n}\n\n// Push key into an array hook.\nfunction push(key, val) {\n\n  if (hooks.current[key]) {\n\n    if (hooks.current[key].indexOf(val) < 0) hooks.current[key].push(val)\n\n  } else {\n\n    hooks.current[key] = [val]\n  }\n\n  pushState()\n}\n\n// Filter key from an array hook.\nfunction filter(key, val) {\n\n  hooks.current[key] = hooks.current[key].filter(el => el !== val)\n\n  pushState()\n}\n\n// Pushes changes to the url parameter.\nfunction pushState() {\n\n  try {\n    window.history.pushState({},\n      document.title,\n      `?${mapp.utils.paramString(hooks.current)}`)\n\n  } catch (me) {\n    console.log(me)\n  }\n}", "export default {\n  save: 'Save',\n  cancel: 'Cancel',\n  confirm_delete: 'Are you sure you want to delete this feature? This cannot be undone.',\n  invalid_geometry: 'Invalid geometry',\n  no_results: 'No results for this search',\n}", "export default {\n  save: 'Speichern',\n  cancel: 'Abbrechen',\n  invalid_geometry: 'Ung\u00FCltige Geometrie',\n  confirm_delete: 'Best\u00E4tigung des L\u00F6schvorgang',\n}", "export default {\n  save: 'Enregister',\n  cancel: 'Annuler',\n  no_results: 'Aucun resultat pour cette recherche',\n}", "export default {\n  save: 'Zapisz',\n  cancel: 'Anuluj',\n  no_results: 'Nic nie znaleziono',\n}", "export default {\n  save: '\u4FDD\u5B58',\n  cancel: '\u30AD\u30E3\u30F3\u30BB\u30EB',\n  no_results: '\u7D50\u679C\u306A\u3057',\n}", "export default {\n  save: '\uC800\uC7A5',\n  cancel: '\uCDE8\uC18C',\n  no_results: '\uAC80\uC0C9\uACB0\uACFC \uC5C6\uC74C',\n}", "export default {\n  save: '\u4FDD\u5B58',\n  cancel: '\u53D6\u6D88',\n  no_results: '\u672A\u627E\u5230\u76F8\u5173\u5730\u70B9', \n}", "import en from './en.mjs'\n\nimport de from './de.mjs'\n\nimport fr from './fr.mjs'\n\nimport pl from './pl.mjs'\n\nimport ja from './ja.mjs'\n\nimport ko from './ko.mjs'\n\nimport zh from './cn.mjs'\n\nexport default {\n  en: en,\n  de: de,\n  fr: fr,\n  pl: pl,\n  ja: ja,\n  ko: ko,\n  zh: zh,\n}", "export default async layer => {\n\n  // Decorate layer format methods.\n  await mapp.layer.formats[layer.format](layer);\n\n  Object.assign(layer, {\n    show,\n    showCallbacks: [],\n    hide,\n    hideCallbacks: [],\n    tableCurrent,\n    tableMax,\n    tableMin,\n    zoomToExtent,\n  });\n\n  // Warn if outdated layer.edit configuration is used.\n  if (layer.edit) {\n    console.warn(`Layer: ${layer.key}, please update edit:{} to use draw:{} as layer.edit has been superseeded with layer.draw to be in line with the OL drawing interaction.`)\n    layer.draw = Object.assign(layer.draw || {}, layer.edit)\n  }\n\n  // Layer must have an empty draw config to allow for role based assignment of drawing methods.\n  layer.draw ??= {}\n\n  // Warn if outdated layer.draw.delete configuration is used.\n  if (layer.draw?.delete) {\n    console.warn(`Layer: ${layer.key}, please move draw.delete to use layer.deleteLocation:true.`)\n  }\n\n  // Callback which creates and stores a location from a feature returned by the drawing interaction.\n  layer.draw.callback = async (feature, params) => {\n\n    // If the feature is null, return.\n    if (!feature) return;\n\n    // Get the current table and set new to true.\n    const location = {\n      layer,\n      table: layer.tableCurrent(),\n      new: true\n    }\n\n    // Store location in database.\n    // The id must be returned from a serial ID field.\n    location.id = await mapp.utils.xhr({\n      method: 'POST',\n      url: `${layer.mapview.host}/api/location/new?` +\n        mapp.utils.paramString({\n          locale: layer.mapview.locale.key,\n          layer: layer.key,\n          table: location.table\n        }),\n      body: JSON.stringify(Object.assign({\n        [layer.geom]: feature.geometry\n      },\n\n        // Assign default properties.\n        params?.defaults || {},\n        layer.draw?.defaults || {}))\n    })\n\n    // Get the newly created location.\n    mapp.location.get(location)\n  }\n\n  // Set layer filter.\n  layer.filter = Object.assign({\n    current: {}\n  }, layer.filter);\n\n  // Set layer opacity from style.\n  layer.L.setOpacity(layer.style?.opacity || 1);\n\n  // Layer style has multiple hovers and a single hover (incorrect configuration)\n  if (layer.style?.hovers && layer.style?.hover) {\n\n    console.warn(`Layer: ${layer.key}, cannot use both layer.style.hover and layer.style.hovers. Layer.style.hover has been deleted.`)\n    delete layer.style.hover;\n  }\n\n  // Layer style has multiple labels and a single label (incorrect configuration)\n  if (layer.style?.labels && layer.style?.label) {\n\n    console.warn(`Layer: ${layer.key}, cannot use both layer.style.label and layer.style.labels. Layer.style.label has been deleted.`)\n    delete layer.style.label;\n  }\n\n  // Layer style has multiple themes.\n  if (layer.style?.themes) {\n\n    // Keep object theme.\n    layer.style.theme = typeof layer.style.theme === 'object' ? layer.style.theme\n\n      // Assign theme from key [string], or first theme.\n      : layer.style.themes[layer.style.theme || Object.keys(layer.style.themes)[0]];\n  }\n\n  // If setLabel is included and labels object exists.\n  if (layer.style?.theme?.setLabel && layer.style?.labels) {\n\n    // Swap the label based on the setLabel key.\n    layer.style.label = layer.style.labels[layer.style.theme.setLabel]\n  }\n\n    // Warn if outdated layer.hover configuration is used.\n  // Set layer.style.hover and remove layer.hover.\n  if (layer.hover) {\n\n    console.warn(`Layer: ${layer.key}, layer.hover{} should be defined within layer.style{}.`)\n    layer.style.hover = layer.hover;\n    delete layer.hover;\n  }\n\n  // If setHover is included and hovers object exists.\n  if (layer.style?.theme?.setHover && layer.style?.hovers) {\n\n    // Swap the hover based on the setHover key.\n    layer.style.hover = layer.style.hovers[layer.style.theme.setHover]\n  }\n\n\n  // Layer style has multiple hovers\n  if (layer.style?.hovers) {\n\n    // Keep object hover.\n    layer.style.hover = typeof layer.style.hover === 'object' ? layer.style.hover\n\n      // Assign label from key [string], or first label.\n      : layer.style.hovers[layer.style.hover || Object.keys(layer.style.hovers)[0]];\n  }\n\n  if (layer.style?.hover) {\n\n    // Assign default featureHover method if non is provided.\n    layer.style.hover.method ??= mapp.layer.featureHover;\n  }\n\n  // Layer style has multiple labels.\n  if (layer.style?.labels) {\n\n    // Keep object label.\n    layer.style.label = typeof layer.style.label === 'object' ? layer.style.label\n\n      // Assign label from key [string], or first label.\n      : layer.style.labels[layer.style.label || Object.keys(layer.style.labels)[0]];\n  }\n\n  // Check if the mapp.user.roles array exists and is an array\n  if (Array.isArray(mapp.user?.roles)) {\n\n    // Iterate through each role in the layer.roles object\n    for (const role in layer.roles || {}) {\n\n      // Check if the role is an object and not null\n      if (layer.roles[role] !== null && typeof layer.roles[role] === 'object') {\n\n        // Extract the role name from negated roles (e.g., \"!role\" becomes \"role\")\n        const negatedRole = role.match(/(?<=^!)(.*)/g)?.[0];\n\n        // Check if the role is included in mapp.user.roles\n        if (mapp.user.roles.includes(role)) {\n\n          // Merge the role object with the layer\n          mapp.utils.merge(layer, layer.roles[role]);\n        }\n\n        // Check if the negated role is not included in mapp.user.roles\n        else if (negatedRole && !mapp.user.roles.includes(negatedRole)) {\n\n          // Merge the role object with the layer.\n          mapp.utils.merge(layer, layer.roles[role]);\n        }\n      }\n    }\n\n    // Adjust infoj entries for user roles.\n    layer.infoj?.filter(entry => typeof entry.roles === 'object').forEach(entry => {\n      for (const role in entry.roles) {\n\n        // Check if the role is an object\n        if (typeof entry.roles[role] === 'object') {\n          // Extract the role name from negated roles (e.g., \"!admin\" becomes \"admin\")\n          const roleName = role.match(/(?<=^!)(.*)/g)?.[0];\n\n          // Check if the role is included in 'mapp.user.roles'\n          if (mapp.user.roles.includes(role)) {\n            // Merge the role object with the entry\n            mapp.utils.merge(entry, entry.roles[role]);\n          }\n          // Check if the negated role is not included in 'mapp.user.roles'\n          else if (roleName && !mapp.user.roles.includes(roleName)) {\n            // Merge the role object with the entry\n            mapp.utils.merge(entry, entry.roles[role]);\n          }\n        }\n      }\n    });\n  }\n\n  // Call layer and/or plugin methods.\n  Object.keys(layer).forEach((key) => {\n\n    // Check for layer method matching the layer key.\n    mapp.layer[key]?.(layer);\n\n    // Or plugin method and provide the layer object as argument.\n    mapp.plugins[key]?.(layer);\n\n    // It is possible to have a plugin method of the same name as a layer method.\n  });\n\n  return layer;\n}\n\nfunction show() {\n\n  // Show the layer\n  this.display = true;\n\n  try {\n    // Add layer to map\n    this.mapview.Map.addLayer(this.L);\n  } catch {\n    // Will catch assertation error when layer is already added.\n  }\n\n  // Reload layer data if available.\n  this.reload instanceof Function && this.reload();\n\n  // Add layer attribution to mapview attribution.\n  this.mapview.attribution?.check();\n\n  // Push the layer into the layers hook array.\n  this.mapview.hooks && mapp.hooks.push('layers', this.key);\n\n  // Execute showCallbacks\n  this.showCallbacks?.forEach(fn => fn instanceof Function && fn(this));\n}\n\nfunction hide() {\n\n  // Hide the layer.\n  this.display = false;\n\n  // Remove OL layer from mapview.\n  this.mapview.Map.removeLayer(this.L);\n\n  // Remove layer attribution from mapview attribution.\n  this.mapview.attribution?.check();\n\n  // Filter the layer from the layers hook array.\n  this.mapview.hooks && mapp.hooks.filter('layers', this.key);\n\n  // Execute hideCallbacks\n  this.hideCallbacks?.forEach(fn => fn instanceof Function && fn(this));\n}\n\nfunction tableCurrent() {\n\n  // Return the current table if it exists.\n\n  // A layer must have either a table or tables configuration.\n  if (!this.tables) return this.table;\n\n  let table;\n\n  // Get current zoom level from mapview.\n  const zoom = parseInt(this.mapview.Map.getView().getZoom());\n\n  // Get zoom level keys from layer.tables object.\n  const zoomKeys = Object.keys(this.tables);\n\n  // Get first zoom level key from array.\n  const minZoomKey = parseInt(zoomKeys[0]);\n  const maxZoomKey = parseInt(zoomKeys[zoomKeys.length - 1]);\n\n  // Get the table for the current zoom level.\n  table = this.tables[zoom];\n\n  // Get the first table if the current zoom level is smaller than the min.\n  table = zoom < minZoomKey ? this.tables[minZoomKey] : table;\n\n  // Get the last table if the current zoom level is larger than the max.\n  table = zoom > maxZoomKey ? this.tables[maxZoomKey] : table;\n\n  return table;\n}\n\nfunction tableMax() {\n\n  // Returns the max table\n\n  // A layer must have either a table or tables configuration.\n  if (!this.tables) return this.table;\n\n  // Return first value from (reversed) tables object which is not null.\n  return Object.values(this.tables).reverse().find(val => !!val);\n}\n\nfunction tableMin() {\n\n  // Returns the min table.\n\n  // A layer must have either a table or tables configuration.\n  if (!this.tables) return this.table;\n\n  // Return first value from tables object which is not null.\n  return Object.values(this.tables).find(val => !!val);\n}\n\nasync function zoomToExtent(params) {\n\n  // Zooms to a specific extent\n\n  // XMLHttpRequest to layer extent endpoint\n  let response = await mapp.utils.xhr(`${this.mapview.host}/api/query/layer_extent?` +\n    mapp.utils.paramString({ // build query string for the url\n      dbs: this.dbs,\n      locale: this.mapview.locale.key,\n      layer: this.key,\n      table: this.table || Object.values(this.tables)[0] || Object.values(this.tables)[1],\n      geom: this.geom,\n      proj: this.srid,\n      srid: this.mapview.srid,\n      filter: this.filter.current\n    })\n  );\n\n  // If failed to fetch response\n  if (!response) {\n    return false;\n  }\n\n  // re matches text in parentheses\n  const bounds = /\\((.*?)\\)/.exec(response.box2d)[1].replace(/ /g, ',');\n\n  this.mapview.fitView( // fit the map view within bounds \n    bounds.split(',').map( // get a float array of bounds\n      coords => parseFloat(coords)\n    ),\n    params\n  );\n\n  return true;\n}", "let promise, maplibregl = null\n\nasync function MaplibreGL() {\n\n  if (maplibregl) return new maplibregl.Map(...arguments);\n\n  if (!promise) promise = new Promise(async resolve => {\n\n    console.warn(`The mbtiles layer format uses an outdated version of the maplibre-gl library. Please change the format to maplibre`)\n\n    Promise\n      .all([\n        import('https://cdn.skypack.dev/pin/maplibre-gl@v1.15.3-OFxGDsJNZ70P0Qa7CzNE/mode=imports,min/optimized/maplibre-gl.js')\n      ])\n      .then(imports => {\n  \n        maplibregl = imports[0]\n\n        resolve()\n      })\n      .catch(error => {\n        console.error(error.message)\n        alert('Failed to load MaplibreGL library. Please reload the browser.')\n      })\n  \n  })\n\n  await promise\n\n  return new maplibregl.Map(...arguments);\n}\n\nexport default async layer => {\n\n  layer.container = mapp.utils.html.node`<div \n    class=\"mbtiles\" \n    style=\"visibility: hidden; position: absolute; width: 100%; height: 100%;\">`\n  \n  layer.mapview.Map.getTargetElement().prepend(layer.container)\n\n  layer.Map = await MaplibreGL({\n    container: layer.container,\n    style: layer.mbStyle,\n    accessToken: layer.accessToken,\n    attributionControl: false,\n    boxZoom: false,\n    doubleClickZoom: false,\n    dragPan: false,\n    dragRotate: false,\n    interactive: false,\n    keyboard: false,\n    pitchWithRotate: false,\n    scrollZoom: false,\n    touchZoomRotate: false,\n    preserveDrawingBuffer: layer.preserveDrawingBuffer\n  });\n\n  layer.L =  new ol.layer.Layer({\n    zIndex: layer.zIndex || 0,\n    render: frameState => {\n\n      if (!layer.display) return\n\n      layer.container.style.visibility = 'visible';\n      \n      // adjust view parameters in mapbox\n      layer.Map.jumpTo({\n        center: ol.proj.toLonLat(frameState.viewState.center),\n        zoom: frameState.viewState.zoom - 1,\n        bearing: (-frameState.viewState.rotation * 180) / Math.PI,\n        animate: false\n      })\n\n      return layer.container;\n    }\n  })\n\n  // The Maplibre Map control must resize with mapview Map targetElement.\n  layer.mapview.Map.getTargetElement().addEventListener('resize', ()=>layer.Map.resize())\n\n}", "let promise, maplibregl = null\n\nasync function MaplibreGL() {\n\n  if (maplibregl) return new maplibregl.Map(...arguments);\n\n  if (!promise) promise = new Promise(async resolve => {\n\n    if (window.maplibregl) {\n\n      maplibregl = window.maplibregl\n\n      resolve()\n  \n      return\n    }\n\n    Promise\n      .all([\n        import('https://cdn.skypack.dev/pin/maplibre-gl@v3.3.1-tpQnCWSKVKnsrj9mKNGz/mode=imports,min/optimized/maplibre-gl.js')\n      ])\n      .then(imports => {\n \n        maplibregl = imports[0]\n\n        // Avoid loading RTL Text Plugin twice, else it will error\n        if (![\"deferred\", \"loaded\"].includes(maplibregl.getRTLTextPluginStatus())) {\n          maplibregl.setRTLTextPlugin(\n            'https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js',\n            null,\n            true // Lazy load the plugin\n          );\n        }\n\n        resolve()\n      })\n      .catch(error => {\n        console.error(error.message)\n        alert('Failed to load MaplibreGL library. Please reload the browser.')\n      })\n  \n  })\n\n  await promise\n\n\n  return new maplibregl.Map(...arguments);\n}\n\nexport default async layer => {\n\n  layer.container = mapp.utils.html.node`<div \n    class=\"maplibre\" \n    style=\"visibility: hidden; position: absolute; width: 100%; height: 100%;\">`\n  \n  layer.mapview.Map.getTargetElement().prepend(layer.container)\n\n  layer.Map = await MaplibreGL({\n    container: layer.container,\n    pixelRatio: 1,\n    style: layer.style.URL,\n    attributionControl: false,\n    boxZoom: false,\n    doubleClickZoom: false,\n    dragPan: false,\n    dragRotate: false,\n    interactive: false,\n    keyboard: false,\n    pitchWithRotate: false,\n    scrollZoom: false,\n    touchZoomRotate: false,\n    preserveDrawingBuffer: layer.preserveDrawingBuffer,\n    transformRequest: (url, resourceType) => {\n\n      if (url.indexOf('mapbox:') === 0) {\n        return transformMapboxUrl(url, resourceType, layer.accessToken)\n      }\n      \n      // Do any other transforms you want\n      return {url}\n    }\n  });\n\n  // The Maplibre Map control must resize with mapview Map targetElement.\n  layer.mapview.Map.getTargetElement().addEventListener('resize', ()=>layer.Map.resize())\n\n  layer.L =  new ol.layer.Layer({\n    zIndex: layer.zIndex || 0,\n    render: frameState => {\n\n      if (!layer.display) return\n\n      layer.container.style.visibility = 'visible';\n      \n      // adjust view parameters in mapbox\n      layer.Map.jumpTo({\n        center: ol.proj.toLonLat(frameState.viewState.center),\n        zoom: frameState.viewState.zoom - 1,\n        bearing: (-frameState.viewState.rotation * 180) / Math.PI,\n        animate: false\n      })\n\n      return layer.container;\n    }\n  })\n\n}\n\n// transformMapboxUrl and supporting functions are taken from https://github.com/rowanwins/maplibregl-mapbox-request-transformer\n\nfunction transformMapboxUrl(url, resourceType, accessToken) {\n  \n  if (url.indexOf('/styles/') > -1 && url.indexOf('/sprite') === -1) {\n    return {\n      url: normalizeStyleURL(url, accessToken)\n    }\n  }\n\n  if (url.indexOf('/sprites/') > -1) {\n    return {\n      url: normalizeSpriteURL(url, accessToken)\n    }\n  }\n\n  if (url.indexOf('/fonts/') > -1) {\n    return {\n      url: normalizeGlyphsURL(url, accessToken)\n    }\n  }\n\n  if (url.indexOf('/v4/') > -1) {\n    return {\n      url: normalizeSourceURL(url, accessToken)\n    }\n  }\n\n  if (resourceType === 'Source') {\n    return {\n      url: normalizeSourceURL(url, accessToken)\n    }\n  }\n}\n\nfunction parseUrl(url) {\n\n  const parts = url.match(/^(\\w+):\\/\\/([^/?]*)(\\/[^?]+)?\\??(.+)?/);\n\n  if (!parts) {\n    throw new Error('Unable to parse URL object');\n  }\n\n  return {\n    protocol: parts[1],\n    authority: parts[2],\n    path: parts[3] || '/',\n    params: parts[4] ? parts[4].split('&') : []\n  };\n}\n\nfunction formatUrl(urlObject, accessToken) {\n\n  const apiUrlObject = parseUrl('https://api.mapbox.com');\n\n  urlObject.protocol = apiUrlObject.protocol;\n  urlObject.authority = apiUrlObject.authority;\n  urlObject.params.push(`access_token=${accessToken}`);\n\n  const params = urlObject.params.length ? `?${urlObject.params.join('&')}` : '';\n\n  return `${urlObject.protocol}://${urlObject.authority}${urlObject.path}${params}`;\n}\n\nfunction normalizeStyleURL(url, accessToken) {\n\n  const urlObject = parseUrl(url);\n\n  urlObject.path = `/styles/v1${urlObject.path}`;\n\n  return formatUrl(urlObject, accessToken);\n}\n\nfunction normalizeGlyphsURL(url, accessToken) {\n\n  const urlObject = parseUrl(url);\n\n  urlObject.path = `/fonts/v1${urlObject.path}`;\n\n  return formatUrl(urlObject, accessToken);\n}\n\nfunction normalizeSourceURL(url, accessToken) {\n\n  const urlObject = parseUrl(url);\n\n  urlObject.path = `/v4/${urlObject.authority}.json`;\n  urlObject.params.push('secure');\n\n  return formatUrl(urlObject, accessToken);\n}\n\nfunction normalizeSpriteURL(url, accessToken) {\n\n  const urlObject = parseUrl(url);\n  const path = urlObject.path.split('.');\n\n  urlObject.path = `/styles/v1${path[0]}/sprite.${path[1]}`;\n\n  return formatUrl(urlObject, accessToken);\n}", "export default layer => {\n\n  layer.L = new ol.layer.Tile({\n    source: new ol.source.OSM({\n      url: decodeURIComponent(layer.URI),\n      opaque: false,\n      transition: 0,\n    }),\n    layer: layer,\n    zIndex: layer.style?.zIndex || 0\n  })\n\n}", "export default layer => {\n\n  // Assign default SRID if nullish.\n  layer.srid ??= '3857'\n\n  // Assign empty style object if nullish.\n  layer.style ??= {}\n\n  layer.reload = () => {\n\n    //layer.source.clear()\n    layer.source.refresh()\n    layer.tilesLoaded = []\n    layer.featureSource.refresh()\n  }\n\n  layer.clones = new Set()\n\n  // The snapSource is required for snap interactions on vector tile layer.\n  // The featureClasss is detrimental to the render performance.\n  layer.featureSource = new ol.source.VectorTile({\n    format: new ol.format.MVT({\n      featureClass: ol.Feature,\n      //idProperty: 'id'\n    }),\n    transition: 0,\n    cacheSize: 0,\n    tileUrlFunction\n  })\n \n  // Define source for mvt layer.\n  layer.source = new ol.source.VectorTile({\n    format: new ol.format.MVT(),\n    transition: 0,\n    cacheSize: 0,\n    tileUrlFunction\n  })\n\n  function tileUrlFunction(tileCoord) {\n\n    const tableZ = layer.tableCurrent()\n\n    if ((!tableZ || !layer.display) && !layer.clones?.size) return layer.source.clear()\n\n    const url = `${layer.mapview.host}/api/layer/mvt/${tileCoord[0]}/${tileCoord[1]}/${tileCoord[2]}?` + mapp.utils.paramString({\n      locale: layer.mapview.locale.key,\n      layer: layer.key,\n      srid: layer.mapview.srid,\n      table: tableZ,\n      filter: layer.filter?.current\n    })\n\n    return url\n  }\n\n  layer.L = new ol.layer.VectorTile({\n    key: layer.key,\n    source: layer.source,\n    renderBuffer: 200,\n    //renderMode: 'vector',\n    zIndex: layer.style?.zIndex || 1,\n    style: mapp.layer.Style(layer)\n  })\n\n}", "export default layer => {\n\n  // 3857 is assumed to be the default SRID for all vector format layer.\n  layer.srid ??= '3857'\n\n  if (layer.properties) {\n    console.warn(`Layer: ${layer.key}, layer.properties{} are no longer required for wkt & geojson datasets.`)\n  }\n\n  // Set default layer params if nullish.\n  layer.params ??= {}\n\n  clusterConfig(layer)\n\n  // Assign style object if nullish.\n  layer.style ??= {};\n\n  layer.setSource = (features) => {\n\n    // The layer datasource is empty.\n    if (features === null) {\n\n      layer.L.setSource(null)\n      return;\n    }\n\n    if (!features) return;\n\n    layer.source = new ol.source.Vector({\n      features: mapp.utils.featureFormats[layer.format](layer, [features].flat())\n    })\n\n    delete layer.xhr\n\n    if (layer.fade) mapp.layer.fade(layer)\n\n    // Geojson is a cluster layer.\n    if (layer.cluster?.distance) {\n\n      // Create cluster source.\n      layer.cluster.source = new ol.source.Cluster({\n        distance: layer.cluster.distance,\n        source: layer.source\n      })\n\n      layer.L.setSource(layer.cluster.source)\n      return;\n    }\n\n    // Set source if not cluster\n    layer.L.setSource(layer.source)\n  }\n\n  layer.reload = () => {\n\n    // Do not reload the layer if features have been assigned.\n    if (layer.features) return;\n\n    const table = layer.tableCurrent()\n\n    if (!table) return;\n\n    if (layer.fade) mapp.layer.fade(layer, true)\n\n    // Create a set of feature properties for styling.\n    layer.params.fields = [...new Set([\n      // Array.isArray(layer.style.theme?.fields) ?\n      //   layer.style.theme.fields : layer.style.theme?.field,\n      layer.style.theme?.field,\n      layer.style.label?.field,\n      layer.cluster?.label\n    ].flat().filter(field => !!field))]\n\n\n    const bounds = layer.mapview.getBounds()\n\n    // Assign current viewport if queryparam is truthy.\n    layer.params.viewport &&= [bounds.west, bounds.south, bounds.east, bounds.north, layer.mapview.srid];\n\n    // Assign current viewport if queryparam is truthy.\n    layer.params.z &&= layer.mapview.Map.getView().getZoom();\n\n    clearTimeout(layer.timeout)\n\n    layer.timeout = setTimeout(() => {\n\n      layer.xhr = mapp.utils.xhr(\n        `${layer.mapview.host}/api/query?${mapp.utils.paramString({\n          template: layer.params.template || layer.format,\n          locale: layer.mapview.locale.key,\n          layer: layer.key,\n          table,\n          srid: layer.srid,\n          filter: layer.filter?.current,\n          ...layer.params\n        })}`)\n        .then(layer.setSource)\n\n    }, 100)\n\n  }\n\n  // Create Openlayer Vector Layer\n  layer.L = new ol.layer[layer.vectorImage && 'VectorImage' || 'Vector']({\n    key: layer.key,\n    zIndex: layer.zIndex || 1,\n    style: layer.styleFunction || mapp.layer.Style(layer)\n  })\n\n  layer.setSource(layer.features)\n\n  // Add event listener to reload layer for viewport or layer.tables on changeEnd.\n  if (layer.tables || layer.params.viewport) {\n\n    layer.mapview.Map.getTargetElement().addEventListener('changeEnd', () => {\n\n      // Layer is outside of tables zoom range.\n      if (!layer.tableCurrent()) {\n        layer.L.setSource(null)\n        return;\n      }\n\n      if (!layer.display) return;\n\n      clearTimeout(layer.timeout)\n\n      layer.timeout = setTimeout(layer.reload, 100)\n    })\n  }\n\n  // Change method for the cluster feature properties and layer stats.\n  layer.cluster?.distance && layer.L.on('change', e => {\n\n    // To prevent layer.L.change() from crashing if called before data is loaded.\n    if (!layer.cluster.source) return;\n\n    delete layer.max_size;\n\n    const feature_counts = layer.cluster.source.getFeatures().map(F => {\n\n      const features = F.get('features')\n\n      // Set cluster feature id for highlight interaction.\n      F.set('id', features[0].get('id'), true)\n\n      if (features.length > 1) {\n\n        // Set cluster count.\n        F.set('count', features.length, true)\n\n      } else {\n\n        let fP = features[0].getProperties()\n\n        // Set feature properties for for single location cluster.\n        Object.entries(fP.properties || {}).forEach(entry => {\n          F.set(entry[0], entry[1], true)\n        })\n\n      }\n\n      // Return length for calculation of max_size.\n      return features.length\n    })\n\n    if (!feature_counts.length) return;\n\n    // Calculate max_size for cluster size styling.\n    layer.max_size = Math.max(...feature_counts)\n  })\n}\n\nfunction clusterConfig(layer) {\n\n  // The clusterConfig can not work without the layer having a cluster config object.\n  if (typeof layer.cluster !== 'object') return;\n\n  // Check if both cluster.distance and cluster.resolution are set.\n  if (layer.cluster.distance && layer.cluster.resolution) {\n    console.warn(`Layer: ${layer.key}, cluster.distance and cluster.resolution are mutually exclusive. You cannot use them both on the same layer. Please remove one of them. `)\n    return;\n  };\n\n  // Check if neither cluster.distance and cluster.resolution are set.\n  if (!layer.cluster.distance && !layer.cluster.resolution) {\n    console.warn(`Layer: ${layer.key}, cluster.distance or cluster.resolution must be set.`)\n    return;\n  };\n\n  // If cluster.resolution is used, the layer srid must be set to 3857.\n  if (layer.cluster.resolution) {\n\n    // Check if resolution is numeric.\n    if (typeof layer.cluster.resolution === 'number') {\n      // Assign resolution as float.\n      layer.params.resolution = parseFloat(layer.cluster.resolution);\n    } \n    // Otherwise, warn and return.\n    else {\n      console.warn(`Layer: ${layer.key}, cluster.resolution must be a number.`)\n      return;\n    }\n\n    // Check if srid is set to 4326, not allowed for cluster layer\n    if (layer.srid === '4326') {\n      console.warn(`Layer: ${layer.key}, srid 4326 is not allowed for cluster.resolution layers.`)\n      return;\n    };\n\n    // Provide default params for resolution cluster.\n    layer.params.viewport = true;\n    layer.params.z = true;\n\n    // Format is cluster if resolution is set.\n    layer.format = 'cluster';\n\n    // Assign default template.\n    layer.params.template ??= layer.cluster.hexgrid ? 'cluster_hex' : 'cluster';\n  }\n}", "import mbtiles from './mbtiles.mjs'\n\nimport maplibre from './maplibre.mjs'\n\nimport tiles from './tiles.mjs'\n\nimport mvt from './mvt.mjs'\n\nimport vector from './vector.mjs'\n\nexport default {\n  mbtiles,\n  maplibre,\n  tiles,\n  mvt,\n  cluster: vector,\n  geojson: vector,\n  wkt: vector,\n  vector\n}", "export default function fade(layer, out) {\n\n    if (!layer?.fade) return;\n\n    // Clear current fade process.\n    clearTimeout(layer.fade);\n\n    // Get current opacity.\n    const currentOpacity = layer.L.getOpacity();\n\n    let targetOpacity;\n\n    if (out) {\n        // Layer is completely transparent.\n        if (currentOpacity <= 0) return;\n\n        // Reduce opacity by 20%.\n        targetOpacity = Math.max(currentOpacity - 0.2, 0);\n    } else {\n        // Layer is completely opaque.\n        if (currentOpacity >= 1) return;\n\n        // Increase opacity by 20%.\n        targetOpacity = Math.min(currentOpacity + 0.2, 1);\n    }\n\n    const duration = 100; // Animation duration in milliseconds\n\n    const startTime = Date.now();\n    const updateOpacity = () => {\n        //Current time use to calculate the elapsed time. \n        const currentTime = Date.now();\n\n        const elapsedTime = currentTime - startTime;\n\n        //if elapsted time is less than the animation duration then we will use interpolation.\n        if (elapsedTime < duration) {\n            const progress = elapsedTime / duration;\n            const interpolatedOpacity = currentOpacity + (targetOpacity - currentOpacity) * progress;\n            layer.L.setOpacity(interpolatedOpacity);\n\n            // Continue updating opacity.\n            requestAnimationFrame(updateOpacity);\n        } else {\n            // Animation complete, set the final opacity.\n            layer.L.setOpacity(targetOpacity);\n        }\n    };\n\n    // Start the animation.\n    updateOpacity();\n\n    // Set the new fade timeout.\n    layer.fade = setTimeout(() => fade(layer, out), duration);\n}", "export default function (feature, layer) {\n\n  // The hover method must only execute if the display flag is set.\n  if (!layer.style.hover.display) return;\n\n  // Store current highlight (feature) key.\n  const featureKey = layer.mapview.interaction?.current?.key?.toString()\n\n  if (!featureKey) return;\n\n  const paramString = mapp.utils.paramString({\n    dbs: layer.dbs,\n    locale: layer.mapview.locale.key,\n    layer: layer.key,\n    filter: feature.properties.count > 1 && layer.filter?.current,\n    template: layer.style.hover.query || 'infotip',\n    qID: layer.qID,\n    id: feature.properties.id,\n    table: layer.tableCurrent(),\n    geom: layer.geom,\n    field: layer.style.hover.field,\n    coords: feature.properties.count > 1\n      && ol.proj.transform(\n        feature.getGeometry().getCoordinates(),\n        `EPSG:${layer.mapview.srid}`,\n        `EPSG:${layer.srid}`)\n  })\n\n  mapp.utils.xhr(`${layer.mapview.host}/api/query?${paramString}`)\n    .then(response => {\n\n      // Check whether there is a response to display.\n      if (!response) return;\n\n      if (typeof layer.style.hover.render === 'function') {\n\n        const content = layer.style.hover.render(response)\n        layer.mapview.infotip(content)\n        return;\n      }\n\n      // Check whether the response label field has a value.\n      if (response.label == '') return;      \n\n      // Check whether highlight feature is still current.\n      if (layer.mapview.interaction?.current?.key !== featureKey) return;\n\n      // Display the response label as infotip.\n      layer.mapview.infotip(response.label)\n    })\n}", "const filter = {\n  ni\n}\n\nexport default function(filters, feature) {\n\n  // check whether at least one filter catches feature.\n  return Object.keys(filters).some(key => {\n\n    // get feature type from first key.\n    let type = Object.keys(filters[key])[0]\n\n    // return filter method if exists.\n    return filter[type] && filter[type](key, filters[key][type], feature)\n  })\n}\n\nfunction ni(key, ni, feature) {\n\n  // check whether feature properties key is in ni set.\n  return new Set(ni).has(feature.properties[key])\n}", "export default layer => {\n\n  layer.style.default ??= {\n    strokeColor: '#333',\n    fillColor: '#fff1',\n    icon: {\n      type: 'dot'\n    }\n  }\n\n  return function Style(feature) {\n\n    // Check for and return existing Styles object.\n    const Styles = feature.get('Styles')\n    if (Styles) return Styles\n\n    feature.properties = feature.getProperties()\n\n    // Geojson features have a properties property\n    if (feature.properties.properties) {\n\n      Object.assign(feature.properties, feature.properties.properties)\n      delete feature.properties.properties\n    }\n\n    // A filter flag is set either in the layer styles object or in the theme.\n    if ((layer.style.filter || layer.style.theme?.filter)\n\n      // The current filter contains field keys.\n      && layer.filter.current && Object.keys(layer.filter.current).length\n\n      // Check whether the feature should be caught by layer feature filter.\n      && mapp.layer.featureFilter(layer.filter.current, feature)) {\n\n      // The feature will not be visible.\n      return null\n    }\n\n    // Assign default style as feature.style.\n    feature.style = { ...mapp.utils.clone(layer.style.default), ...layer.style.theme?.style }\n\n    // Check whether feature is in lookup.\n    if (Array.isArray(layer.featureLookup)) {\n\n      // Find feature with matching ID property in the featureLookup\n      const lookupFeature = layer.featureLookup.find(f => f[layer.featureLookupId || 'id'] === feature.properties.id)\n\n      // Do not style features not found in the lookup array.\n      if (!lookupFeature) return;\n\n      // Assign feature.properties from the lookupFeature for subsequent styling\n      Object.assign(feature.properties, lookupFeature)\n\n    }\n\n    // Assign geometryType from geometry.\n    feature.geometryType ??= feature.getGeometry().getType();\n\n    // Point features must have a style.icon\n    if (feature.geometryType === 'Point') {\n\n      // The style must be cloned as icon if not otherwise defined to prevent circular reference\n      feature.style.icon ??= mapp.utils.clone(feature.style)\n\n      // Assign cluster style.\n      if (feature.properties.count > 1 && layer.style.cluster) {\n\n        Object.assign(feature.style, layer.style.cluster)\n      }\n    }\n\n    // Apply theme style to style object.\n    mapp.layer.themes[layer.style.theme?.type]?.(layer.style.theme, feature)\n\n    // Style point features.\n    pointStyle(feature)\n\n    // Assign highlight style if required.\n    highlightStyle(feature)\n\n    // Assign label style if required.\n    labelStyle(feature)\n\n    // Check whether the feature referenced in mapview.locations\n    if (layer.mapview?.locations[`${layer.key}!${feature.properties.id}`]) {\n\n      // The feature geometry should not be displayed.\n      if (layer.style.selected === null) return;\n\n      if (layer.style.selected) {\n\n        mapp.utils.merge(feature.style, layer.style.selected, {\n          zIndex: Infinity,\n        });\n      }\n    }\n\n    return mapp.utils.style(feature.style, feature)\n  }\n\n  function pointStyle(feature) {\n\n    if (feature.geometryType !== 'Point') return;\n\n    // Cluster icons will NOT scale different to single locations if the clusterScale is not set in the cluster style.\n    if (feature.style.clusterScale) {\n\n      // The clusterScale will be added to the icon scale.\n      feature.style.clusterScale = layer.style.logScale ?\n\n        // A natural log will be applied to the cluster scaling.\n        Math.log(feature.style.clusterScale) / Math.log(layer.max_size) * Math.log(feature.properties.size || feature.properties.count) :\n\n        // A fraction of the icon clusterScale will be added to the items scale for all but the biggest cluster location.\n        1 + (feature.style.clusterScale / layer.max_size * (feature.properties.size || feature.properties.count))\n    }\n\n    // Setting a zoomInScale will INCREASE the scale of icons on higher zoom levels.\n    if (feature.style.zoomInScale) {\n\n      feature.style.zoomInScale *= layer.mapview.Map.getView().getZoom()\n    }\n\n    // Setting a zoomOutScale will DECREASE the scale of icons on higher zoom levels.\n    if (feature.style.zoomOutScale) {\n\n      feature.style.zoomOutScale /= layer.mapview.Map.getView().getZoom()\n    }\n  }\n\n  function highlightStyle(feature) {\n\n    // Layer must have a highlight style.\n    if (!layer.style.highlight) return;\n    \n    // Layer must have a highlighted feature stored as layer.highlighted.\n    if (!layer.highlight) return;\n    \n    // The layer.highlight must be a match for the feature ID.\n    if (layer.highlight !== (feature.get('id') || feature.getId())) return;\n\n    if (feature.geometryType !== 'Point') {\n\n      // Merge highlight with feature style for non point features.\n      mapp.utils.merge(feature.style, layer.style.highlight)\n      return;\n    }\n\n    // Highlighted point features should be drawn on top.\n    feature.style.zIndex = Infinity\n\n    if (layer.style.highlight.icon) {\n\n      feature.style.icon = Array.isArray(layer.style.highlight.icon)\n\n        // Array icon styles must not be assigned.\n        ? layer.highlight.icon\n        : Object.assign(feature.style.icon, layer.style.highlight.icon)\n    }\n\n    // The highlight scale is defined as scale in the highlight style block.\n    feature.style.highlightScale = layer.style.highlight.scale\n  }\n\n  function labelStyle(feature) {\n\n    // The label must be displayed.\n    if (!layer.style.label?.display) return;\n\n    // Merge layer label style into feature.style.\n    mapp.utils.merge(feature.style, { label: layer.style.label })\n\n    // Assign count value as text if label.count is truthy.\n    feature.style.label.text = feature.style.label.count && feature.properties.count > 1 && feature.properties.count || undefined\n\n    // Assign field property value as label if text is undefined.\n    if (typeof feature.style.label.text === 'undefined') {\n      feature.style.label.text = feature.properties[feature.style.label.field];\n    }\n\n    // Assign label property value as label if text is undefined.\n    if (typeof feature.style.label.text === 'undefined') {\n      feature.style.label.text = feature.properties.label;\n    }\n\n    // Delete style.label if minZoom exceeds current zoom.\n    feature.style.label?.minZoom > layer.mapview.Map.getView().getZoom() && delete feature.style.label;\n\n    // Delere style.label if current zoom exceeds maxZoom.\n    feature.style.label?.maxZoom < layer.mapview.Map.getView().getZoom() && delete feature.style.label;\n  }\n}", "export default function (theme, feature) {\n\n  if (feature.style?.icon?.clusterScale) return;\n\n  const catValue = feature.properties.cat || feature.properties[theme.field]\n\n  const catStyle = theme.cat[encodeURIComponent(catValue)]?.style\n    || theme.cat[catValue]?.style\n    || theme.cat[encodeURIComponent(catValue)]\n    || theme.cat[catValue]\n\n  if (typeof catStyle === 'undefined') return;\n\n  if (feature.geometryType === 'Point') {\n\n    // Merge catStyle if icon style is not implicit.\n    feature.style.icon = catStyle.icon || Object.assign(feature.style.icon, catStyle)\n    delete feature.style.icon.url;\n    return;\n  }\n\n  // Merge catStyle for vector features.\n  mapp.utils.merge(feature.style, catStyle)\n}", "export default function(theme, feature) {\n\n  if (!theme.lookup) {\n\n    theme.lookup = {}\n    theme.boxes = []\n    theme.index = 0\n  }\n\n  // The feature field property value already has a style assigned.\n  if (theme.lookup[feature.properties[theme.field]]) {\n\n    // Assign style from lookup object.\n    var catStyle = theme.lookup[feature.properties[theme.field]]\n    mapp.utils.merge(feature.style, catStyle)\n    return;\n  }\n\n  // Get feature bounding box from geometry extent.\n  let bbox = {\n    extent: feature.getGeometry().getExtent()\n  }\n\n  // add box to visual check layer.\n  // theme.source.addFeature(new ol.Feature(new ol.geom.Polygon.fromExtent(bbox.extent)))\n\n  // Find intersecting bounding boxes with their assigned cat index.\n  let intersects = theme.boxes.filter(b => !(bbox.extent[0] > b.extent[2]\n    || bbox.extent[2] < b.extent[0]\n    || bbox.extent[1] > b.extent[3]\n    || bbox.extent[3] < b.extent[1]))\n\n  // Push the current bbox into the array.\n  theme.boxes.push(bbox)\n\n  // Create a set of cat indices from intersecting bounding boxes.\n  let set = new Set(intersects.map(b => b.themeIdx))\n\n  // Increase the cat indix.\n  theme.index++\n\n  // Reset cat index to 0 if the index reaches the length of the cat array.\n  if (theme.index === theme.cat_arr.length) theme.index = 0\n\n  // Check whether the set of intersecting bounding boxes has NOT the cat index.\n  let i = !(set.has(theme.index)) && parseInt(theme.index)\n\n  // Index is not available.\n  if (i === false) {\n\n    // Iterate through the cat array.\n    for (let free = 0; free < theme.cat_arr.length; free++) {\n\n      if (!set.has(free)) {\n\n        // Assign free index and break loop.\n        i = free;\n        break;\n      }\n    }\n  }\n\n  // No index is available.\n  if (i === false) {\n\n    // Assign cat index.\n    i = parseInt(theme.index)\n  }\n\n  // Assign index to the bounding box which is stored in the array of bounding boxes.\n  bbox.themeIdx = i\n\n  // Get the JSON style from cat array via index.\n  var catStyle = theme.cat_arr[i]\n\n  // Assign the JSON style to the lookup object for the feature field property value.\n  theme.lookup[feature.properties[theme.field]] = catStyle\n\n  // Merge the cat style with the feature style.\n  mapp.utils.merge(feature.style, catStyle)\n}", "export default function(theme, feature) {\n\n  if (feature.style?.icon?.clusterScale) return;\n\n  var catValue = Array.isArray(feature.properties.features) ?\n\n    // Reduce array of features to sum catValue\n    feature.properties.features.reduce((total, F) => total + Number(F.getProperties().properties[theme.field]), 0) :\n\n    // Get catValue from cat or field property.\n    parseFloat(feature.properties.cat || feature.properties[theme.field]);\n\n  if (!isNaN(catValue)) {\n\n    // Iterate through cat array.\n    for (let i = 0; i < theme.cat_arr.length; i++) {\n\n      // Break iteration is cat value is below current cat array value.\n      if (catValue < parseFloat(theme.cat_arr[i].value)) break;\n\n      // Set cat_style to current cat style after value check.\n      var catStyle = mapp.utils.clone(theme.cat_arr[i].style || theme.cat_arr[i])\n\n      delete catStyle.label\n    }\n\n    if (typeof catStyle === 'undefined') return;\n\n    if (feature.geometryType === 'Point') {\n  \n      // Merge catStyle if icon style is not implicit.\n      feature.style.icon = catStyle.icon || Object.assign(feature.style.icon, catStyle)\n      delete feature.style.icon.url;\n      return;\n    }\n  \n    // Merge catStyle for vector features.\n    mapp.utils.merge(feature.style, catStyle)\n  }\n}", "import decorate from './decorate.mjs'\n\nimport formats from './format/_format.mjs';\n\nimport fade from './fade.mjs'\n\nimport featureHover from './featureHover.mjs'\n\nimport featureFilter from './featureFilter.mjs'\n\nimport Style from './Style.mjs'\n\nimport categorized from './themes/categorized.mjs'\n\nimport distributed from './themes/distributed.mjs'\n\nimport graduated from './themes/graduated.mjs'\n\nexport default {\n  decorate,\n  formats,\n  featureHover,\n  featureFilter,\n  fade,\n  Style,\n  themes: {\n    categorized,\n    distributed,\n    graduated\n  }\n}", "export default location => {\n\n  Object.assign(location, {\n    flyTo,\n    Layers: [],\n    remove,\n    removeCallbacks: [],\n    trash,\n    update,\n    mvt_cache,\n    updateCallbacks: [],\n  })\n\n  return location;\n}\n\nfunction remove() {\n\n  // Checks may be performed after async oprations\n  // whether a location has already been removed.\n  delete this.remove\n\n  this.layer.mapview.hooks && mapp.hooks.filter('locations', this.hook)\n\n  delete this.layer.mapview.locations[this.hook]\n\n  this.view instanceof HTMLElement && this.view.remove()\n\n  this.Layers?.forEach(\n    L => this.layer.mapview.Map.removeLayer(L))\n\n  this.layer.mapview.interaction.type !== 'highlight'\n    && this.layer.mapview.interactions.highlight()\n\n  // Reload the layer if possible.\n  this.layer.reload && this.layer.reload()\n\n  this.removeCallbacks?.forEach(\n    fn => typeof fn === 'function' && fn(this))\n}\n\nasync function update() {\n\n  // Map new values into newValues object.\n  const newValues = Object.fromEntries(this.infoj\n    .filter(entry => typeof entry.newValue !== 'undefined')\n    .map(entry => [entry.field, entry.newValue]))\n\n  if (!Object.keys(newValues).length) return;\n\n  await this.mvt_cache()\n\n  await mapp.utils.xhr({\n    method: 'POST',\n    url:\n      `${this.layer.mapview.host}/api/location/update?` +\n      mapp.utils.paramString({\n        locale: this.layer.mapview.locale.key,\n        layer: this.layer.key,\n        table: this.table,\n        id: this.id,\n      }),\n    body: JSON.stringify(newValues),\n  });\n\n  await this.mvt_cache()\n   \n  let dependents = this.infoj\n    .filter(entry => typeof entry.newValue !== 'undefined')\n    .filter(entry => entry.dependents && entry.dependents.length)\n    .map(entry => entry.dependents)\n    .flat()\n\n  this.infoj\n    .filter(entry => typeof entry.newValue !== 'undefined')\n    .forEach(entry => {\n\n      entry.value = entry.newValue;\n      delete entry.newValue;\n\n    })\n\n  if (dependents.length) {\n\n    const response = await mapp.utils.xhr(\n      `${this.layer.mapview.host}/api/location/get?` +\n        mapp.utils.paramString({\n          locale: this.layer.mapview.locale.key,\n          layer: this.layer.key,\n          table: this.table,\n          id: this.id,\n          fields: [...new Set(dependents)].join(),\n        })\n    );\n\n    this.infoj\n      .filter(entry => typeof response[entry.field] !== 'undefined')\n      .forEach(entry => {\n        entry.value = response[entry.field];\n      })\n  \n  }\n\n  // Reload layer.\n  this.layer.reload()\n\n  this.updateCallbacks?.forEach(fn => typeof fn === 'function' && fn(this))\n}\n\nfunction flyTo (maxZoom) {\n\n  const sourceVector = new ol.source.Vector();\n\n  this.Layers.forEach(layer => {\n\n    const source = layer.getSource()\n\n    typeof source.getFeatures === 'function'\n      && sourceVector.addFeatures(source.getFeatures())\n  })\n\n  this.layer.mapview.fitView(sourceVector.getExtent(),{\n    maxZoom\n  });\n}\n\nasync function mvt_cache() {\n\n  if (!this.layer?.mvt_cache) return;\n\n  await mapp.utils.xhr(`${this.layer.mapview.host}/api/query?` +\n    mapp.utils.paramString({\n      template: 'mvt_cache_delete_intersects',\n      locale: this.layer.mapview.locale.key,\n      layer: this.layer.key,\n      mvt_cache: this.layer.mvt_cache,\n      table: this.table,\n      qID: this.layer.qID,\n      id: this.id,\n      geom: this.layer.geom\n    }))\n}\n\nasync function trash() {\n\n  if(!confirm(mapp.dictionary.confirm_delete)) return;\n\n  // Must clear cache before removing location from source.\n  await this.mvt_cache()\n\n  await mapp.utils.xhr(`${this.layer.mapview.host}/api/location/delete?` +\n    mapp.utils.paramString({\n      locale: this.layer.mapview.locale.key,\n      layer: this.layer.key,\n      table: this.table,\n      id: this.id\n    }))\n\n  this.remove()\n}", "export default async function (location, list = location.layer.mapview.locations) {\n\n  if (location.layer.mapview.interaction?.getLocation instanceof Function) {\n\n    location.layer.mapview.interaction?.getLocation(location)\n    return;\n  }\n\n  if (!location.layer || !location.id) return;\n\n  // Create location hook.\n  location.hook = `${location.layer.key}!${location.id}`;\n\n  // Return if hook exists in mapview.interaction.locations set.\n  if (location.layer.mapview.interaction?.locations?.has(location.hook)) return;\n\n  // Add hook to mapview.interaction.locations set.\n  location.layer.mapview.interaction?.locations?.add(location.hook)\n\n  // Remove location if already in list.\n  if (list[location.hook]) {\n    list[location.hook].remove()\n    delete list[location.hook]\n\n    // Remove hook to mapview.interaction.locations set.\n    location.layer.mapview.interaction?.locations?.delete(location.hook)\n    return;\n  }\n\n\n  // Get dbs table from layer.\n  location.table ??= location.layer.table ||\n    Object.values(location.layer.tables).find(table => typeof table === 'string')\n\n  // Get data from location api.\n  const response = await mapp.utils.xhr(\n    `${location.layer.mapview.host}/api/location/get?` +\n    mapp.utils.paramString({\n      locale: location.layer.mapview.locale.key,\n      layer: location.layer.key,\n      table: location.table,\n      id: location.id,\n    })\n  );\n\n  if (!response) {\n\n    console.log('No data returned from location get request')\n    mapp.hooks.filter('locations', location.hook)\n    return;\n  }\n\n  const infoj = location.layer.infoj.map(_entry => {\n\n    const entry = mapp.utils.clone(_entry)\n\n    Object.assign(entry, {\n      title: response[entry.field + '_label'] || entry.title,\n      value: response[entry.field],\n      location\n    })\n\n    return entry\n  })\n\n  mapp.location.decorate(Object.assign(location, { infoj }))\n\n  location.new && await location.mvt_cache()\n\n  // Assign location to mapview.\n  list[location.hook] = location\n\n  // Remove hook to mapview.interaction.locations set.\n  location.layer.mapview.interaction?.locations?.delete(location.hook)\n\n  // A location must have a record from a listview.\n  location.record\n\n    // Hooks must be enabled on the mapview.\n    && location.layer.mapview.hooks\n\n    // Push location hook to URL params.\n    && mapp.hooks.push('locations', location.hook)\n\n  return location\n}", "export default async function (params) {\n\n  let\n    properties = params.feature.getProperties(),\n    geom = params.feature.getGeometry(),\n    _coords = geom.getCoordinates(),\n    coords = ol.proj.transform(\n      _coords,\n      'EPSG:' + params.mapview.srid,\n      'EPSG:' + params.layer.srid)\n\n  const response = await mapp.utils.xhr(\n    `${params.mapview.host}/api/query/get_nnearest?` +\n      mapp.utils.paramString({\n        locale: params.mapview.locale.key,\n        layer: params.layer.key,\n        geom: params.layer.geom,\n        qID: params.layer.qID,\n        label: params.layer.cluster?.label || params.layer.qID,\n        table: params.table,\n        filter: params.layer.filter?.current,\n        n: properties.count > (params.max || 99) ? (params.max || 99) : properties.count,\n        x: coords[0],\n        y: coords[1],\n        coords: coords,\n      })\n  );\n\n  const list = mapp.utils.html.node`\n    <div style=\"max-width: 66vw; max-height: 300px; overflow-x: hidden;\">\n      <ul>\n      ${response.map(li => mapp.utils.html.node`\n        <li\n          onclick=${e => {\n            params.mapview.popup(null)\n            mapp.location.get({\n              //mapview: params.mapview,\n              layer: params.layer,\n              table: params.table,\n              id: li.id,\n              marker: ol.proj.transform(\n                li.coords,\n                'EPSG:' + params.layer.srid,\n                'EPSG:' + params.mapview.srid),\n            })\n          }}>${li.label || '\"' + params.layer.cluster?.label + '\"'}`)}`;\n\n  params.mapview.popup({\n    coords: ol.proj.transform(\n      coords,\n      'EPSG:' + params.layer.srid,\n      'EPSG:' + params.mapview.srid\n    ),\n    content: list,\n    autoPan: true,\n  });\n\n}", "import decorate from './decorate.mjs'\n\nimport get from './get.mjs'\n\nimport nnearest from './nnearest.mjs'\n\nexport default {\n  decorate,\n  get,\n  nnearest,\n}", "export default async function (layers) {\n  /**\n   * Adds layer(s) to map\n   * @param {Array} layers - array of layers to add\n   * @returns {Array} - layers array\n   */\n\n  if (!Array.isArray(layers)) return;\n\n  const layersSet = this.hooks && new Set(mapp.hooks.current.layers);\n\n  for (const _layer of layers) {\n\n    const layer = mapp.utils.merge({}, this.locale.layer || {}, _layer)\n\n    layer.mapview = this;\n\n    // Only the layers in the layerset should be displayed.\n    // Will override the layer.display setting from the workspace\n    if (layersSet?.size) {\n      layer.display = layersSet.has(layer.key);\n    }\n\n    // Check the layer format.\n    if (!mapp.layer.formats[layer.format]) {\n      console.warn(`Layer: ${layer.key}, format is unknown or undefined. This is likely due to an incorrect file path.`)\n      continue;\n    }\n\n    await mapp.layer.decorate(layer);\n\n    this.layers[layer.key] = layer;\n\n    layer.display && layer.show();\n  }\n\n  return layers;\n}", "export default function (extent, opt_options = {}){\n  /**\n   * Fits the view to a given extent\n   * @param {Array} extent - geo extent, array of 4 numbers, must be [minX, minY, maxX, maxY]\n   * @param {Object} opt_options - Defaults to empty object \n   */\n\n  // Extent must be an array of finite values.\n  if (!Array.isArray(extent) || !extent.every(val => isFinite(val))) {\n    console.warn('Attempted to call fitView method with invalid extent');\n    return;\n  }\n\n  this.Map.getView().fit(\n    extent,\n    Object.assign(\n      {\n        padding: [50, 50, 50, 50],\n        duration: 1000\n      },\n      opt_options)\n  )\n}", "export default function(srid){\n  /**\n   * Returns an object representing bounds\n   * @param {string} srid = Optional spatial reference identifier as string\n   * @returns {{south: number, west: number, north: number, east: number}} - Bounds object\n   */\n\n  const extent = this.Map.getView().calculateExtent();\n\n  if (!srid) return {\n    south: extent[1],\n    west: extent[0],\n    north: extent[3],\n    east: extent[2],\n  };\n\n  // transforms extent from source projection to destination projection\n  const extentTransformed = ol.proj.transformExtent(\n    extent,\n    `EPSG:${this.srid}`,\n    `EPSG:${srid}`\n  );\n\n  return {\n    south: extentTransformed[1],\n    west: extentTransformed[0],\n    north: extentTransformed[3],\n    east: extentTransformed[2],\n  }\n}", "export default function (params){\n\n  const geoJSON = new ol.format.GeoJSON();\n\n  let feature;\n\n  try {\n\n    feature = params.geometry && geoJSON.readFeature({\n      type: 'Feature',\n      geometry: params.geometry\n    },{ \n      dataProjection: `EPSG:${params.dataProjection || this.srid}`,\n      featureProjection:`EPSG:${this.srid}`\n    });\n\n  } catch (err) {\n\n    console.error(err)\n    return;\n  }\n\n  if (!feature) return;\n\n  const layerVector = new ol.layer.Vector({\n    source: new ol.source.Vector({\n      features: [feature]\n    }),\n    zIndex: params.zIndex,\n    style: params.Style\n  })\n  \n  this.Map.addLayer(layerVector)\n  \n  return layerVector\n}", "const infotip = {}\n\nexport default function(content) {\n\n  const mapview = this;\n\n  // Remove infotip node element\n  infotip.node?.remove()\n\n  // The mapview must have a position to place the infotip.\n  if (!mapview.position) return;\n\n  // Remove infotip positioning event from mapview Map.\n  mapview.Map.un('pointermove', position)\n\n  // Just clears the infotip.\n  if (!content) return;\n\n  if (content instanceof HTMLElement) {\n\n    infotip.node = content\n\n  // Content type object but not HTMLElement cannot be rendered.\n  } else if (typeof content === 'object') {\n\n    console.log(content)\n    return;\n\n  } else {\n\n    // Check for braces in content string.\n    if (/[()]/.test(content)) {\n\n      console.warn(`Potential XSS detected in infotip content ${content}`)\n    }\n\n    // Creates the infotip node.\n    infotip.node = mapp.utils.html.node`<div class=\"infotip box-shadow\">`\n\n    // Assigns the infotip content.\n    infotip.node.innerHTML = content\n  }\n\n  // Appends the infotip to the mapview.Map.\n  mapview.Map.getTargetElement().append(infotip.node)\n\n  // Assign infotip positioning event to mapview.Map.\n  mapview.Map.on('pointermove', position)\n\n  // Set the position of the infotip.\n  position()\n\n  function position() {\n\n    // The infotip class has a default opacity of 0, with transition effect.\n    infotip.node.style.opacity = 1;\n\n    // Set the infotip position from mapview pointerLocation.\n    infotip.node.style.left = mapview.pointerLocation.x - infotip.node.offsetWidth / 2 + 'px'\n    infotip.node.style.top = mapview.pointerLocation.y - infotip.node.offsetHeight - 15 + 'px'\n  }\n}", "export default function (params) {\n\n  this._locate = this._locate || Object.assign({\n    icon: {\n      svg: `${this.host}/icons/locator.svg`,\n      scale: 0.05\n    },\n    feature: new ol.Feature({\n      geometry: new ol.geom.Point([0, 0])\n    }),\n  }, params || {})\n\n  this._locate.active = !this._locate.active\n\n  // Create the geolocation marker if it doesn't exist yet.\n  if (!this._locate.L) {\n\n    this._locate.L = new ol.layer.Vector({\n      source: new ol.source.Vector({\n        features: [this._locate.feature]\n      }),\n      zIndex: 999,\n      style: mapp.utils.style({\n        icon: this._locate.icon\n      })\n    })\n  }\n\n  // Remove the geolocation marker if locate is not active.\n  if (!this._locate.active) {\n    this.Map.removeLayer(this._locate.L)\n    return;\n  }\n\n  this.Map.addLayer(this._locate.L)\n\n  mapp.utils.getCurrentPosition((pos) => {\n\n    const coords = ol.proj.fromLonLat([\n      parseFloat(pos.coords.longitude),\n      parseFloat(pos.coords.latitude)\n    ])\n\n    this._locate.feature.getGeometry().setCoordinates(coords)\n\n    // Fly to pos_ll and set flyTo to false to prevent map tracking.\n    this.Map.getView().animate({\n      center: coords,\n      zoom: this.locale.maxZoom\n    })\n  })\n\n}", "const popup = {}\n\nexport default function(params) {\n\n  if (typeof params === 'undefined') {\n\n    // Returns undefined / falsy if popup.node has been removed.\n    return popup.node?.parentNode;\n  }\n\n  const mapview = this;\n\n  // Remove a current tooltip.\n  mapview.infotip(null)\n\n  // Remove infotip node element\n  popup.node?.remove()\n\n  // Just clears the infotip.\n  if (!params) return;\n\n  popup.node = mapp.utils.html.node `<div class=\"popup box-shadow\">`\n\n  popup.node.appendChild(params.content)\n  \n  popup.overlay && mapview.Map.removeOverlay(popup.overlay)\n\n  popup.overlay = new ol.Overlay({\n    element: popup.node,\n    position: params.coords || mapview.position,\n    positioning: 'bottom-center',\n    autoPan: params.autoPan,\n    insertFirst: true,\n    autoPanAnimation: {\n      duration: 250\n    }\n  })\n\n  mapview.Map.addOverlay(popup.overlay)\n\n}", "export default function (e, mapview) {\n\n    // Remove popup from mapview.\n    mapview.popup(null)\n\n    const features = [];\n\n    // Find locations at pixel.\n    mapview.Map.forEachFeatureAtPixel(e.pixel,\n        (F, L) => {\n\n            const feature = {\n                F, L,\n                layer: mapview.layers[L.get('key')],\n                id: F.get('id') || F.getId()\n            }\n\n            features.push(feature)\n        },\n        {\n            layerFilter: mapview.interaction.layerFilter,\n            hitTolerance: mapview.interaction.hitTolerance,\n        })\n\n    // No features at pixel.\n    if (!features.length) return;\n\n    const content = mapp.utils.html.node`\n      <div style=\"max-width: 66vw; max-height: 300px; overflow-x: hidden;\">\n        <ul>\n        ${features.map(feature => mapp.utils.html.node`\n          <li onclick=${e => {\n            mapview.interaction.getFeature(feature)\n            mapview.popup(null)\n        }}\n        }}>${feature.L.get('key')} [${feature.id}]`)}`;\n\n    mapview.popup({\n        content,\n        autoPan: true,\n    });\n}", "export default function (params) {\n\n  const mapview = this;\n\n  // Finish the current interaction.\n  mapview.interaction?.finish()\n\n  mapview.interaction = {\n\n    type: 'highlight',\n\n    finish,\n\n    clear,\n\n    highlight,\n\n    getFeature,\n\n    hitTolerance: 5,\n\n    candidates: {},\n\n    candidateKeys: new Set(),\n\n    locations: new Set(),\n\n    longClickMethod: mapview.allFeatures,\n\n    longClickMS: 500,\n\n    // Filter for layers which have a highlight style.\n    layerFilter: L => Object.values(this.layers)\n\n      // layer L matching the feature layer L must have a qID defined\n      .some(layer => layer.qID && layer.L === L),\n\n    // Spread params argument.\n    ...params\n  }\n\n  // pointerMove will highlight features.\n  mapview.Map.on('pointermove', pointerMove)\n\n  // click will select the highlighted feature.\n  mapview.Map.on('click', click)\n\n  mapview.Map.getTargetElement().addEventListener('mousedown', mouseDown)\n\n  mapview.Map.getTargetElement().addEventListener('touchstart', touchStart)\n\n  mapview.Map.getTargetElement().addEventListener('mouseup', mouseUp)\n\n  // Prevent mouseDown event on touch input.\n  function touchStart(e) {\n    e.preventDefault()\n  }\n\n  function mouseDown() {\n\n    // Short circuit the mouseDown event method if the longClickMethod is falsy.\n    if (!mapview.interaction.longClickMethod) return;\n\n    // Remove longClick flag.\n    delete mapview.interaction.longClick\n\n    // Clear longClick timeout.\n    mapview.interaction.longClickTimeout && clearTimeout(mapview.interaction.longClickTimeout)\n\n    // Set longClick timeout.\n    mapview.interaction.longClickTimeout = setTimeout(\n\n      // Set longClick flag.\n      () => {\n        mapview.interaction.longClick = true\n        mapview.Map.getTargetElement().style.cursor = 'wait'\n      },\n\n      // 1000ms default timeout for longclick.\n      mapview.interaction.longClickMS)\n  }\n\n  function mouseUp() {\n    mapview.Map.getTargetElement().style.cursor = 'auto'\n  }\n\n  let shortCircuit\n\n  function pointerMove(e) {\n\n    // A popup is open.\n    if (mapview.popup()) return;\n\n    // Clear longClick timeout.\n    mapview.interaction.longClickTimeout && clearTimeout(mapview.interaction.longClickTimeout)\n\n    // Method should short circuit if still processing.\n    if (shortCircuit) return;\n\n    // Set shortCircuit flag.\n    shortCircuit = true;\n\n    let candidates = {};\n\n    mapview.Map.forEachFeatureAtPixel(e.pixel,\n      (F, L) => {\n\n        // Create candidate object.\n        let candidate = {\n          key: `${L.get('key') || ol.util.getUid(L)}!${F.get('id') || F.getId() || ol.util.getUid(F)}`,\n          F, L\n        }\n\n        // Assign to key in candidates object.\n        candidates[candidate.key] = candidate\n      },\n      {\n        layerFilter: mapview.interaction.layerFilter,\n        hitTolerance: mapview.interaction.hitTolerance,\n      })\n\n    // No features at pixel.\n    if (!Object.keys(candidates).length) {\n\n      // Reset candidateKeys\n      mapview.interaction.candidateKeys = new Set();\n\n      // Remove shortCircuit flag.\n      shortCircuit = false;\n\n      // Clear highlight.\n      clear();\n\n      // There is nothing to highlight.\n      return;\n    }\n\n    // Check whether set of candidate keys is equal to mapview.interaction.candidateKeys\n    if (mapp.utils.areSetsEqual(mapview.interaction.candidateKeys, new Set(Object.keys(candidates)))) {\n\n      // Remove shortCircuit flag\n      shortCircuit = false;\n\n      // The highlight hasn't changed.\n      return;\n    }\n\n    // Find candidate from key which is not in candidates set.\n    let candidate = candidates[Object.keys(candidates).find(key => !mapview.interaction.candidateKeys.has(key))]\n\n    // Assign candidate from first key if candidate is falsy.\n    candidate = candidate\n      || mapview.interaction.current?.key && candidates[mapview.interaction.current?.key]\n      || candidates[Object.keys(candidates)[0]]\n\n    // Assign new Set of candidate keys to mapview.interaction.\n    mapview.interaction.candidateKeys = new Set(Object.keys(candidates))\n\n    // Remove shortCircuit flag.\n    shortCircuit = false;\n\n    // Call highlight method.\n    mapview.interaction.highlight(candidate, e)\n  }\n\n  function highlight(feature, e) {\n\n    // Highlight method should only be called if the highlight has changed.\n    clear()\n\n    // Assign the layer and ID to the candidate object.\n    mapview.interaction.current = Object.assign(feature, {\n      layer: mapview.layers[feature.L.get('key')],\n      id: feature.F.get('id') || feature.F.getId()\n    })\n\n    // Assign the id to the layer highlight key.\n    // Required to determine in the style function whether the current feature should be styled as highlighted.\n    mapview.interaction.current.layer.highlight = feature.id\n\n    // Touch events should not highlight features since there is no cursor.\n    if (e.originalEvent.pointerType !== 'mouse') {\n\n      // Don't get location from touch pan or zoom pinch event.\n      e.type !== 'pointermove' && mapview.interaction.getFeature(mapview.interaction.current)\n\n      // Clear touch highlight.\n      clear()\n\n      return;\n    }\n\n    // Change cursor if the highlight is selectable.\n    if (mapview.interaction.current.layer.infoj) mapview.Map.getTargetElement().style.cursor = 'pointer'\n\n    // Execute hover method assigned to the current feature layer.\n    typeof mapview.interaction.current.layer.style?.hover?.method === 'function'\n      && mapview.interaction.current.layer.style.hover.method(feature.F, mapview.interaction.current.layer)\n\n    // Style the feature itself if possible.\n    if (mapview.interaction.current.layer.format !== 'mvt'\n      && mapview.interaction.current.layer.style.highlight\n      && typeof mapview.interaction.current.F.setStyle === 'function') {\n\n      // Unset cached OL Styles object.\n      feature.F.set('Styles', null, true)\n\n      feature.F.set('highlight', true, true)\n      mapview.interaction.current.F.setStyle()\n\n    } else if (mapview.interaction.current.layer.style.highlight) {\n\n      // Render unto canvas those things that are canvas'\n      mapview.interaction.current.layer.L.changed()\n    }\n  }\n\n  let clicked;\n\n  // Select the current highlighted feature.\n  function click(e) {\n\n    // Reset cursor.\n    mapview.Map.getTargetElement().style.cursor = 'auto'\n\n    // Clear longClick timeout.\n    mapview.interaction.longClickTimeout && clearTimeout(mapview.interaction.longClickTimeout)\n\n    if (mapview.interaction.longClick && typeof mapview.interaction.longClickMethod === 'function') {\n\n      mapview.interaction.longClickMethod(e, mapview)\n      return;\n    }\n\n    // A popup is open.\n    if (mapview.popup()) {\n\n      // Close the popup.\n      mapview.popup(null)\n      return;\n    }\n\n    // Limit click event to 600ms\n    if (clicked) return;\n\n    clicked = setTimeout(() => { clicked = null }, 600);\n\n    // There is no current highlighted feature without pointerMove.\n    // Simulate pointermove on the touch click coordinates.\n    if (e.originalEvent.pointerType === 'touch') {\n\n      mapview.interaction.candidateKeys = new Set();\n      e.type = 'touchClick'\n      pointerMove(e)\n      return\n    }\n\n    // Remove any existing popup. e.g. Cluster select dialogue.\n    mapview.popup(null)\n\n    // Return if there is no current highlight to select.\n    if (mapview.interaction.current) {\n      mapview.interaction.getFeature(mapview.interaction.current);\n      return;\n    }\n\n    // Execute the noLocationClick method\n    if (typeof mapview.interaction.noLocationClick === 'function') {\n      mapview.interaction.noLocationClick(e)\n    }\n  }\n\n  function clear() {\n\n    // Highlight has already been cleared.\n    if (!mapview.interaction.current) return;\n\n    // Remove any infotip.\n    mapview.infotip(null)\n\n    // Reset cursor.\n    mapview.Map.getTargetElement().style.cursor = 'auto'\n\n    // Delete the highlight id from current layer.\n    delete mapview.interaction.current.layer.highlight\n\n    // Style the feature itself if possible.\n    if (mapview.interaction.current.layer.format !== 'mvt'\n      && typeof mapview.interaction.current.F.setStyle === 'function') {\n\n      // Unset cached style to allow for highlight style.\n      mapview.interaction.current.F.set('Styles', null, true)\n\n      mapview.interaction.current.F.set('highlight', false, true)\n      mapview.interaction.current.F.setStyle()\n\n    } else if (mapview.interaction.current.layer.style.highlight) {\n\n      // Render unto canvas those things that are canvas'\n      mapview.interaction.current.layer.L.changed()\n    }\n\n    // Delete the current highlight object.\n    delete mapview.interaction.current\n  }\n\n  function getFeature(feature) {\n\n    if (!feature.layer.infoj) return;\n\n    // Get the properties of the current highlight feature.\n    const properties = feature.F.getProperties();\n\n    // Return with a select dialogue for cluster feature.\n    if (properties.count > 1) {\n\n      // Get cluster features\n      const features = feature.F.get('features')\n\n      if (Array.isArray(features)) {\n\n        // Get list of cluster feature label and id.\n        let featuresList = features.map(f => {\n          let F = f.getProperties()\n          return {\n            id: F.id,\n            label: F.properties[feature.layer.cluster?.label]\n          }\n        })\n\n        // Create list to get cluster features\n        const list = mapp.utils.html.node`\n        <div style=\"max-width: 66vw; max-height: 300px; overflow-x: hidden;\">\n          <ul>\n          ${featuresList.map(li => mapp.utils.html.node`\n            <li\n              onclick=${e => {\n            mapview.popup(null)\n            mapp.location.get({\n              layer: feature.layer,\n              table: feature.layer.table || feature.layer.tableCurrent(),\n              id: li.id\n            })\n          }}>${li.label || li.id}`)}`;\n\n        // Create popup to select cluster features.\n        mapview.popup({\n          coords: feature.F.getGeometry().getCoordinates(),\n          content: list,\n          autoPan: true,\n        });\n\n        return;\n      }\n\n      mapp.location.nnearest({\n        mapview,\n        layer: feature.layer,\n        table: feature.layer.table || feature.layer.tableCurrent(),\n        feature: feature.F\n      })\n      return;\n    }\n\n    // Select the current highlight feature.\n    mapp.location.get({\n      layer: feature.layer,\n      table: feature.layer.table || feature.layer.tableCurrent(),\n      id: feature.id\n    })\n  }\n\n  // Finished the highlight mapview.interaction.\n  function finish() {\n\n    // Clear must be called before interaction is nulled.\n    clear()\n\n    // Remove popup from mapview.\n    mapview.popup(null)\n\n    // Remove event listener from mapview.\n    mapview.Map.un('pointermove', pointerMove)\n    mapview.Map.un('click', click)\n    mapview.Map.getTargetElement().removeEventListener('mousedown', mouseDown)\n    mapview.Map.getTargetElement().removeEventListener('touchstart', touchStart)\n    mapview.Map.getTargetElement().removeEventListener('mouseup', mouseUp)\n\n    mapview.interaction.callback?.()\n  }\n}", "export default function(params){\n\n  const mapview = this;\n\n  // Finish the current interaction.\n  mapview.interaction?.finish()\n\n  // Assign params onto the defaults as mapview.interaction.\n  mapview.interaction = {\n\n    type: 'draw',\n\n    finish,\n\n    getFeature,\n  \n    format: new ol.format.GeoJSON(),\n\n    source: new ol.source.Vector(),\n  \n    // The Layer is required for generated features such as isolines.\n    Layer: new ol.layer.Vector(),\n\n    // Bind context menu from mapp ui elements.\n    drawend: mapp.ui?.elements.contextMenu.draw.bind(this),\n\n    vertices: [],\n\n    // Whether the draw interaction event should be handled.\n    condition: e => {\n\n      // Right click\n      if (e.originalEvent.buttons === 2) {\n\n        // Remove last vertex.\n        mapview.interaction.interaction.removeLastPoint()\n        mapview.interaction.vertices.pop()\n\n        const moveEvent = new ol.MapBrowserEvent('pointermove', mapview.Map, e.originalEvent)\n        mapview.interaction.interaction.handleEvent(moveEvent)\n        mapview.interaction.interaction.handleEvent(moveEvent)\n        return false;\n      }\n\n      // Left click.\n      if (e.originalEvent.buttons === 1) {\n\n        mapview.interaction.vertices.push(e.coordinate);\n        mapview.popup(null);\n        \n        mapview.interaction.conditions?.forEach(fn => typeof fn === 'function' && fn(e))\n        return true;\n      }\n    },\n  \n    // OL Style for sketch feature.\n    style: [\n      new ol.style.Style({\n        stroke: new ol.style.Stroke({\n          color: '#3399CC',\n          width: 1.25\n        })\n      }),\n      new ol.style.Style({\n        image: new ol.style.Circle({\n          radius: 5,\n          fill: new ol.style.Fill({\n            color: '#eee',\n          }),\n          stroke: new ol.style.Stroke({\n            color: '#3399CC',\n            width: 1.25\n          })\n        }),\n        geometry: mapp.utils.verticeGeoms\n      })\n    ],\n    \n    // Spread params argument.\n    ...params\n  }\n \n  // Change cursor style over mapview element.\n  mapview.Map.getTargetElement().style.cursor = 'crosshair'\n\n  // Set mapview.interaction.Layer source.\n  mapview.interaction.Layer.setSource(mapview.interaction.source)\n  \n  // Add mapview.interaction.Layer to mapview.\n  mapview.Map.addLayer(mapview.interaction.Layer)\n  \n  // Create OL draw interaction.\n  mapview.interaction.interaction = new ol.interaction.Draw(mapview.interaction)\n\n  // Set drawstart event method.\n  mapview.interaction.interaction.on('drawstart', e => {\n\n    // Get the draw feature geometry.\n    const geometry = e.feature.getGeometry()\n\n    async function onChange() {\n      mapview.popup({\n        content: mapp.utils.html.node`\n          <div style=\"padding: 5px\">\n          ${await mapp.utils.convert(\n              // Get the geometry metric figure.\n              mapview.metrics[mapview.interaction.tooltip.metric](geometry),\n\n              // Options argument for conversion.\n              mapview.interaction.tooltip)}`\n      })\n    }\n\n    // Assign an onchange method to the geometry for the tooltip.\n    mapview.interaction.tooltip && geometry.on('change', mapview.interaction.tooltip.onChange || onChange)\n\n    // Clear the source\n    mapview.interaction.source.clear()\n\n    // Remove the popup.\n    mapview.popup(null)\n  })\n  \n  if (typeof mapview.interaction.drawend === 'function') {\n\n    mapview.interaction.interaction.on('drawend', mapview.interaction.drawend)\n  }\n  \n  // Add OL interaction to mapview.Map\n  mapview.Map.addInteraction(mapview.interaction.interaction)\n\n  // Assign snap interaction.\n  mapview.interactions.snap(mapview)\n \n  // Get first feature from mapview.interaction.source as GeoJSON.\n  function getFeature() {\n      \n    // Return feature as geojson.\n    return JSON.parse(\n      mapview.interaction.format.writeFeature(\n        // Get first OL feature from source.\n        mapview.interaction.source.getFeatures()[0],\n        { \n          // Use mapview.interaction.srid as dataProjection if defined in params.\n          dataProjection: 'EPSG:' + mapview.interaction.layer?.srid || mapview.interaction.srid || mapview.srid,\n          featureProjection: 'EPSG:' + mapview.srid\n        })\n    )\n  }\n  \n  function finish(feature) {\n\n    // Remove snap interaction.\n    mapview.interaction.snap?.remove?.()\n\n    // Reset the cursor style.\n    mapview.Map.getTargetElement().style.cursor = 'default'\n    \n    // Remove popup from mapview.\n    mapview.popup(null)\n    \n    // Remove interaction from mapview.Map.\n    mapview.Map.removeInteraction(mapview.interaction.interaction)\n  \n    // Remove draw Layer from mapview.Map.\n    mapview.Map.removeLayer(mapview.interaction.Layer)\n\n    mapview.interaction.callback?.(feature)\n  }\n}", "export default function(params){\n\n  const mapview = this\n  \n  // Finish the current interaction.\n  mapview.interaction?.finish()\n\n  mapview.interaction = {\n\n    type: 'modify',\n\n    finish,\n  \n    format: new ol.format.GeoJSON(),\n\n    source: new ol.source.Vector(),\n\n    Layer: new ol.layer.Vector({\n      zIndex: Infinity\n    }),\n  \n    vertices: [],\n\n    modifyend: mapp.ui?.elements.contextMenu.modify.bind(this),\n  \n    getFeature,\n\n    Style: [\n      new ol.style.Style({\n        image: new ol.style.Circle({\n          stroke: new ol.style.Stroke({\n            color: '#3399CC',\n            width: 1.25\n          }),\n          radius: 5\n        }),\n        stroke: new ol.style.Stroke({\n          color: '#3399CC',\n          width: 1.25\n        })\n      }),\n      new ol.style.Style({\n        image: new ol.style.Circle({\n          radius: 5,\n          fill: new ol.style.Fill({\n            color: '#eee',\n          }),\n          stroke: new ol.style.Stroke({\n            color: '#3399CC',\n            width: 1.25\n          })\n        }),\n        geometry: mapp.utils.verticeGeoms\n      })\n    ],\n\n    deleteCondition: e => {\n\n      if (e.type === 'singleclick') {\n\n        const geom = mapview.interaction.Feature.getGeometry()\n\n        const geomType = geom.getType()\n\n        if (geomType === 'Point') return;\n\n        const coords = geom.getCoordinates()\n\n        // Return on point or line with 2 vertices.\n        if (geomType === 'LineString' && coords.length < 3) return;\n\n        // Return on polygon with less than 3 vertices.\n        if (geomType === 'Polygon' && coords[0].length <= 4) return;\n     \n        // Set popup to remove vertex.\n        mapview.popup({\n          coords: geom.getClosestPoint(e.coordinate),\n          content: mapp.utils.html.node`<ul>\n            <li\n              onclick=${() => {\n              mapview.interaction.interaction.removePoint()\n              mapview.interaction.vertices.push(mapview.interaction.Feature.getGeometry().getClosestPoint(e.coordinate))\n            }}>${mapp.dictionary.delete_vertex}`\n        })\n      }\n    },\n    \n    // Spread params argument.\n    ...params\n  }\n\n  mapview.Map.getTargetElement().style.cursor = 'crosshair'\n\n  mapview.interaction.source.addFeature(mapview.interaction.Feature)\n   \n  // Set mapview.interaction.Layer source.\n  mapview.interaction.Layer.setSource(mapview.interaction.source)\n\n  // Set mapview.interaction.Layer style\n  mapview.interaction.Layer.setStyle(mapview.interaction.Style)\n  \n  // Add mapview.interaction.Layer to mapview.\n  mapview.Map.addLayer(mapview.interaction.Layer)\n   \n  mapview.interaction.interaction = new ol.interaction.Modify(mapview.interaction)\n\n  // Will clear remove vertex popup.\n  mapview.interaction.interaction.on('modifystart', e => {\n    mapview.popup(null)\n  })\n\n  if (typeof mapview.interaction.modifyend === 'function') {\n\n    mapview.interaction.interaction.on('modifyend', mapview.interaction.modifyend)\n  }\n\n  // Add OL interaction to mapview.Map\n  mapview.Map.addInteraction(mapview.interaction.interaction)\n\n  // Assign snap interaction.\n  mapview.interactions.snap(mapview)\n \n  function getFeature() {\n     \n    return JSON.parse(\n      mapview.interaction.format.writeFeature(\n        mapview.interaction.Feature,\n        { \n          dataProjection: 'EPSG:' + mapview.interaction.srid || mapview.srid,\n          featureProjection: 'EPSG:' + mapview.srid\n        })\n    )\n  }\n  \n  function finish(feature) {\n\n    // Remove snap interaction.\n    mapview.interaction.snap?.remove?.()\n\n    // Reset the cursor style.\n    mapview.Map.getTargetElement().style.cursor = 'default'\n  \n    // Remove popup from mapview.\n    mapview.popup(null)\n    \n    // Remove interaction from mapview.Map.\n    mapview.Map.removeInteraction(mapview.interaction.interaction)\n\n    // Clear the modify source.\n    mapview.interaction.source.clear()\n  \n    // Remove draw Layer from mapview.Map.\n    mapview.Map.removeLayer(mapview.interaction.Layer)\n\n    mapview.interaction.callback?.(feature)\n  }\n}", "export default function(params){\n\n  const mapview = this\n\n  // Finish the current interaction.\n  mapview.interaction?.finish()\n\n  mapview.interaction = {\n\n    finish: finish,\n\n    Layer: new ol.layer.Vector({\n      source: new ol.source.Vector()\n    }),\n\n     // Spread params argument.\n    ...params\n  }\n\n  mapview.interaction.Layer.getSource().clear()\n\n  mapview.Map.addLayer(mapview.interaction.Layer);\n\n  mapview.Map.getTargetElement().style.cursor = 'zoom-in';\n\n  mapview.interaction.interaction = new ol.interaction.Draw({\n    source: mapview.interaction.Layer.getSource(),\n    type: 'Circle',\n    geometryFunction: ol.interaction.Draw.createBox(),\n    style: new ol.style.Style({\n      stroke: new ol.style.Stroke({\n        color: '#ddd',\n        width: 1\n      }),\n      fill: new ol.style.Stroke({\n        color: '#fff9'\n      })\n    })\n  })\n\n  mapview.interaction.interaction.on('drawend', e => {\n\n    mapview.fitView(e.feature.getGeometry().getExtent())\n\n    finish()\n  })\n\n  mapview.Map.addInteraction(mapview.interaction.interaction)\n\n  function finish() {\n\n    mapview.Map.getTargetElement().style.cursor = 'auto';\n\n    mapview.Map.removeInteraction(mapview.interaction.interaction)\n\n    mapview.Map.removeLayer(mapview.interaction.Layer)\n\n    mapview.interaction.Layer.getSource().clear()\n\n    mapview.interaction.callback?.()\n  }\n}", "export default function(mapview) {\n\n  // The current draw/modify interaction doesn't snap.\n  if (!mapview.interaction.snap) return;\n\n  // Assign mapview and interaction to be _this.\n  mapview.interaction.snap = {\n    remove: ()=>{\n\n      if (mapview.interaction.layer.featureSource) {\n\n        // Detach tile load event,\n        mapview.interaction.layer.featureSource.un('tileloadend', tileloadend)\n\n        // Remove featureSource layer from mapview.Map,\n        mapview.Map.removeLayer(mapview.interaction.snap.vectorTileLayer)\n\n        // And clear featureSource.\n        mapview.interaction.layer.featureSource.clear()\n      }\n\n      mapview.Map.removeInteraction(mapview.interaction.snap.interaction)\n    }\n  }\n\n  function tileloadend(e) {\n\n    // Add features from tile to the snap.source.\n    mapview.interaction.snap.source.addFeatures(e.tile.getFeatures())\n  }\n\n  // Only MVT layer have a snapSource.\n  if (mapview.interaction.layer.featureSource) {\n\n    // Create new Vector source for snap features.\n    mapview.interaction.snap.source = new ol.source.Vector()\n\n    // Assign loadend event to MVT layer featureSource.\n    mapview.interaction.layer.featureSource.on('tileloadend', tileloadend)\n\n    mapview.interaction.snap.vectorTileLayer = new ol.layer.VectorTile({\n      source: mapview.interaction.layer.featureSource,\n      opacity: 0\n    })\n  \n    // Add invisible tile layer for the featureSource to trigger tile loads.\n    mapview.Map.addLayer(mapview.interaction.snap.vectorTileLayer)\n\n  } else {\n\n    // Assign vector source as snap source for vector layer.\n    mapview.interaction.snap.source = mapview.interaction.layer.L.getSource()\n  }\n\n  // Create snap interaction with snap.source.\n  mapview.interaction.snap.interaction = new ol.interaction.Snap({\n    source: mapview.interaction.snap.source\n  })\n  \n  // Add snap.interaction to mapview.Map\n  mapview.Map.addInteraction(mapview.interaction.snap.interaction)\n}", "import addLayer from './addLayer.mjs'\n\nimport fitView from './fitView.mjs'\n\nimport getBounds from './getBounds.mjs'\n\nimport geoJSON from './geoJSON.mjs'\n\nimport infotip from './infotip.mjs'\n\nimport locate from './locate.mjs'\n\nimport popup from './popup.mjs'\n\nimport allFeatures from './allFeatures.mjs'\n\nimport _highlight from './interactions/highlight.mjs'\n\nimport _draw from './interactions/draw.mjs'\n\nimport _modify from './interactions/modify.mjs'\n\nimport _zoom from './interactions/zoom.mjs'\n\nimport snap from './interactions/snap.mjs'\n\nexport default (mapview) => {\n\n  Object.assign(mapview, {\n    srid: mapview.locale.srid || '3857',\n    addLayer,\n    fitView,\n    geoJSON,\n    getBounds,\n    infotip,\n    locate,\n    metrics: {\n      distance: (geometry) => ol.sphere.getLength(\n        new ol.geom.LineString([geometry.getInteriorPoint().getCoordinates(), mapview.position])),\n      area: (geometry) => ol.sphere.getArea(geometry),\n      length: (geometry) => ol.sphere.getLength(geometry),\n    },\n    popup,\n    allFeatures,\n    layers: {},\n    locations: {},\n    interactions: {\n      highlight: _highlight.bind(mapview),\n      draw: _draw.bind(mapview),\n      modify: _modify.bind(mapview),\n      zoom: _zoom.bind(mapview),\n      snap\n    }\n  })\n\n  // Get the initialZoom for the mapview.\n  const initialZoom = mapp.hooks?.current?.z\n    || mapview.locale.view?.z\n    || mapview.locale.minZoom\n    || 0\n\n  // Get the initialCenter for the mapview.\n  const initialCenter = ol.proj.fromLonLat([\n    parseFloat(mapp.hooks?.current?.lng\n      || mapview.locale.view?.lng\n      || 0),\n    parseFloat(mapp.hooks?.current?.lat\n      || mapview.locale.view?.lat\n      || 0),\n  ])\n\n  // WARN!\n  mapview.locale.bounds && console\n    .warn('locale.bounds have been renamed to locale.extent')\n\n  if (mapview.locale.extent) {\n    const north = parseFloat(mapview.locale.extent.north || 90);\n    const south = parseFloat(mapview.locale.extent.south || -90);\n    const east = parseFloat(mapview.locale.extent.east || 180);\n    const west = parseFloat(mapview.locale.extent.west || -180);\n\n    if ((north - south) >= 0 && (east - west) >= 0) {\n      mapview.extent = ol.proj.transformExtent([west, south, east, north], 'EPSG:4326', `EPSG:${mapview.srid}`);\n    } else {\n      console.warn('Invalid extent. Ensure north >= south and east >= west. Global extent is assumed.');\n    }\n  }\n\n  // Map\n  mapview.Map = new ol.Map({\n    target: mapview.target,\n    interactions: ol.interaction.defaults.defaults({\n      mouseWheelZoom: mapview.scrollWheelZoom && {\n        duration: 250, // default\n        timeout: 80 // default\n      } || false,\n      pinchRotate: mapview.pinchRotate && {\n        threshold: 3\n      } || false\n    }),\n    moveTolerance: 5,\n    controls: mapview.controls || [], //[new ol.control.Zoom()]\n    view: new ol.View({\n      projection: `EPSG:${mapview.srid}`,\n      zoom: initialZoom,\n      minZoom: mapview.locale.minZoom,\n      maxZoom: mapview.locale.maxZoom,\n      center: initialCenter,\n      extent: mapview.extent\n    })\n  })\n\n  // Observe whether the mapview.Map target element changes size.\n  // Method should debounce to account for manual resizing, ie. with a slider element.\n  let resizeObserverTimeout\n  new ResizeObserver(() => {\n\n    resizeObserverTimeout && clearTimeout(resizeObserverTimeout)\n\n    resizeObserverTimeout = setTimeout(() => {\n\n      mapview.Map.getTargetElement().dispatchEvent(new Event('resize'))\n\n      // This should happen automatically with later versions of OL.\n      // mapview.Map.updateSize()\n\n    }, 400)\n\n  }).observe(mapview.Map.getTargetElement())\n\n  // WARN!\n  mapview.locale.maskBounds && console\n    .warn('locale.maskBounds is set as mask:true in locale.extent')\n\n  // Extent mask\n  if (mapview.locale.extent?.mask) {\n\n    // Set world exte\n\n    const world = [\n      [180, 90],\n      [180, -90],\n      [-180, -90],\n      [-180, 90],\n      [180, 90],\n    ]\n\n    // Set locale extent\n    const extent = [\n      [mapview.locale.extent.east, mapview.locale.extent.north],\n      [mapview.locale.extent.east, mapview.locale.extent.south],\n      [mapview.locale.extent.west, mapview.locale.extent.south],\n      [mapview.locale.extent.west, mapview.locale.extent.north],\n      [mapview.locale.extent.east, mapview.locale.extent.north],\n    ]\n\n    // Create a maskFeature from the word and locale extent.\n    const maskFeature = new ol.Feature({\n      geometry: new ol.geom\n\n        // Use world and locale extent as polygon rings.\n        // The second ring will be subtracted.\n        .Polygon([world, extent])\n        .transform(`EPSG:4326`, `EPSG:${mapview.srid}`)\n    })\n\n    // Add masklayer with the maskFeature\n    // and infinite zIndex to mapview.Map\n    mapview.Map.addLayer(new ol.layer.Vector({\n      source: new ol.source.Vector({\n        features: [maskFeature]\n      }),\n      style: new ol.style.Style({\n        fill: new ol.style.Fill({\n          color: '#00000044'\n        })\n      }),\n      zIndex: Infinity\n    }))\n  }\n\n  // Scalebar\n  mapview.scalebar && mapview.Map.addControl(new ol.control.ScaleLine({\n    units: mapview.scalebar\n  }))\n\n  // Attribution\n  if (mapview.attribution) {\n\n    if (typeof mapview.attribution !== 'object') {\n      mapview.attribution = {}\n    }\n\n    mapview.attribution.target = mapview.attribution.target\n      || mapview.Map.getTargetElement()\n        .appendChild(mapp.utils.html.node`\n          <div class=\"attribution-links\">`)\n\n    mapview.attribution.check = () => {\n\n      const o = Object.assign({}, mapview.attribution.links || {})\n\n      // Iterate through layers to check whether attribution should be displayed.\n      Object.values(mapview.layers).forEach(layer => {\n        layer.display && layer.attribution && Object.assign(\n          o, layer.attribution)\n      })\n\n      // Render the layer attribution links into the placeholder.\n      mapp.utils.render(mapview.attribution.target,\n        mapp.utils.html`${Object.entries(o)\n          .map(entry => mapp.utils.html`\n              <a target=\"_blank\" href=\"${entry[1]}\">${entry[0]}`)}`)\n\n    }\n  }\n\n  // Events\n\n  // pointermove\n  mapview.Map.on('pointermove', e => {\n\n    // The geographic coordinate.\n    mapview.position = e.coordinate\n\n    // The pixel coordinate.\n    mapview.pointerLocation = {\n      x: e.originalEvent.clientX,\n      y: e.originalEvent.clientY\n    }\n  })\n\n  // mouseout\n  mapview.Map.getTargetElement().addEventListener('mouseout', () => {\n\n    mapview.infotip(null)\n\n    // Set position on and pointerLocation to null.\n    mapview.position = null\n    mapview.pointerLocation = {\n      x: null,\n      y: null\n    }\n  })\n\n  // changeEnd\n  mapview.Map.getTargetElement().addEventListener('changeEnd', changeEnd)\n\n  function changeEnd() {\n\n    // Update URL params if enabled on mapview\n    if (!mapview.hooks) return;\n\n    // Get center from Map.View\n    const center = ol.proj.transform(\n      mapview.Map.getView().getCenter(),\n      `EPSG:${mapview.srid}`,\n      `EPSG:4326`)\n\n    // Set lat, lng, z URL params.\n    mapp.hooks.set({\n      lat: Math.round((center[1] + Number.EPSILON) * 100000) / 100000,\n      lng: Math.round((center[0] + Number.EPSILON) * 100000) / 100000,\n      z: Math.round((mapview.Map.getView().getZoom() + Number.EPSILON) * 100) / 100\n    })\n  }\n\n  // Timer to debounce changeEnd event.\n  let changeEndTimer\n\n  // moveend to call changeEnd event.\n  mapview.Map.on('moveend', () => {\n    clearTimeout(changeEndTimer)\n\n    changeEndTimer = setTimeout(() => {\n      mapview.Map.getTargetElement().dispatchEvent(new CustomEvent('changeEnd'))\n    }, 500)\n  })\n\n  changeEndTimer = setTimeout(() => {\n    mapview.Map.getTargetElement().dispatchEvent(new CustomEvent('changeEnd'))\n  }, 500)\n\n  return mapview\n}", "export async function svg_templates(plugin) {\n\n  if (typeof mapp.utils.svgSymbols.templates !== 'object') {\n    mapp.utils.svgSymbols.templates = {}\n  }\n\n  // Iterate through svg_templates entries.\n  const promises = Object.entries(plugin).map(entry => {\n\n    // Fetch entry value.\n    return fetch(entry[1])\n      .then(response => response.text())\n      .then(svgString => {\n\n        // Assign parsed svgString as entry key to templates object.\n        mapp.utils.svgSymbols.templates[entry[0]] = svgString\n      })\n  })\n\n  await Promise.all(promises)\n}", "import utils from './utils/_utils.mjs'\n\nimport hooks from './hooks.mjs'\n\nimport dictionaries from './dictionaries/_dictionaries.mjs'\n\nimport layer from './layer/_layer.mjs'\n\nimport location from './location/_location.mjs'\n\nimport Mapview from './mapview/_mapview.mjs'\n\nimport * as plugins from './plugins.mjs'\n\nself.mapp = (function (mapp) {\n\n  hooks.parse();\n\n  Object.assign(mapp, {\n    version: '4.7.2',\n    hash: '4026463d6e57c02f0da8ad676d81f59e47baacc8',\n    language: hooks.current.language || 'en',\n  \n    dictionaries,\n  \n    dictionary: new Proxy({}, {\n      get: function(target, key, receiver){\n      \n          if (mapp.dictionaries[mapp.language][key]) {\n            return mapp.dictionaries[mapp.language][key];\n          }\n      \n          return mapp.dictionaries.en[key];\n      \n        }}),\n  \n    hooks,\n  \n    layer,\n  \n    location,\n  \n    Mapview,\n  \n    utils,\n    \n    plugins\n\n  })\n\n  return mapp;\n\n})({});"],
  "mappings": "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",
  "names": ["MapSet", "key", "value", "WeakMapSet", "empty", "elements", "attributes", "holes", "esm_default", "template", "prefix", "svg", "i", "_", "name", "attrs", "selfClosing", "ml", "hole", "ELEMENT_NODE", "nodeType", "remove", "firstChild", "lastChild", "range", "diffable", "node", "operation", "persistent", "fragment", "childNodes", "nodes", "isArray", "indexOf", "slice", "useForeign", "Foreign", "handler", "value", "args", "foreign", "aria", "node", "values", "key", "name", "getValue", "attribute", "oldValue", "orphan", "attributeNode", "newValue", "boolean", "data", "dataset", "event", "lower", "type", "info", "isArray", "ref", "setter", "text", "esm_default", "parentNode", "a", "b", "get", "before", "bLength", "aEnd", "bEnd", "aStart", "bStart", "map", "node", "i", "index", "sequence", "isArray", "prototype", "indexOf", "createDocumentFragment", "createElement", "createElementNS", "createTextNode", "createTreeWalker", "importNode", "_", "method", "createHTML", "html", "template", "xml", "createSVG", "svg", "content", "createContent", "text", "reducePath", "childNodes", "i", "diff", "comment", "oldNodes", "newNodes", "esm_default", "diffable", "handleAnything", "oldValue", "text", "nodes", "anyContent", "newValue", "createTextNode", "isArray", "value", "handleAttribute", "node", "name", "boolean", "setter", "event", "ref", "aria", "attribute", "handlers", "options", "type", "path", "createPath", "node", "path", "parentNode", "indexOf", "prefix", "cache", "WeakMapSet", "textOnly", "createCache", "createEntry", "type", "template", "content", "updates", "mapUpdates", "mapTemplate", "svg", "text", "esm_default", "createContent", "tw", "createTreeWalker", "nodes", "length", "i", "search", "fragment", "importNode", "handlers", "unroll", "info", "values", "unrollValues", "entry", "wire", "persistent", "stack", "hole", "Hole", "isArray", "tag", "type", "keyed", "WeakMapSet", "fixed", "cache", "template", "values", "unroll", "Hole", "ref", "id", "memo", "MapSet", "createCache", "render", "where", "what", "hole", "info", "wire", "html", "svg", "clone", "target", "map", "cloneTarget", "key", "csvDownload", "arr", "params", "rows", "record", "blob", "link", "promise", "convert", "moduleImport", "resolve", "mod", "convert_default", "value", "params", "copyToClipboard", "str", "textArea", "dataURLtoBlob", "dataURL", "parts", "contentType", "raw", "uInt8Array", "hexa_default", "hex", "transparency", "featureFormats_exports", "__export", "cluster", "geojson", "wkt", "initializeFieldStats", "layer", "features", "formatGeojson", "feature", "properties", "formatWKT", "field", "i", "vals", "geometry", "count", "id", "loadPlugins_default", "plugins", "resolveAll", "promises", "plugin", "resolve", "reject", "mod", "err", "getCurrentPosition_default", "callback", "options", "err", "mergeDeep", "target", "sources", "source", "isObject", "proto", "key", "item", "paramString_default", "params", "entry", "val", "promiseAll_default", "promises", "resolveAll", "rejectAll", "error", "queryParams_default", "_this", "tableCurrent", "table", "bounds", "center", "style_default", "style", "feature", "Styles", "icon", "scale", "fill", "stroke", "text", "svgSymbols_exports", "__export", "circle", "diamond", "dot", "markerColor", "markerLetter", "semiCircle", "square", "target", "template", "triangle", "xmlSerializer", "memoizedIcons", "style", "lookup", "a", "b", "icon", "svg", "layer", "x", "val", "scale", "y", "points", "s", "svgString", "entry", "gazetteer_exports", "__export", "datasets", "getLocation", "term", "gazetteer", "search", "dataset", "layer", "e", "row", "loc", "location", "infoj", "verticeGeoms_default", "feature", "geometry", "coords", "depth", "getDepth", "arr", "requestMap", "xhr_default", "params", "resolve", "reject", "xhr", "requestHeader", "entry", "e", "areSetsEqual", "a", "b", "value", "compose", "fns", "arg", "acc", "fn", "olScript", "resolve", "script", "utils_default", "render", "html", "svg", "convert_default", "clone", "copyToClipboard", "csvDownload", "dataURLtoBlob", "featureFormats_exports", "gazetteer_exports", "getCurrentPosition_default", "hexa_default", "loadPlugins_default", "mergeDeep", "paramString_default", "promiseAll_default", "queryParams_default", "style_default", "svgSymbols_exports", "verticeGeoms_default", "xhr_default", "hooks", "set", "parse", "remove", "removeAll", "push", "filter", "hooks_default", "url", "key", "value", "_hooks", "pushState", "val", "el", "me", "en_default", "de_default", "fr_default", "pl_default", "ja_default", "ko_default", "cn_default", "dictionaries_default", "en_default", "de_default", "fr_default", "pl_default", "ja_default", "ko_default", "cn_default", "decorate_default", "layer", "show", "hide", "tableCurrent", "tableMax", "tableMin", "zoomToExtent", "feature", "params", "location", "role", "negatedRole", "entry", "roleName", "key", "fn", "table", "zoom", "zoomKeys", "minZoomKey", "maxZoomKey", "val", "response", "bounds", "coords", "promise", "maplibregl", "MaplibreGL", "resolve", "imports", "error", "mbtiles_default", "layer", "frameState", "promise", "maplibregl", "MaplibreGL", "resolve", "imports", "error", "maplibre_default", "layer", "url", "resourceType", "transformMapboxUrl", "frameState", "accessToken", "normalizeStyleURL", "normalizeSpriteURL", "normalizeGlyphsURL", "normalizeSourceURL", "parseUrl", "parts", "formatUrl", "urlObject", "apiUrlObject", "params", "path", "tiles_default", "layer", "mvt_default", "layer", "tileUrlFunction", "tileCoord", "tableZ", "vector_default", "layer", "clusterConfig", "features", "table", "field", "bounds", "e", "feature_counts", "F", "fP", "entry", "format_default", "mbtiles_default", "maplibre_default", "tiles_default", "mvt_default", "vector_default", "fade", "layer", "out", "currentOpacity", "targetOpacity", "duration", "startTime", "updateOpacity", "elapsedTime", "progress", "interpolatedOpacity", "featureHover_default", "feature", "layer", "featureKey", "paramString", "response", "content", "filter", "ni", "featureFilter_default", "filters", "feature", "key", "type", "Style_default", "layer", "feature", "Styles", "lookupFeature", "f", "pointStyle", "highlightStyle", "labelStyle", "categorized_default", "theme", "feature", "catValue", "catStyle", "distributed_default", "theme", "feature", "catStyle", "bbox", "intersects", "b", "set", "free", "graduated_default", "theme", "feature", "catValue", "total", "F", "i", "catStyle", "layer_default", "decorate_default", "format_default", "featureHover_default", "featureFilter_default", "fade", "Style_default", "categorized_default", "distributed_default", "graduated_default", "decorate_default", "location", "flyTo", "remove", "trash", "update", "mvt_cache", "L", "fn", "newValues", "entry", "dependents", "response", "maxZoom", "sourceVector", "layer", "source", "get_default", "location", "list", "table", "response", "infoj", "_entry", "entry", "nnearest_default", "params", "properties", "geom", "_coords", "coords", "response", "list", "li", "e", "location_default", "decorate_default", "get_default", "nnearest_default", "addLayer_default", "layers", "layersSet", "_layer", "layer", "fitView_default", "extent", "opt_options", "val", "getBounds_default", "srid", "extent", "extentTransformed", "geoJSON_default", "params", "geoJSON", "feature", "err", "layerVector", "infotip", "infotip_default", "content", "mapview", "position", "locate_default", "params", "pos", "coords", "popup", "popup_default", "params", "mapview", "allFeatures_default", "mapview", "features", "F", "L", "feature", "content", "e", "highlight_default", "params", "mapview", "finish", "clear", "highlight", "getFeature", "L", "layer", "pointerMove", "click", "mouseDown", "touchStart", "mouseUp", "e", "shortCircuit", "candidates", "F", "candidate", "key", "feature", "clicked", "features", "featuresList", "f", "list", "li", "draw_default", "params", "mapview", "finish", "getFeature", "e", "moveEvent", "fn", "geometry", "onChange", "feature", "modify_default", "params", "mapview", "finish", "getFeature", "e", "geom", "geomType", "coords", "feature", "zoom_default", "params", "mapview", "finish", "e", "snap_default", "mapview", "tileloadend", "e", "mapview_default", "mapview", "addLayer_default", "fitView_default", "geoJSON_default", "getBounds_default", "infotip_default", "locate_default", "geometry", "popup_default", "allFeatures_default", "highlight_default", "draw_default", "modify_default", "zoom_default", "snap_default", "initialZoom", "initialCenter", "north", "south", "east", "west", "resizeObserverTimeout", "world", "extent", "maskFeature", "o", "layer", "entry", "e", "changeEnd", "center", "changeEndTimer", "plugins_exports", "__export", "svg_templates", "plugin", "promises", "entry", "response", "svgString", "mapp", "hooks_default", "dictionaries_default", "target", "key", "receiver", "layer_default", "location_default", "mapview_default", "utils_default", "plugins_exports"]
}
